{"version":3,"file":"quad-tap.js","mappings":"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","sources":["webpack://QuadTap/webpack/universalModuleDefinition","webpack://QuadTap/./src/QuadTap.js","webpack://QuadTap/webpack/bootstrap","webpack://QuadTap/webpack/runtime/compat get default export","webpack://QuadTap/webpack/runtime/define property getters","webpack://QuadTap/webpack/runtime/hasOwnProperty shorthand","webpack://QuadTap/webpack/runtime/node module decorator","webpack://QuadTap/./src/SettingsBuilder.js","webpack://QuadTap/./src/components/ControlStrip.js","webpack://QuadTap/./src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"QuadTap\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"QuadTap\"] = factory();\n\telse\n\t\troot[\"QuadTap\"] = factory();\n})(this, () => {\nreturn ","var t;\nt = () => ( () => {\n    var t = {\n        d: (e, o) => {\n            for (var n in o)\n                t.o(o, n) && !t.o(e, n) && Object.defineProperty(e, n, {\n                    enumerable: !0,\n                    get: o[n]\n                })\n        }\n        ,\n        o: (t, e) => Object.prototype.hasOwnProperty.call(t, e)\n    }\n      , e = {};\n    function o(t) {\n        var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}\n          , o = document.createElement(t);\n        if (e.className && (o.className = e.className),\n        e.id && (o.id = e.id),\n        e.text && (o.textContent = e.text),\n        e.html && (o.innerHTML = e.html),\n        e.attributes)\n            for (var n in e.attributes)\n                o.setAttribute(n, e.attributes[n]);\n        if (e.styles)\n            for (var i in e.styles)\n                o.style[i] = e.styles[i];\n        if (e.events)\n            for (var a in e.events)\n                o.addEventListener(a, e.events[a]);\n        return e.children && e.children.forEach((function(t) {\n            o.appendChild(t)\n        }\n        )),\n        o\n    }\n    function n(t, e, o) {\n        if (arguments.length > 3 && void 0 !== arguments[3] && arguments[3]) {\n            var n = t.parentElement;\n            if (n) {\n                var i = n.getBoundingClientRect();\n                e = i.width * e,\n                o = i.height * o\n            }\n        }\n        t.style.left = e + \"px\",\n        t.style.top = o + \"px\",\n        t.style.transform = \"translate(-50%, -50%)\"\n    }\n    function i(t) {\n        return i = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(t) {\n            return typeof t\n        }\n        : function(t) {\n            return t && \"function\" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? \"symbol\" : typeof t\n        }\n        ,\n        i(t)\n    }\n    t.d(e, {\n        default: () => M\n    });\n    var a = \"quadTap_\";\n    function r(t, e) {\n        try {\n            var o = a + t;\n            return \"object\" === i(e) ? localStorage.setItem(o, JSON.stringify(e)) : localStorage.setItem(o, e),\n            !0\n        } catch (t) {\n            return console.error(\"[QuadTap] Error saving to localStorage:\", t),\n            !1\n        }\n    }\n    function s(t) {\n        var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null;\n        try {\n            var o = a + t\n              , n = localStorage.getItem(o);\n            if (null === n)\n                return e;\n            try {\n                return JSON.parse(n)\n            } catch (t) {\n                return n\n            }\n        } catch (t) {\n            return console.error(\"[QuadTap] Error retrieving from localStorage:\", t),\n            e\n        }\n    }\n    function l(t) {\n        return l = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(t) {\n            return typeof t\n        }\n        : function(t) {\n            return t && \"function\" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? \"symbol\" : typeof t\n        }\n        ,\n        l(t)\n    }\n    function d() {\n        d = function() {\n            return e\n        }\n        ;\n        var t, e = {}, o = Object.prototype, n = o.hasOwnProperty, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", r = i.asyncIterator || \"@@asyncIterator\", s = i.toStringTag || \"@@toStringTag\";\n        function c(t, e, o, n) {\n            return Object.defineProperty(t, e, {\n                value: o,\n                enumerable: !n,\n                configurable: !n,\n                writable: !n\n            })\n        }\n        try {\n            c({}, \"\")\n        } catch (t) {\n            c = function(t, e, o) {\n                return t[e] = o\n            }\n        }\n        function u(e, o, n, i) {\n            var a = o && o.prototype instanceof g ? o : g\n              , r = Object.create(a.prototype);\n            return c(r, \"_invoke\", function(e, o, n) {\n                var i = 1;\n                return function(a, r) {\n                    if (3 === i)\n                        throw Error(\"Generator is already running\");\n                    if (4 === i) {\n                        if (\"throw\" === a)\n                            throw r;\n                        return {\n                            value: t,\n                            done: !0\n                        }\n                    }\n                    for (n.method = a,\n                    n.arg = r; ; ) {\n                        var s = n.delegate;\n                        if (s) {\n                            var l = j(s, n);\n                            if (l) {\n                                if (l === p)\n                                    continue;\n                                return l\n                            }\n                        }\n                        if (\"next\" === n.method)\n                            n.sent = n._sent = n.arg;\n                        else if (\"throw\" === n.method) {\n                            if (1 === i)\n                                throw i = 4,\n                                n.arg;\n                            n.dispatchException(n.arg)\n                        } else\n                            \"return\" === n.method && n.abrupt(\"return\", n.arg);\n                        i = 3;\n                        var d = h(e, o, n);\n                        if (\"normal\" === d.type) {\n                            if (i = n.done ? 4 : 2,\n                            d.arg === p)\n                                continue;\n                            return {\n                                value: d.arg,\n                                done: n.done\n                            }\n                        }\n                        \"throw\" === d.type && (i = 4,\n                        n.method = \"throw\",\n                        n.arg = d.arg)\n                    }\n                }\n            }(e, n, new T(i || [])), !0),\n            r\n        }\n        function h(t, e, o) {\n            try {\n                return {\n                    type: \"normal\",\n                    arg: t.call(e, o)\n                }\n            } catch (t) {\n                return {\n                    type: \"throw\",\n                    arg: t\n                }\n            }\n        }\n        e.wrap = u;\n        var p = {};\n        function g() {}\n        function m() {}\n        function f() {}\n        var b = {};\n        c(b, a, (function() {\n            return this\n        }\n        ));\n        var v = Object.getPrototypeOf\n          , y = v && v(v(B([])));\n        y && y !== o && n.call(y, a) && (b = y);\n        var w = f.prototype = g.prototype = Object.create(b);\n        function x(t) {\n            [\"next\", \"throw\", \"return\"].forEach((function(e) {\n                c(t, e, (function(t) {\n                    return this._invoke(e, t)\n                }\n                ))\n            }\n            ))\n        }\n        function C(t, e, o) {\n            var n = document.createElement(\"button\");\n            w(n, b);\n            \n            // Detect if we're on mobile or small screen\n            var isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\n            var isSmallScreen = window.innerWidth < 768;\n            \n            // Apply responsive styles for buttons on mobile/small screens\n            if (isMobile || isSmallScreen) {\n                n.style.width = \"26px\";\n                n.style.height = \"26px\";\n                n.style.margin = \"0 2px\";\n                n.style.fontSize = \"13px\";\n            }\n            \n            // Fix alignment issues - using a single block of style definitions\n            n.style.display = \"flex\";\n            n.style.alignItems = \"center\";\n            n.style.justifyContent = \"center\";\n            n.style.lineHeight = \"1\";\n            n.style.padding = \"0\"; // Remove any default padding\n            n.style.verticalAlign = \"middle\";\n            \n            n.textContent = t;\n            n.setAttribute(\"aria-label\", e);\n            n.addEventListener(\"mouseenter\", (function() {\n                w(n, v)\n            })),\n            n.addEventListener(\"mouseleave\", (function() {\n                n.style.backgroundColor = \"\"\n            })),\n            n.addEventListener(\"click\", function(e) {\n                e.preventDefault();\n                o(e);\n            }),\n            \n            // Add touch events for mobile\n            n.addEventListener(\"touchstart\", function(e) {\n                e.preventDefault(); // Prevent default touch behavior\n                w(n, v); // Apply hover style on touch\n            }),\n            n.addEventListener(\"touchend\", function(e) {\n                e.preventDefault(); // Prevent default touch behavior\n                n.style.backgroundColor = \"\"; // Reset style\n                o(e); // Call the original handler\n            }),\n            n.addEventListener(\"touchcancel\", function(e) {\n                n.style.backgroundColor = \"\"; // Reset style on touch cancel\n            });\n            \n            return n;\n        }\n        function j(t) {\n            var n = o.method\n              , i = e.i[n];\n            if (i === t)\n                return o.delegate = null,\n                \"throw\" === n && e.i.return && (o.method = \"return\",\n                o.arg = t,\n                j(e, o),\n                \"throw\" === o.method) || \"return\" !== n && (o.method = \"throw\",\n                o.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")),\n                p;\n            var a = h(i, e.i, o.arg);\n            if (\"throw\" === a.type)\n                return o.method = \"throw\",\n                o.arg = a.arg,\n                o.delegate = null,\n                p;\n            var r = a.arg;\n            return r ? r.done ? (o[e.r] = r.value,\n            o.next = e.n,\n            \"return\" !== o.method && (o.method = \"next\",\n            o.arg = t),\n            o.delegate = null,\n            p) : r : (o.method = \"throw\",\n            o.arg = new TypeError(\"iterator result is not an object\"),\n            o.delegate = null,\n            p)\n        }\n        function k(t) {\n            this.tryEntries.push(t)\n        }\n        function S(e) {\n            var o = e[4] || {};\n            o.type = \"normal\",\n            o.arg = t,\n            e[4] = o\n        }\n        function T(t) {\n            this.tryEntries = [[-1]],\n            t.forEach(k, this),\n            this.reset(!0)\n        }\n        function B(e) {\n            if (null != e) {\n                var o = e[a];\n                if (o)\n                    return o.call(e);\n                if (\"function\" == typeof e.next)\n                    return e;\n                if (!isNaN(e.length)) {\n                    var i = -1\n                      , r = function o() {\n                        for (; ++i < e.length; )\n                            if (n.call(e, i))\n                                return o.value = e[i],\n                                o.done = !1,\n                                o;\n                        return o.value = t,\n                        o.done = !0,\n                        o\n                    };\n                    return r.next = r\n                }\n            }\n            throw new TypeError(l(e) + \" is not iterable\")\n        }\n        return m.prototype = f,\n        c(w, \"constructor\", f),\n        c(f, \"constructor\", m),\n        m.displayName = c(f, s, \"GeneratorFunction\"),\n        e.isGeneratorFunction = function(t) {\n            var e = \"function\" == typeof t && t.constructor;\n            return !!e && (e === m || \"GeneratorFunction\" === (e.displayName || e.name))\n        }\n        ,\n        e.mark = function(t) {\n            return Object.setPrototypeOf ? Object.setPrototypeOf(t, f) : (t.__proto__ = f,\n            c(t, s, \"GeneratorFunction\")),\n            t.prototype = Object.create(w),\n            t\n        }\n        ,\n        e.awrap = function(t) {\n            return {\n                __await: t\n            }\n        }\n        ,\n        x(C.prototype),\n        c(C.prototype, r, (function() {\n            return this\n        }\n        )),\n        e.AsyncIterator = C,\n        e.async = function(t, o, n, i, a) {\n            void 0 === a && (a = Promise);\n            var r = new C(u(t, o, n, i),a);\n            return e.isGeneratorFunction(o) ? r : r.next().then((function(t) {\n                return t.done ? t.value : r.next()\n            }\n            ))\n        }\n        ,\n        x(w),\n        c(w, s, \"Generator\"),\n        c(w, a, (function() {\n            return this\n        }\n        )),\n        c(w, \"toString\", (function() {\n            return \"[object Generator]\"\n        }\n        )),\n        e.keys = function(t) {\n            var e = Object(t)\n              , o = [];\n            for (var n in e)\n                o.unshift(n);\n            return function t() {\n                for (; o.length; )\n                    if ((n = o.pop())in e)\n                        return t.value = n,\n                        t.done = !1,\n                        t;\n                return t.done = !0,\n                t\n            }\n        }\n        ,\n        e.values = B,\n        T.prototype = {\n            constructor: T,\n            reset: function(e) {\n                if (this.prev = this.next = 0,\n                this.sent = this._sent = t,\n                this.done = !1,\n                this.delegate = null,\n                this.method = \"next\",\n                this.arg = t,\n                this.tryEntries.forEach(S),\n                !e)\n                    for (var o in this)\n                        \"t\" === o.charAt(0) && n.call(this, o) && !isNaN(+o.slice(1)) && (this[o] = t)\n            },\n            stop: function() {\n                this.done = !0;\n                var t = this.tryEntries[0][4];\n                if (\"throw\" === t.type)\n                    throw t.arg;\n                return this.rval\n            },\n            dispatchException: function(e) {\n                if (this.done)\n                    throw e;\n                var o = this;\n                function n(t) {\n                    r.type = \"throw\",\n                    r.arg = e,\n                    o.next = t\n                }\n                for (var i = o.tryEntries.length - 1; i >= 0; --i) {\n                    var a = this.tryEntries[i]\n                      , r = a[4]\n                      , s = this.prev\n                      , l = a[1]\n                      , d = a[2];\n                    if (-1 === a[0])\n                        return n(\"end\"),\n                        !1;\n                    if (!l && !d)\n                        throw Error(\"try statement without catch or finally\");\n                    if (null != a[0] && a[0] <= s) {\n                        if (s < l)\n                            return this.method = \"next\",\n                            this.arg = t,\n                            n(l),\n                            !0;\n                        if (s < d)\n                            return n(d),\n                            !1\n                    }\n                }\n            },\n            abrupt: function(t, e) {\n                for (var o = this.tryEntries.length - 1; o >= 0; --o) {\n                    var n = this.tryEntries[o];\n                    if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) {\n                        var i = n;\n                        break\n                    }\n                }\n                i && (\"break\" === t || \"continue\" === t) && i[0] <= e && e <= i[2] && (i = null);\n                var a = i ? i[4] : {};\n                return a.type = t,\n                a.arg = e,\n                i ? (this.method = \"next\",\n                this.next = i[2],\n                p) : this.complete(a)\n            },\n            complete: function(t, e) {\n                if (\"throw\" === t.type)\n                    throw t.arg;\n                return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg,\n                this.method = \"return\",\n                this.next = \"end\") : \"normal\" === t.type && e && (this.next = e),\n                p\n            },\n            finish: function(t) {\n                for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n                    var o = this.tryEntries[e];\n                    if (o[2] === t)\n                        return this.complete(o[4], o[3]),\n                        S(o),\n                        p\n                }\n            },\n            catch: function(t) {\n                for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n                    var o = this.tryEntries[e];\n                    if (o[0] === t) {\n                        var n = o[4];\n                        if (\"throw\" === n.type) {\n                            var i = n.arg;\n                            S(o)\n                        }\n                        return i\n                    }\n                }\n                throw Error(\"illegal catch attempt\")\n            },\n            delegateYield: function(e, o, n) {\n                return this.delegate = {\n                    i: B(e),\n                    r: o,\n                    n\n                },\n                \"next\" === this.method && (this.arg = t),\n                p\n            }\n        },\n        e\n    }\n    function c(t, e, o, n, i, a, r) {\n        try {\n            var s = t[a](r)\n              , l = s.value\n        } catch (t) {\n            return void o(t)\n        }\n        s.done ? e(l) : Promise.resolve(l).then(n, i)\n    }\n    function u(t) {\n        return function() {\n            var e = this\n              , o = arguments;\n            return new Promise((function(n, i) {\n                var a = t.apply(e, o);\n                function r(t) {\n                    c(a, n, i, r, s, \"next\", t)\n                }\n                function s(t) {\n                    c(a, n, i, r, s, \"throw\", t)\n                }\n                r(void 0)\n            }\n            ))\n        }\n    }\n    function h() {\n        return (h = u(d().mark((function t(e) {\n            var o, n, i;\n            return d().wrap((function(t) {\n                for (; ; )\n                    switch (t.prev = t.next) {\n                    case 0:\n                        if (n = e.elements.video,\n                        !(i = (null === (o = e.config.videoPlayerApi) || void 0 === o ? void 0 : o.enabled) && e.config.videoPlayerApi.adapter)) {\n                            t.next = 7;\n                            break\n                        }\n                        return t.next = 5,\n                        i.play();\n                    case 5:\n                        t.next = 16;\n                        break;\n                    case 7:\n                        if (!n) {\n                            t.next = 16;\n                            break\n                        }\n                        return t.prev = 8,\n                        t.next = 11,\n                        n.play();\n                    case 11:\n                        t.next = 16;\n                        break;\n                    case 13:\n                        t.prev = 13,\n                        t.t0 = t.catch(8),\n                        console.error(\"Error resuming video playback:\", t.t0);\n                    case 16:\n                    case \"end\":\n                        return t.stop()\n                    }\n            }\n            ), t, null, [[8, 13]])\n        }\n        )))).apply(this, arguments)\n    }\n    function p() {\n        return (p = u(d().mark((function t(e) {\n            var o, n, i;\n            return d().wrap((function(t) {\n                for (; ; )\n                    switch (t.prev = t.next) {\n                    case 0:\n                        if (n = e.elements.video,\n                        !(i = (null === (o = e.config.videoPlayerApi) || void 0 === o ? void 0 : o.enabled) && e.config.videoPlayerApi.adapter)) {\n                            t.next = 11;\n                            break\n                        }\n                        // QuadTap MOD: Unconditionally pause if adapter exists\n                        return t.next = 5,\n                        i.pause();\n                    case 5:\n                        // e.state.wasPlayingBefore = t.sent; // QuadTap MOD: Removed wasPlayingBefore logic\n                        // if (!e.state.wasPlayingBefore) {\n                        //     t.next = 9;\n                        //     break\n                        // }\n                        // return t.next = 9,\n                        // i.pause();\n                    // case 9:\n                        t.next = 12; // QuadTap MOD: Skip to end after pause\n                        break;\n                    case 11:\n                        // QuadTap MOD: Unconditionally pause if native video element exists\n                        n && n.pause();\n                        // e.state.wasPlayingBefore = !1; // QuadTap MOD: Removed wasPlayingBefore logic\n                    case 12:\n                    case \"end\":\n                        return t.stop()\n                    }\n            }\n            ), t)\n        }\n        )))).apply(this, arguments)\n    }\n    var g = {\n        width: \"60%\", // Adjusted from 70%\n        maxWidth: \"350px\", // Adjusted from 420px\n        height: \"auto\", \n        padding: \"6px 10px\", // Slightly reduced padding\n        borderRadius: \"24px\",\n        backgroundColor: \"rgba(0, 0, 0, 0.7)\",\n        display: \"flex\", \n        justifyContent: \"space-around\", // Restored original space-around\n        alignItems: \"center\",\n        boxShadow: \"0 2px 8px rgba(0, 0, 0, 0.3)\",\n        transition: \"opacity 0.3s ease, width 0.3s ease, padding 0.3s ease\"\n    }\n      , m = {\n        position: \"absolute\",\n        top: \"50%\",\n        left: \"50%\",\n        transform: \"translate(-50%, -50%)\"\n    }\n      , f = {\n        position: \"static\",\n        top: \"\",\n        left: \"\",\n        transform: \"\",\n        margin: \"20px auto\"\n    }\n      , b = {\n        width: \"30px\", // Adjusted from 32px\n        height: \"30px\", // Adjusted from 32px\n        margin: \"0 3px\", // Adjusted from 4px\n        borderRadius: \"50%\",\n        border: \"none\",\n        backgroundColor: \"rgba(255, 255, 255, 0.2)\",\n        color: \"white\",\n        fontSize: \"14px\", // Adjusted from 15px\n        cursor: \"pointer\",\n        outline: \"none\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        transition: \"background-color 0.2s ease\"\n    }\n      , v = {\n        backgroundColor: \"rgba(255, 255, 255, 0.2)\"\n    }\n      , y = {\n        position: \"absolute\",\n        backgroundColor: \"rgba(0, 0, 0, 0.8)\",\n        color: \"white\",\n        padding: \"5px 10px\",\n        borderRadius: \"4px\",\n        fontSize: \"14px\",\n        zIndex: \"2000\",\n        pointerEvents: \"none\",\n        opacity: \"0\",\n        transition: \"opacity 0.3s ease\"\n    };\n    function w(t, e) {\n        Object.assign(t.style, e)\n    }\n    function x(t) {\n        var e = t.overlay\n          , o = t.onPlay\n          , n = t.onPause\n          , i = t.onRewind\n          , a = t.onForward\n          , r = t.onShare\n          , s = t.onCopyUrl\n          , l = t.rewindTime\n          , d = void 0 === l ? 30 : l\n          , c = t.forwardTime\n          , u = void 0 === c ? 30 : c\n          , h = t.debug\n          , p = void 0 !== h && h\n          , b = t.showAllButtons\n          , v = void 0 !== b && b\n          , y = t.isLightbox\n          , x = void 0 !== y && y\n          , j = document.createElement(\"div\");\n          \n        // Apply base styles\n        w(j, g);\n        w(j, x ? f : m);\n        \n        // Detect if we're on mobile or small screen\n        var isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\n        var isSmallScreen = window.innerWidth < 768;\n        \n        // Apply responsive styles for mobile/small screens\n        if (isMobile || isSmallScreen) {\n            // Narrower on mobile but not too narrow\n            j.style.width = \"65%\";\n            j.style.maxWidth = \"280px\";\n            j.style.padding = \"5px 8px\";\n        }\n        \n        if (!x) {\n            var T = parseInt(getComputedStyle(e).zIndex) || 1e3;\n            j.style.zIndex = (T + 10).toString()\n        }\n        \n        var B = C(\"⟲\" + d, \"Rewind \" + d + \" seconds\", i)\n          , E = C(\"▶\", \"Play/Pause\", (function(t) {\n            var e = \"▶\" === E.textContent;\n            E.textContent = e ? \"❚❚\" : \"▶\",\n            e ? o(t) : n(t)\n        }\n        ))\n          , q = C(\"⟳\" + u, \"Forward \" + u + \" seconds\", a)\n          , P = C(\"⤴\", \"Share\", (function(t) {\n            if (t.stopPropagation(),\n            r)\n                r(t);\n            else {\n                var e = window.location.href;\n                navigator.share ? navigator.share({\n                    title: \"Check out this video moment\",\n                    url: e\n                }).catch((function(t) {\n                    console.error(\"Error sharing:\", t)\n                }\n                )) : (k(e),\n                S(P, \"Link copied!\"))\n            }\n        }\n        ))\n          , O = C(\"⧉\", \"Copy URL\", (function(t) {\n            t.stopPropagation(),\n            s ? s(t) : (k(window.location.href),\n            S(O, \"Link copied!\"))\n        }\n        ));\n        if (j.appendChild(B),\n        j.appendChild(E),\n        j.appendChild(q),\n        (v || x) && (j.appendChild(P),\n        j.appendChild(O)),\n        \n        // Add click event handler to stop propagation\n        j.addEventListener(\"click\", (function(t) {\n            t.stopPropagation(),\n            p && console.log(\"[QuadTap] Control strip clicked, propagation stopped\")\n        })),\n        \n        // Add touch event handlers for mobile\n        j.addEventListener(\"touchstart\", function(t) {\n            t.stopPropagation();\n            j.style.opacity = \"1\";\n            p && console.log(\"[QuadTap] Control strip touch started, propagation stopped\");\n        }),\n        j.addEventListener(\"touchend\", function(t) {\n            t.stopPropagation();\n            p && console.log(\"[QuadTap] Control strip touch ended, propagation stopped\");\n        }),\n        j.addEventListener(\"touchmove\", function(t) {\n            t.stopPropagation();\n        }),\n        \n        e.appendChild(j),\n        !x) {\n            var z, L = function() {\n                j.style.opacity = \"0.5\"\n            };\n            j.addEventListener(\"mouseenter\", (function() {\n                clearTimeout(z),\n                j.style.opacity = \"1\"\n            }\n            )),\n            j.addEventListener(\"mouseleave\", (function() {\n                clearTimeout(z),\n                z = setTimeout(L, 2e3)\n            }\n            )),\n            j.style.opacity = \"1\",\n            z = setTimeout(L, 2e3)\n        }\n        return p && (console.log(\"[QuadTap] Control strip created with positioning:\", {\n            isLightbox: x,\n            className: j.className,\n            zIndex: j.style.zIndex\n        }),\n        x || new ResizeObserver((function() {\n            var t = j.getBoundingClientRect()\n              , o = e.getBoundingClientRect()\n              , n = (t.top - o.top + t.height / 2) / o.height * 100\n              , i = (t.left - o.left + t.width / 2) / o.width * 100;\n            console.log(\"[QuadTap] Control strip position after resize:\", {\n                topPercent: n.toFixed(2) + \"%\",\n                leftPercent: i.toFixed(2) + \"%\",\n                width: t.width,\n                height: t.height\n            })\n        }\n        )).observe(e)),\n        j\n    }\n    function C(t, e, o) {\n        var n = document.createElement(\"button\");\n        w(n, b);\n        \n        // Detect if we're on mobile or small screen\n        var isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\n        var isSmallScreen = window.innerWidth < 768;\n        \n        // Apply responsive styles for buttons on mobile/small screens\n        if (isMobile || isSmallScreen) {\n            n.style.width = \"26px\";\n            n.style.height = \"26px\";\n            n.style.margin = \"0 2px\";\n            n.style.fontSize = \"13px\";\n        }\n        \n        // Fix alignment issues - using a single block of style definitions\n        n.style.display = \"flex\";\n        n.style.alignItems = \"center\";\n        n.style.justifyContent = \"center\";\n        n.style.lineHeight = \"1\";\n        n.style.padding = \"0\"; // Remove any default padding\n        n.style.verticalAlign = \"middle\";\n        \n        n.textContent = t;\n        n.setAttribute(\"aria-label\", e);\n        n.addEventListener(\"mouseenter\", (function() {\n            w(n, v)\n        })),\n        n.addEventListener(\"mouseleave\", (function() {\n            n.style.backgroundColor = \"\"\n        })),\n        n.addEventListener(\"click\", function(e) {\n            e.preventDefault();\n            o(e);\n        }),\n        \n        // Add touch events for mobile\n        n.addEventListener(\"touchstart\", function(e) {\n            e.preventDefault(); // Prevent default touch behavior\n            w(n, v); // Apply hover style on touch\n        }),\n        n.addEventListener(\"touchend\", function(e) {\n            e.preventDefault(); // Prevent default touch behavior\n            n.style.backgroundColor = \"\"; // Reset style\n            o(e); // Call the original handler\n        }),\n        n.addEventListener(\"touchcancel\", function(e) {\n            n.style.backgroundColor = \"\"; // Reset style on touch cancel\n        });\n        \n        return n;\n    }\n    function j(t, e) {\n        var o = t.querySelector(\"button:nth-child(2)\");\n        o && (o.textContent = e ? \"❚❚\" : \"▶\")\n    }\n    function k(t) {\n        if (navigator.clipboard && navigator.clipboard.writeText)\n            navigator.clipboard.writeText(t).catch((function(t) {\n                console.error(\"Failed to copy text: \", t)\n            }\n            ));\n        else {\n            var e = document.createElement(\"textarea\");\n            e.value = t,\n            e.style.position = \"fixed\",\n            document.body.appendChild(e),\n            e.select();\n            try {\n                document.execCommand(\"copy\")\n            } catch (t) {\n                console.error(\"Failed to copy text: \", t)\n            }\n            document.body.removeChild(e)\n        }\n    }\n    function S(t, e) {\n        var o = document.createElement(\"div\");\n        w(o, y),\n        o.textContent = e;\n        var n = t.getBoundingClientRect();\n        o.style.top = \"\".concat(n.top - 30, \"px\"),\n        o.style.left = \"\".concat(n.left + n.width / 2, \"px\"),\n        o.style.transform = \"translateX(-50%)\",\n        document.body.appendChild(o),\n        setTimeout((function() {\n            o.style.opacity = \"1\"\n        }\n        ), 10),\n        setTimeout((function() {\n            o.style.opacity = \"0\",\n            setTimeout((function() {\n                document.body.removeChild(o)\n            }\n            ), 300)\n        }\n        ), 1500)\n    }\n    function T(t) {\n        return T = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(t) {\n            return typeof t\n        }\n        : function(t) {\n            return t && \"function\" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? \"symbol\" : typeof t\n        }\n        ,\n        T(t)\n    }\n    function B(t, e) {\n        for (var o = 0; o < e.length; o++) {\n            var n = e[o];\n            n.enumerable = n.enumerable || !1,\n            n.configurable = !0,\n            \"value\"in n && (n.writable = !0),\n            Object.defineProperty(t, E(n.key), n)\n        }\n    }\n    function E(t) {\n        var e = function(t) {\n            if (\"object\" != T(t) || !t)\n                return t;\n            var e = t[Symbol.toPrimitive];\n            if (void 0 !== e) {\n                var o = e.call(t, \"string\");\n                if (\"object\" != T(o))\n                    return o;\n                throw new TypeError(\"@@toPrimitive must return a primitive value.\")\n            }\n            return String(t)\n        }(t);\n        return \"symbol\" == T(e) ? e : e + \"\"\n    }\n    var q = {\n        containerId: \"main-video-droppable\",\n        videoSelector: \"#main-video\",\n        autoCancelTimeout: 5e3,\n        debug: !0,\n        emojis: {\n            quadrants: {\n                topLeft: \"🕊️\",\n                topRight: \"🌟\",\n                bottomLeft: \"🌧️\",\n                bottomRight: \"💥\"\n            },\n            directional: {\n                up: \"🚀\",\n                right: \"👑\",\n                down: \"⬇️\",\n                left: \"🤫\"\n            },\n            thoughts: {\n                topLeft: [\"🌸\", \"🎈\", \"🌦️\", \"🛤️\"],\n                topRight: [\"🌈\", \"✨\", \"🌤️\", \"🎆\"],\n                bottomLeft: [\"🍂\", \"🌙\", \"☔\", \"🗿\"],\n                bottomRight: [\"⚖️\", \"🏆\", \"⛈️\", \"💣\"]\n            }\n        },\n        videoControls: {\n            enabled: !0,\n            rewindTime: 30,\n            forwardTime: 30\n        },\n        callbacks: {\n            onOverlayActivate: null,\n            onThrowDownInitiate: null,\n            onThrowDownConfirm: null,\n            onThrowDownCancel: null,\n            onVideoControl: null\n        }\n    };\n    const P = function() {\n        return t = function t() {\n            var e, o, n = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};\n            !function(t, e) {\n                if (!(t instanceof e))\n                    throw new TypeError(\"Cannot call a class as a function\")\n            }(this, t),\n            this.config = Object.assign({}, q, n),\n            n.emojis && (this.config.emojis = Object.assign({}, q.emojis, n.emojis),\n            n.emojis.quadrants && (this.config.emojis.quadrants = Object.assign({}, q.emojis.quadrants, n.emojis.quadrants)),\n            n.emojis.directional && (this.config.emojis.directional = Object.assign({}, q.emojis.directional, n.emojis.directional)),\n            n.emojis.thoughts && (this.config.emojis.thoughts = Object.assign({}, q.emojis.thoughts, n.emojis.thoughts))),\n            n.videoControls && (this.config.videoControls = Object.assign({}, q.videoControls, n.videoControls)),\n            n.profileBubble ? this.config.profileBubble = Object.assign({}, {\n                imageUrl: null,\n                fallbackEmoji: \"👤\",\n                size: \"60px\",\n                borderColor: \"white\",\n                borderWidth: \"2px\",\n                backgroundColor: \"rgba(0, 0, 0, 0.7)\"\n            }, n.profileBubble) : this.config.profileBubble = {\n                imageUrl: null,\n                fallbackEmoji: \"👤\",\n                size: \"60px\",\n                borderColor: \"white\",\n                borderWidth: \"2px\",\n                backgroundColor: \"rgba(0, 0, 0, 0.7)\"\n            },\n            n.colors ? (this.config.colors = {\n                overlay: {\n                    background: \"rgba(240, 240, 245, 0.5)\",\n                    quadrantGradients: {\n                        topLeft: \"rgba(0, 255, 255, 0.8)\",\n                        topRight: \"rgba(255, 255, 0, 0.8)\",\n                        bottomLeft: \"rgba(0, 255, 0, 0.8)\",\n                        bottomRight: \"rgba(255, 0, 255, 0.8)\"\n                    }\n                },\n                lightbox: {\n                    background: \"rgba(20, 30, 40, 0.95)\",\n                    text: \"white\",\n                    headerBackground: \"rgba(30, 40, 60, 0.8)\",\n                    buttonPrimary: \"#4CAF50\",\n                    buttonSecondary: \"#f44336\"\n                }\n            },\n            n.colors.overlay && (this.config.colors.overlay = Object.assign({}, this.config.colors.overlay, n.colors.overlay),\n            n.colors.overlay.quadrantGradients && (this.config.colors.overlay.quadrantGradients = Object.assign({}, this.config.colors.overlay.quadrantGradients, n.colors.overlay.quadrantGradients))),\n            n.colors.lightbox && (this.config.colors.lightbox = Object.assign({}, this.config.colors.lightbox, n.colors.lightbox))) : this.config.colors = {\n                overlay: {\n                    background: \"rgba(240, 240, 245, 0.5)\",\n                    quadrantGradients: {\n                        topLeft: \"rgba(0, 255, 255, 0.8)\",\n                        topRight: \"rgba(255, 255, 0, 0.8)\",\n                        bottomLeft: \"rgba(0, 255, 0, 0.8)\",\n                        bottomRight: \"rgba(255, 0, 255, 0.8)\"\n                    }\n                },\n                lightbox: {\n                    background: \"rgba(20, 30, 40, 0.95)\",\n                    text: \"white\",\n                    headerBackground: \"rgba(30, 40, 60, 0.8)\",\n                    buttonPrimary: \"#4CAF50\",\n                    buttonSecondary: \"#f44336\"\n                }\n            },\n            this.state = {\n                active: !1,\n                profileBubblePosition: {\n                    x: 0,\n                    y: 0\n                },\n                currentQuadrant: null,\n                autoCancelTimer: null,\n                containerDimensions: {\n                    width: 0,\n                    height: 0\n                },\n                videoPlaying: !1,\n                wasPlayingBefore: !1,\n                recording: !1,\n                mediaStream: null,\n                mediaRecorder: null,\n                recordingStartTime: 0,\n                recordingIndicator: null,\n                swipeDebounceTimer: null, // For debounce timing\n                swipeProcessing: !1 // Add this to track active swipe processing\n            },\n            this.elements = {\n                container: null,\n                video: null,\n                overlay: null,\n                profileBubble: null,\n                directionalEmojis: {},\n                quadrantEmojis: {},\n                videoControls: null,\n                tooltip: null,\n                lightBox: null,\n                lightBoxContent: null,\n                emojiGrid: null,\n                commentBox: null\n            },\n            this.throttledResize = (e = this.handleResize.bind(this),\n            function() {\n                o || (e.apply(void 0, arguments),\n                o = !0,\n                setTimeout((function() {\n                    o = !1\n                }\n                ), 100))\n            }\n            ),\n            this.init()\n        }\n        ,\n        e = [{\n            key: \"log\",\n            value: function(t, e) {\n                this.config.debug && console.log(\"[QuadTap] \".concat(t), e || \"\")\n            }\n        }, {\n            key: \"init\",\n            value: function() {\n                this.log(\"Initializing QuadTap\");\n                var t = document.getElementById(this.config.containerId);\n                t ? (this.elements.container = t,\n                function() {\n                    if (!document.getElementById(\"quad-tap-styles\")) {\n                        var t = document.createElement(\"style\");\n                        t.id = \"quad-tap-styles\",\n                        t.textContent = \"\\n    /* Overlay Container */\\n    .overlay-container {\\n      position: absolute;\\n      top: 0;\\n      left: 0;\\n      width: 100%;\\n      height: 100%;\\n      display: flex;\\n      opacity: 0;\\n      pointer-events: none;\\n      transition: opacity 0.3s ease;\\n      z-index: 1000;\\n      background-color: rgba(240, 240, 245, 0.5);\\n    }\\n    \\n    .overlay-container.active {\\n      opacity: 1;\\n      pointer-events: auto;\\n    }\\n    \\n    /* Block pointer events on video when overlay is active */\\n    .overlay-container.active + video,\\n    .quad-tap-overlay.active + video {\\n      pointer-events: none;\\n    }\\n    \\n    /* Quadrants */\\n    .quadrant {\\n      position: absolute;\\n      width: 50%;\\n      height: 50%;\\n      opacity: 0.8;\\n      transition: opacity 0.3s ease;\\n    }\\n    \\n    .quadrant.top-left {\\n      top: 0;\\n      left: 0;\\n      background: linear-gradient(135deg, rgba(0, 255, 255, 0.8), rgba(0, 255, 255, 0));\\n    }\\n    \\n    .quadrant.top-right {\\n      top: 0;\\n      right: 0;\\n      background: linear-gradient(225deg, rgba(255, 255, 0, 0.8), rgba(255, 255, 0, 0));\\n    }\\n    \\n    .quadrant.bottom-left {\\n      bottom: 0;\\n      left: 0;\\n      background: linear-gradient(45deg, rgba(0, 255, 0, 0.8), rgba(0, 255, 0, 0));\\n    }\\n    \\n    .quadrant.bottom-right {\\n      bottom: 0;\\n      right: 0;\\n      background: linear-gradient(315deg, rgba(255, 0, 255, 0.8), rgba(255, 0, 255, 0));\\n    }\\n    \\n    /* Profile Bubble */\\n    .profile-bubble {\\n      position: absolute;\\n      width: 60px;\\n      height: 60px;\\n      border-radius: 50%;\\n      background-color: rgba(128, 128, 128, 0.8);\\n      border: 2px solid white;\\n      box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\\n      display: flex;\\n      justify-content: center;\\n      align-items: center;\\n      cursor: pointer;\\n      z-index: 1001;\\n      transform: translate(-50%, -50%);\\n      transition: transform 0.2s ease, box-shadow 0.2s ease;\\n    }\\n    \\n    .profile-bubble:hover {\\n      transform: translate(-50%, -50%) scale(1.1);\\n      box-shadow: 0 0 15px rgba(0, 0, 0, 0.7);\\n    }\\n    \\n    /* Light-Box Modal */\\n    .td-modal {\\n      display: none;\\n      position: fixed;\\n      top: 0;\\n      left: 0;\\n      width: 100%;\\n      height: 100%;\\n      background-color: rgba(0, 0, 0, 0.7);\\n      z-index: 2000;\\n      justify-content: center;\\n      align-items: center;\\n      opacity: 0;\\n      transition: opacity 0.3s ease;\\n    }\\n    \\n    .td-modal.active {\\n      display: flex;\\n      opacity: 1;\\n    }\\n    \\n    .td-modal-content {\\n      background-color: white;\\n      padding: 20px;\\n      border-radius: 10px;\\n      width: 95%;\\n      max-width: 800px;\\n      max-height: 80vh;\\n      overflow-y: auto;\\n      position: relative;\\n      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);\\n    }\\n    \\n    .td-modal-header {\\n      display: flex;\\n      justify-content: space-between;\\n      align-items: center;\\n      margin-bottom: 20px;\\n      padding-bottom: 10px;\\n      border-bottom: 1px solid #eee;\\n    }\\n    \\n    .td-modal-header h4 {\\n      margin: 0;\\n      font-size: 1.5rem;\\n      color: #333;\\n    }\\n    \\n    .td-close-btn, .td-pause-play-btn {\\n      background: none;\\n      border: none;\\n      font-size: 1.5rem;\\n      cursor: pointer;\\n      color: #999;\\n      transition: color 0.2s ease;\\n    }\\n    \\n    .td-close-btn {\\n      margin-left: 10px;\\n    }\\n    \\n    .td-pause-play-btn {\\n      margin-left: auto;\\n    }\\n    \\n    .td-close-btn:hover, .td-pause-play-btn:hover {\\n      color: #333;\\n    }\\n    \\n    /* Emoji Grid */\\n    .emoji-grid {\\n      display: grid;\\n      grid-template-columns: 1fr 1fr;\\n      grid-template-rows: 1fr 1fr;\\n      gap: 10px;\\n      width: 100%;\\n    }\\n    \\n    .emoji-quadrant {\\n      padding: 10px;\\n      border-radius: 8px;\\n    }\\n    \\n    .emoji-quadrant.top-left {\\n      background-color: rgba(0, 255, 255, 0.2);\\n    }\\n    \\n    .emoji-quadrant.top-right {\\n      background-color: rgba(255, 255, 0, 0.2);\\n    }\\n    \\n    .emoji-quadrant.bottom-left {\\n      background-color: rgba(0, 255, 0, 0.2);\\n    }\\n    \\n    .emoji-quadrant.bottom-right {\\n      background-color: rgba(255, 0, 255, 0.2);\\n    }\\n    \\n    .emoji-row {\\n      display: flex;\\n      justify-content: space-around;\\n      margin-bottom: 10px;\\n      background-color: transparent;\\n    }\\n    \\n    .emoji-cell {\\n      display: flex;\\n      justify-content: center;\\n      align-items: center;\\n      background-color: transparent;\\n    }\\n    \\n    .thought-emoji {\\n      font-size: 2rem;\\n      cursor: pointer;\\n      padding: 5px;\\n      border-radius: 5px;\\n      transition: transform 0.2s ease, background-color 0.2s ease;\\n    }\\n    \\n    .thought-emoji:hover {\\n      transform: scale(1.2);\\n      background-color: rgba(255, 255, 255, 0.5);\\n    }\\n    \\n    .thought-emoji.selected {\\n      background-color: rgba(255, 255, 255, 0.8);\\n      box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);\\n    }\\n    \\n    /* Tooltip */\\n    .tooltip {\\n      position: absolute;\\n      background-color: rgba(0, 0, 0, 0.7);\\n      color: white;\\n      padding: 5px 10px;\\n      border-radius: 5px;\\n      font-size: 0.8rem;\\n      pointer-events: none;\\n      z-index: 1002;\\n      transition: opacity 0.3s ease;\\n    }\\n    \\n    /* Comment Box */\\n    .comment-box {\\n      margin-top: 20px;\\n      width: 100%;\\n    }\\n    \\n    .comment-box textarea {\\n      width: 100%;\\n      padding: 10px;\\n      border: 1px solid #ddd;\\n      border-radius: 5px;\\n      resize: vertical;\\n      min-height: 80px;\\n      font-family: inherit;\\n    }\\n    \\n    /* Media Buttons */\\n    .media-buttons {\\n      display: flex;\\n      flex-wrap: wrap;\\n      gap: 10px;\\n      margin-top: 10px;\\n      margin-bottom: 10px;\\n    }\\n    \\n    .media-button {\\n      padding: 8px 12px;\\n      border: none;\\n      border-radius: 5px;\\n      cursor: pointer;\\n      font-weight: bold;\\n      transition: background-color 0.2s ease;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n    }\\n    \\n    .upload-button {\\n      background-color: #3498db;\\n      color: white;\\n    }\\n    \\n    .upload-button:hover {\\n      background-color: #2980b9;\\n    }\\n    \\n    .capture-button {\\n      background-color: #e74c3c;\\n      color: white;\\n    }\\n    \\n    .capture-button:hover {\\n      background-color: #c0392b;\\n    }\\n    \\n    .uploaded-file-name {\\n      margin-top: 5px;\\n      padding: 5px;\\n      background-color: #f1f1f1;\\n      border-radius: 3px;\\n      font-size: 0.9rem;\\n      width: 100%;\\n    }\\n    \\n    .recording-message {\\n      margin-top: 5px;\\n      padding: 5px;\\n      background-color: #f8d7da;\\n      color: #721c24;\\n      border-radius: 3px;\\n      font-size: 0.9rem;\\n      width: 100%;\\n    }\\n    \\n    .recording-indicator {\\n      animation: pulse 1.5s infinite;\\n    }\\n    \\n    @keyframes pulse {\\n      0% { opacity: 1; }\\n      50% { opacity: 0.5; }\\n      100% { opacity: 1; }\\n    }\\n    \\n    /* Action Buttons */\\n    .action-buttons {\\n      display: flex;\\n      justify-content: flex-end;\\n      margin-top: 20px;\\n      gap: 10px;\\n    }\\n    \\n    .action-button {\\n      padding: 8px 16px;\\n      border: none;\\n      border-radius: 5px;\\n      cursor: pointer;\\n      font-weight: bold;\\n      transition: background-color 0.2s ease;\\n    }\\n    \\n    .save-button {\\n      background-color: #4CAF50;\\n      color: white;\\n    }\\n    \\n    .save-button:hover {\\n      background-color: #45a049;\\n    }\\n    \\n    .cancel-button {\\n      background-color: #f44336;\\n      color: white;\\n    }\\n    \\n    .cancel-button:hover {\\n      background-color: #d32f2f;\\n    }\\n  \",\n                        document.head.appendChild(t)\n                    }\n                }(),\n                this.createOverlayElements(),\n                this.createLightBoxElements(),\n                this.bindEventHandlers(),\n                this.log(\"QuadTap initialized successfully\")) : this.log(\"Container not found\", this.config.containerId)\n            }\n        }, {\n            key: \"createOverlayElements\",\n            value: function() {\n                var t = this\n                  , e = o(\"div\", {\n                    className: \"quad-tap-overlay\",\n                    styles: {\n                        display: \"none\",\n                        backgroundColor: this.config.colors.overlay.background\n                    }\n                })\n                  , n = o(\"div\", {\n                    className: \"overlay-close-btn\",\n                    html: \"&times;\",\n                    styles: {\n                        position: \"absolute\",\n                        top: \"10px\",\n                        right: \"10px\",\n                        width: \"30px\",\n                        height: \"30px\",\n                        borderRadius: \"50%\",\n                        backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n                        color: \"white\",\n                        display: \"flex\",\n                        justifyContent: \"center\",\n                        alignItems: \"center\",\n                        fontSize: \"20px\",\n                        cursor: \"pointer\",\n                        zIndex: \"1002\"\n                    },\n                    events: {\n                        click: function(e) {\n                            t.deactivateOverlay(),\n                            e.stopPropagation()\n                        }\n                    }\n                })\n                  , i = o(\"div\", {\n                    className: \"quadrant top-left\",\n                    styles: {\n                        background: \"radial-gradient(circle at 0% 0%, \".concat(this.config.colors.overlay.quadrantGradients.topLeft, \", transparent 70%)\")\n                    }\n                })\n                  , a = o(\"div\", {\n                    className: \"quadrant top-right\",\n                    styles: {\n                        background: \"radial-gradient(circle at 100% 0%, \".concat(this.config.colors.overlay.quadrantGradients.topRight, \", transparent 70%)\")\n                    }\n                })\n                  , r = o(\"div\", {\n                    className: \"quadrant bottom-left\",\n                    styles: {\n                        background: \"radial-gradient(circle at 0% 100%, \".concat(this.config.colors.overlay.quadrantGradients.bottomLeft, \", transparent 70%)\")\n                    }\n                })\n                  , s = o(\"div\", {\n                    className: \"quadrant bottom-right\",\n                    styles: {\n                        background: \"radial-gradient(circle at 100% 100%, \".concat(this.config.colors.overlay.quadrantGradients.bottomRight, \", transparent 70%)\")\n                    }\n                })\n                  , l = {\n                    display: \"none\",\n                    width: this.config.profileBubble.size,\n                    height: this.config.profileBubble.size,\n                    borderColor: this.config.profileBubble.borderColor,\n                    borderWidth: this.config.profileBubble.borderWidth,\n                    backgroundColor: this.config.profileBubble.backgroundColor,\n                    borderStyle: \"solid\",\n                    borderRadius: \"50%\",\n                    justifyContent: \"center\",\n                    alignItems: \"center\",\n                    fontSize: \"24px\",\n                    boxShadow: \"0 0 10px rgba(0, 0, 0, 0.5)\",\n                    cursor: \"pointer\",\n                    zIndex: \"1000\"\n                };\n                this.config.profileBubble.imageUrl && (l.backgroundImage = \"url(\".concat(this.config.profileBubble.imageUrl, \")\"),\n                l.backgroundSize = \"cover\",\n                l.backgroundPosition = \"center\",\n                l.fontSize = \"0\");\n                var d = o(\"div\", {\n                    className: \"profile-bubble\",\n                    text: this.config.profileBubble.imageUrl ? \"\" : this.config.profileBubble.fallbackEmoji,\n                    styles: l\n                })\n                  , c = o(\"div\", {\n                    className: \"directional-emoji up\",\n                    text: this.config.emojis.directional.up,\n                    styles: {\n                        display: \"none\"\n                    }\n                })\n                  , u = o(\"div\", {\n                    className: \"directional-emoji right\",\n                    text: this.config.emojis.directional.right,\n                    styles: {\n                        display: \"none\"\n                    }\n                })\n                  , h = o(\"div\", {\n                    className: \"directional-emoji down\",\n                    text: this.config.emojis.directional.down,\n                    styles: {\n                        display: \"none\"\n                    }\n                })\n                  , p = o(\"div\", {\n                    className: \"directional-emoji left\",\n                    text: this.config.emojis.directional.left,\n                    styles: {\n                        display: \"none\"\n                    }\n                })\n                  , g = o(\"div\", {\n                    className: \"quadrant-emoji top-left\",\n                    text: this.config.emojis.quadrants.topLeft,\n                    styles: {\n                        display: \"none\"\n                    }\n                })\n                  , m = o(\"div\", {\n                    className: \"quadrant-emoji top-right\",\n                    text: this.config.emojis.quadrants.topRight,\n                    styles: {\n                        display: \"none\"\n                    }\n                })\n                  , f = o(\"div\", {\n                    className: \"quadrant-emoji bottom-left\",\n                    text: this.config.emojis.quadrants.bottomLeft,\n                    styles: {\n                        display: \"none\"\n                    }\n                })\n                  , b = o(\"div\", {\n                    className: \"quadrant-emoji bottom-right\",\n                    text: this.config.emojis.quadrants.bottomRight,\n                    styles: {\n                        display: \"none\"\n                    }\n                })\n                  , v = this.createVideoControls()\n                  , y = o(\"div\", {\n                    className: \"tooltip\",\n                    text: \"Tap elsewhere to cancel\",\n                    styles: {\n                        display: \"none\"\n                    }\n                });\n                e.appendChild(n),\n                e.appendChild(i),\n                e.appendChild(a),\n                e.appendChild(r),\n                e.appendChild(s),\n                e.appendChild(c),\n                e.appendChild(u),\n                e.appendChild(h),\n                e.appendChild(p),\n                e.appendChild(g),\n                e.appendChild(m),\n                e.appendChild(f),\n                e.appendChild(b),\n                e.appendChild(d),\n                e.appendChild(v),\n                e.appendChild(y),\n                this.elements.container.appendChild(e),\n                this.elements.overlay = e,\n                this.elements.profileBubble = d,\n                this.elements.directionalEmojis = {\n                    up: c,\n                    right: u,\n                    down: h,\n                    left: p\n                },\n                this.elements.quadrantEmojis = {\n                    topLeft: g,\n                    topRight: m,\n                    bottomLeft: f,\n                    bottomRight: b\n                },\n                this.elements.videoControls = v,\n                this.elements.tooltip = y\n            }\n        }, {\n            key: \"createVideoControls\",\n            value: function() {\n                var t = this\n                  , e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];\n                if (!this.config.videoControls.enabled)\n                    return o(\"div\", {\n                        styles: {\n                            display: \"none\"\n                        }\n                    });\n                var n = document.querySelector(this.config.videoSelector)\n                  , i = x({\n                    overlay: e ? this.elements.lightBoxContent || document.createElement(\"div\") : this.elements.overlay || document.createElement(\"div\"),\n                    onPlay: function() {\n                        n && n.play()\n                    },\n                    onPause: function() {\n                        n && n.pause()\n                    },\n                    onRewind: function() {\n                        n && (n.currentTime = Math.max(0, n.currentTime - t.config.videoControls.rewindTime))\n                    },\n                    onForward: function() {\n                        n && (n.currentTime = Math.min(n.duration, n.currentTime + t.config.videoControls.forwardTime))\n                    },\n                    rewindTime: this.config.videoControls.rewindTime,\n                    forwardTime: this.config.videoControls.forwardTime,\n                    debug: this.config.debug,\n                    showAllButtons: !0,\n                    isLightbox: e\n                });\n                return e || (i.style.display = \"none\"),\n                this.elements.videoControlsObj = {\n                    element: i,\n                    setMode: function(e, o) {\n                        !function(t, e, o) {\n                            if (t.classList.remove(\"qt-control-strip--overlay\"),\n                            t.classList.remove(\"qt-control-strip--lightbox\"),\n                            \"overlay\" === e) {\n                                t.classList.add(\"qt-control-strip--overlay\"),\n                                t.style.position = \"absolute\",\n                                t.style.bottom = \"20px\",\n                                t.style.left = \"50%\",\n                                t.style.transform = \"translateX(-50%)\",\n                                t.style.zIndex = \"1000\";\n                                var n = o.offsetWidth;\n                                t.style.width = \"\".concat(Math.min(.8 * n, 400), \"px\"),\n                                t.style.boxShadow = \"0 2px 10px rgba(0, 0, 0, 0.3)\"\n                            } else\n                                \"lightbox\" === e && (t.classList.add(\"qt-control-strip--lightbox\"),\n                                t.style.position = \"static\",\n                                t.style.bottom = \"\",\n                                t.style.left = \"\",\n                                t.style.transform = \"\",\n                                t.style.zIndex = \"\",\n                                t.style.width = \"100%\",\n                                t.style.boxShadow = \"none\")\n                        }(i, \"lightbox\" === e, o || t.elements.container)\n                    },\n                    updateTimeDisplay: function() {},\n                    updatePlayPauseButton: function(t) {\n                        j(i, t)\n                    }\n                },\n                i\n            }\n        }, {\n            key: \"createLightboxControlStrip\",\n            value: function() {\n                var t = this;\n                if (!this.config.videoControls.enabled)\n                    return o(\"div\", {\n                        styles: {\n                            display: \"none\"\n                        }\n                    });\n                var e = o(\"div\", {\n                    className: \"td-lightbox-controls\",\n                    styles: {\n                        width: \"100%\",\n                        padding: \"10px 0\",\n                        marginTop: \"10px\",\n                        marginBottom: \"10px\",\n                        borderTop: \"1px solid rgba(255, 255, 255, 0.1)\",\n                        borderBottom: \"1px solid rgba(255, 255, 255, 0.1)\",\n                        display: \"flex\",\n                        flexDirection: \"column\"\n                    }\n                })\n                  , n = document.querySelector(this.config.videoSelector)\n                  , i = x({\n                    overlay: this.elements.lightBoxContent || document.createElement(\"div\"),\n                    onPlay: function() {\n                        n && n.play()\n                    },\n                    onPause: function() {\n                        n && n.pause()\n                    },\n                    onRewind: function() {\n                        n && (n.currentTime = Math.max(0, n.currentTime - t.config.videoControls.rewindTime))\n                    },\n                    onForward: function() {\n                        n && (n.currentTime = Math.min(n.duration, n.currentTime + t.config.videoControls.forwardTime))\n                    },\n                    rewindTime: this.config.videoControls.rewindTime,\n                    forwardTime: this.config.videoControls.forwardTime,\n                    debug: this.config.debug,\n                    showAllButtons: !0,\n                    isLightbox: !0\n                });\n                return this.elements.lightboxControlStripObj = {\n                    element: i,\n                    updateTimeDisplay: function() {},\n                    updatePlayPauseButton: function(t) {\n                        j(i, t)\n                    }\n                },\n                this.elements.lightboxControlStrip = i,\n                e.appendChild(i),\n                e\n            }\n        }, {\n            key: \"createLightBoxElements\",\n            value: function() {\n                var t = this\n                  , e = o(\"div\", {\n                    id: \"throwdown-modal\",\n                    className: \"td-modal\"\n                })\n                  , n = o(\"div\", {\n                    className: \"td-modal-content\",\n                    styles: {\n                        backgroundColor: this.config.colors.lightbox.background,\n                        color: this.config.colors.lightbox.text\n                    }\n                })\n                  , i = o(\"div\", {\n                    className: \"td-modal-header\",\n                    styles: {\n                        backgroundColor: this.config.colors.lightbox.headerBackground\n                    }\n                })\n                  , a = o(\"h4\", {\n                    text: \"Share Your Thoughts\"\n                })\n                  , s = o(\"button\", {\n                    className: \"td-close-btn\",\n                    html: \"&times;\",\n                    events: {\n                        click: function(e) {\n                            t.closeLightBox(),\n                            e.stopPropagation()\n                        }\n                    }\n                })\n                  , l = o(\"div\", {\n                    className: \"td-video-info\",\n                    styles: {\n                        fontSize: \"14px\",\n                        color: \"#888\",\n                        marginRight: \"10px\"\n                    }\n                });\n                i.appendChild(a),\n                i.appendChild(l),\n                i.appendChild(s);\n                var d = this.createEmojiGrid()\n                  , c = o(\"div\", {\n                    className: \"comment-box\"\n                })\n                  , u = o(\"textarea\", {\n                    placeholder: \"Add a comment (optional)\",\n                    attributes: {\n                        rows: 3,\n                        maxlength: 500\n                    },\n                    events: {\n                        input: function(e) {\n                            var o = e.target.value\n                              , n = t.extractUrlFromText(o);\n                            n && r(\"extractedUrl\", n),\n                            r(\"comment\", o),\n                            t.saveEventToHistory({\n                                type: \"comment_update\",\n                                comment: o,\n                                extractedUrl: n\n                            })\n                        }\n                    }\n                });\n                c.appendChild(u);\n                var h = o(\"div\", {\n                    className: \"media-buttons\"\n                })\n                  , p = o(\"button\", {\n                    className: \"media-button upload-button\",\n                    text: \"📤 Upload Video\",\n                    events: {\n                        click: function(e) {\n                            var n = o(\"input\", {\n                                attributes: {\n                                    type: \"file\",\n                                    accept: \"video/*\"\n                                },\n                                events: {\n                                    change: function(e) {\n                                        var o = e.target.files[0];\n                                        if (o) {\n                                            t.log(\"Video file selected\", o.name),\n                                            r(\"uploadedVideo\", o.name);\n                                            var n = document.createElement(\"div\");\n                                            n.className = \"uploaded-file-name\",\n                                            n.textContent = \"Selected: \".concat(o.name),\n                                            h.appendChild(n),\n                                            t.saveEventToHistory({\n                                                type: \"video_upload\",\n                                                fileName: o.name,\n                                                fileSize: o.size,\n                                                fileType: o.type\n                                            })\n                                        }\n                                    }\n                                }\n                            });\n                            document.body.appendChild(n),\n                            n.click(),\n                            document.body.removeChild(n),\n                            e.stopPropagation()\n                        }\n                    }\n                })\n                  , g = o(\"button\", {\n                    className: \"media-button capture-button\",\n                    text: \"📹 Record Video\",\n                    events: {\n                        click: function(e) {\n                            if (t.state.recording) {\n                                t.stopRecording(),\n                                g.textContent = \"📹 Record Video\";\n                                var o = document.createElement(\"div\");\n                                o.className = \"recording-message\",\n                                o.textContent = \"Recording saved\",\n                                h.appendChild(o),\n                                setTimeout((function() {\n                                    o.parentNode && o.parentNode.removeChild(o)\n                                }\n                                ), 3e3)\n                            } else\n                                t.startRecording(),\n                                g.textContent = \"⏹️ Stop Recording\";\n                            e.stopPropagation()\n                        }\n                    }\n                });\n\n                // Create position display element\n                var positionDisplay = o(\"div\", {\n                    className: \"position-display\",\n                    styles: {\n                        display: \"inline-block\",\n                        marginLeft: \"15px\",\n                        padding: \"5px 10px\",\n                        backgroundColor: \"rgba(0,0,0,0.1)\",\n                        borderRadius: \"5px\",\n                        fontSize: \"0.9em\",\n                        fontFamily: \"monospace\"\n                    }\n                });\n\n                // Format and set the position text directly\n                var xPos = t.state.profileBubblePosition.x;\n                var yPos = t.state.profileBubblePosition.y;\n\n                // If values are not available in state, try to get from localStorage\n                if (typeof xPos !== 'number' || typeof yPos !== 'number') {\n                    var storedPos = s('positionX');\n                    var storedPosY = s('positionY');\n                    if (storedPos !== null) xPos = parseFloat(storedPos);\n                    if (storedPosY !== null) yPos = parseFloat(storedPosY);\n                }\n\n                // Default to 50% if still no valid values\n                if (typeof xPos !== 'number') xPos = 0.5;\n                if (typeof yPos !== 'number') yPos = 0.5;\n\n                // Calculate percentages, inverting y-value so \"up\" is positive\n                var xPercent = Math.round(xPos * 100 * 100) / 100;\n                var yPercentUp = Math.round((1 - yPos) * 100 * 100) / 100; // Invert y so up is positive\n                positionDisplay.textContent = \"Position: \" + yPercentUp + \"% up, \" + xPercent + \"% right\";\n\n                // Add all elements to the media buttons container\n                h.appendChild(p),\n                h.appendChild(g),\n                h.appendChild(positionDisplay),\n                c.appendChild(h);\n                var m = o(\"div\", {\n                    className: \"action-buttons\"\n                })\n                  , f = o(\"button\", {\n                    className: \"action-button cancel-button\",\n                    text: \"Cancel\",\n                    styles: {\n                        backgroundColor: this.config.colors.lightbox.buttonSecondary,\n                        color: \"white\"\n                    },\n                    events: {\n                        click: function(e) {\n                            t.closeLightBox(),\n                            e.stopPropagation()\n                        }\n                    }\n                })\n                  , b = o(\"button\", {\n                    className: \"action-button save-button\",\n                    text: \"Save\",\n                    styles: {\n                        backgroundColor: this.config.colors.lightbox.buttonPrimary,\n                        color: \"white\"\n                    },\n                    events: {\n                        click: function(e) {\n                            t.saveThrowDown(),\n                            e.stopPropagation()\n                        }\n                    }\n                });\n                m.appendChild(f),\n                m.appendChild(b),\n                n.appendChild(i),\n                n.appendChild(d);\n                var v = o(\"div\", {\n                    styles: {\n                        width: \"100%\",\n                        height: \"20px\",\n                        clear: \"both\"\n                    }\n                });\n                n.appendChild(v);\n                var y = this.createLightboxControlStrip();\n                n.appendChild(y),\n                n.appendChild(c),\n                n.appendChild(m),\n                e.appendChild(n),\n                document.body.appendChild(e),\n                this.elements.lightBox = e,\n                this.elements.lightBoxContent = n,\n                this.elements.videoInfoDisplay = l,\n                this.elements.emojiGrid = d,\n                this.elements.commentBox = c,\n                this.elements.positionDisplay = positionDisplay;\n            }\n        }, {\n            key: \"createEmojiGrid\",\n            value: function() {\n                var t = o(\"div\", {\n                    className: \"emoji-grid\",\n                    styles: {\n                        display: \"grid\",\n                        gridTemplateColumns: \"1fr 1fr\",\n                        gridTemplateRows: \"1fr 1fr\",\n                        gap: \"10px\",\n                        width: \"100%\"\n                    }\n                })\n                  , e = o(\"div\", {\n                    className: \"emoji-quadrant top-left\",\n                    styles: {\n                        gridRow: \"1\",\n                        gridColumn: \"1\"\n                    }\n                })\n                  , n = o(\"div\", {\n                    className: \"emoji-quadrant top-right\",\n                    styles: {\n                        gridRow: \"1\",\n                        gridColumn: \"2\"\n                    }\n                })\n                  , i = o(\"div\", {\n                    className: \"emoji-quadrant bottom-left\",\n                    styles: {\n                        gridRow: \"2\",\n                        gridColumn: \"1\"\n                    }\n                })\n                  , a = o(\"div\", {\n                    className: \"emoji-quadrant bottom-right\",\n                    styles: {\n                        gridRow: \"2\",\n                        gridColumn: \"2\"\n                    }\n                });\n                return this.createEmojiTable(e, this.config.emojis.thoughts.topLeft, \"top-left\"),\n                this.createEmojiTable(n, this.config.emojis.thoughts.topRight, \"top-right\"),\n                this.createEmojiTable(i, this.config.emojis.thoughts.bottomLeft, \"bottom-left\"),\n                this.createEmojiTable(a, this.config.emojis.thoughts.bottomRight, \"bottom-right\"),\n                t.appendChild(e),\n                t.appendChild(n),\n                t.appendChild(i),\n                t.appendChild(a),\n                t\n            }\n        }, {\n            key: \"createEmojiTable\",\n            value: function(t, e, n) {\n                var i = this\n                  , a = o(\"div\", {\n                    className: \"emoji-row\"\n                })\n                  , r = o(\"div\", {\n                    className: \"emoji-cell\"\n                });\n                if (e[0]) {\n                    var s = o(\"div\", {\n                        className: \"thought-emoji\",\n                        text: e[0],\n                        attributes: {\n                            \"data-emoji\": e[0],\n                            \"data-quadrant\": n,\n                            \"data-index\": 0\n                        },\n                        events: {\n                            click: function(t) {\n                                i.selectEmoji(s, e[0], n, 0)\n                            }\n                        }\n                    });\n                    r.appendChild(s)\n                }\n                var l = o(\"div\", {\n                    className: \"emoji-cell\"\n                });\n                if (e[1]) {\n                    var d = o(\"div\", {\n                        className: \"thought-emoji\",\n                        text: e[1],\n                        attributes: {\n                            \"data-emoji\": e[1],\n                            \"data-quadrant\": n,\n                            \"data-index\": 1\n                        },\n                        events: {\n                            click: function(t) {\n                                i.selectEmoji(d, e[1], n, 1)\n                            }\n                        }\n                    });\n                    l.appendChild(d)\n                }\n                a.appendChild(r),\n                a.appendChild(l);\n                var c = o(\"div\", {\n                    className: \"emoji-row\"\n                })\n                  , u = o(\"div\", {\n                    className: \"emoji-cell\"\n                });\n                if (e[2]) {\n                    var h = o(\"div\", {\n                        className: \"thought-emoji\",\n                        text: e[2],\n                        attributes: {\n                            \"data-emoji\": e[2],\n                            \"data-quadrant\": n,\n                            \"data-index\": 2\n                        },\n                        events: {\n                            click: function(t) {\n                                i.selectEmoji(h, e[2], n, 2)\n                            }\n                        }\n                    });\n                    u.appendChild(h)\n                }\n                var p = o(\"div\", {\n                    className: \"emoji-cell\"\n                });\n                if (e[3]) {\n                    var g = o(\"div\", {\n                        className: \"thought-emoji\",\n                        text: e[3],\n                        attributes: {\n                            \"data-emoji\": e[3],\n                            \"data-quadrant\": n,\n                            \"data-index\": 3\n                        },\n                        events: {\n                            click: function(t) {\n                                i.selectEmoji(g, e[3], n, 3)\n                            }\n                        }\n                    });\n                    p.appendChild(g)\n                }\n                c.appendChild(u),\n                c.appendChild(p),\n                t.appendChild(a),\n                t.appendChild(c)\n            }\n        }, {\n            key: \"extractUrlFromText\",\n            value: function(t) {\n                if (!t)\n                    return null;\n                var e = t.match(/(https?:\\/\\/[^\\s]+)/g);\n                return e && e.length > 0 ? e[0] : null\n            }\n        }, {\n            key: \"saveEventToHistory\",\n            value: function(t) {\n                t.timestamp = (new Date).toISOString(),\n                t.context = {\n                    profileBubblePosition: this.state.profileBubblePosition,\n                    currentQuadrant: this.state.currentQuadrant,\n                    containerDimensions: this.state.containerDimensions\n                };\n                var e = [];\n                try {\n                    var o = localStorage.getItem(\"quadTapEvents\");\n                    o && (e = JSON.parse(o))\n                } catch (t) {\n                    this.log(\"Error parsing stored events\", t)\n                }\n                e.push(t),\n                localStorage.setItem(\"quadTapEvents\", JSON.stringify(e)),\n                localStorage.setItem(\"quadTapCurrentEvent\", JSON.stringify(t)),\n                this.log(\"Event saved to history\", t)\n            }\n        }, {\n            key: \"selectEmoji\",\n            value: function(t, e, o, n) {\n                this.log(\"Emoji selected\", {\n                    emoji: e,\n                    quadrant: o,\n                    index: n\n                }),\n                this.elements.emojiGrid.querySelectorAll(\".thought-emoji\").forEach((function(t) {\n                    return t.classList.remove(\"selected\")\n                }\n                )),\n                t.classList.add(\"selected\"),\n                r(\"selectedEmoji\", e),\n                r(\"selectedQuadrant\", o),\n                r(\"selectedIndex\", n),\n                this.saveEventToHistory({\n                    type: \"emoji_selected\",\n                    emoji: e,\n                    quadrant: o,\n                    index: n\n                });\n                \n                // Add the selected emoji to the comment text box\n                var commentTextarea = this.elements.commentBox && this.elements.commentBox.querySelector(\"textarea\");\n                if (commentTextarea) {\n                    var currentText = commentTextarea.value || \"\";\n                    \n                    // Always add the emoji at the beginning, preserving any existing text\n                    commentTextarea.value = e + \" \" + currentText;\n                    \n                    // Trigger change event to ensure state is updated\n                    var event = new Event('input', { bubbles: true });\n                    commentTextarea.dispatchEvent(event);\n                }\n                \n                var i = document.querySelector(this.config.videoSelector);\n                if (i && (r(\"videoTime\", i.currentTime),\n                r(\"videoId\", i.getAttribute(\"data-video-id\") || \"unknown\")),\n                r(\"positionX\", this.state.profileBubblePosition.x),\n                r(\"positionY\", this.state.profileBubblePosition.y),\n                this.config.callbacks.onThrowDownConfirm) {\n                    var a = i ? {\n                        currentTime: i.currentTime,\n                        videoId: i.getAttribute(\"data-video-id\") || \"unknown\",\n                        duration: i.duration\n                    } : null;\n                    this.config.callbacks.onThrowDownConfirm(o, this.state.profileBubblePosition.x, this.state.profileBubblePosition.y, a)\n                }\n            }\n        }, {\n            key: \"saveThrowDown\",\n            value: function() {\n                this.log(\"Saving throw-down\");\n                var t = this.elements.commentBox.querySelector(\"textarea\")\n                  , e = t ? t.value : \"\"\n                  , o = this.extractUrlFromText(e);\n                r(\"comment\", e),\n                o && r(\"extractedUrl\", o),\n                r(\"timestamp\", Date.now());\n                var n = document.querySelector(this.config.videoSelector)\n                  , i = {};\n                n && (Array.from(n.attributes).filter((function(t) {\n                    return t.name.startsWith(\"data-\")\n                }\n                )).forEach((function(t) {\n                    var e = t.name.replace(\"data-\", \"\");\n                    i[e] = t.value\n                }\n                )),\n                i.duration = n.duration || 0,\n                i.currentTime = n.currentTime || 0,\n                i.paused = n.paused,\n                i.muted = n.muted,\n                i.volume = n.volume,\n                i.playbackRate = n.playbackRate,\n                i.videoWidth = n.videoWidth,\n                i.videoHeight = n.videoHeight,\n                i.src = n.currentSrc || n.src);\n                var a = {\n                    selectedEmoji: s(\"selectedEmoji\", \"\"),\n                    selectedQuadrant: s(\"selectedQuadrant\", \"\"),\n                    selectedIndex: s(\"selectedIndex\", -1),\n                    comment: e,\n                    extractedUrl: o || s(\"extractedUrl\", \"\"),\n                    positionX: this.state.profileBubblePosition.x,\n                    positionY: this.state.profileBubblePosition.y,\n                    quadrant: this.state.currentQuadrant,\n                    videoId: s(\"videoId\", n && n.getAttribute(\"data-video-id\") || \"unknown\"),\n                    videoTime: s(\"videoTime\", n ? n.currentTime : 0),\n                    videoMetadata: i,\n                    containerId: this.config.containerId,\n                    containerWidth: this.state.containerDimensions.width,\n                    containerHeight: this.state.containerDimensions.height,\n                    timestamp: Date.now(),\n                    timezoneOffset: (new Date).getTimezoneOffset(),\n                    locale: navigator.language || \"en-US\",\n                    userAgent: navigator.userAgent,\n                    platform: navigator.platform,\n                    url: window.location.href,\n                    referrer: document.referrer,\n                    title: document.title\n                };\n                !function(t) {\n                    try {\n                        for (var e in t)\n                            r(e, t[e]);\n                        return r(\"timestamp\", Date.now()),\n                        !0\n                    } catch (t) {\n                        return console.error(\"[QuadTap] Error saving throw-down context:\", t),\n                        !1\n                    }\n                }(a),\n                this.closeLightBox(),\n                this.log(\"Throw-down saved\", a)\n            }\n        }, {\n            key: \"bindEventHandlers\",\n            value: function() {\n                var t = this;\n                this.elements.video = document.querySelector(this.config.videoSelector);\n                \n                // Detect mobile devices simply\n                var isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent) || window.innerWidth < 768;\n                \n                // If on mobile, prevent native fullscreen\n                if (isMobile && this.elements.video) {\n                    // Prevent native fullscreen on iOS/Safari\n                    this.elements.video.addEventListener('webkitbeginfullscreen', function(e) {\n                        if (e.preventDefault) e.preventDefault();\n                        return false;\n                    });\n                    \n                    // Disable native fullscreen attributes\n                    this.elements.video.setAttribute('playsinline', '');\n                    this.elements.video.setAttribute('webkit-playsinline', '');\n                    \n                    // ADDED: Disable native video controls\n                    this.elements.video.removeAttribute('controls');\n                    // For some players that might override this, try to force it\n                    this.elements.video.controls = false;\n                    \n                    // Find and disable any fullscreen buttons in the video player\n                    setTimeout(function() {\n                        try {\n                            // Find common fullscreen button selectors\n                            var fullscreenButtons = document.querySelectorAll(\n                                '.vjs-fullscreen-control, .fullscreen-button, [data-fullscreen], .ytp-fullscreen-button'\n                            );\n                            fullscreenButtons.forEach(function(btn) {\n                                // Either hide or disable the button\n                                if (btn.style) {\n                                    btn.style.display = 'none';\n                                }\n                                // Add click interceptor\n                                btn.addEventListener('click', function(e) {\n                                    if (e.preventDefault) e.preventDefault();\n                                    e.stopPropagation();\n                                    return false;\n                                });\n                            });\n                        } catch (err) {\n                            t.log(\"Error disabling fullscreen buttons\", err);\n                        }\n                    }, 500); // Delay to ensure video player is fully initialized\n                }\n                \n                var e = function(e) {\n                    if (e.preventDefault(),\n                    e.stopPropagation(),\n                    !e.target.closest(\".video-control-button\"))\n                        if (t.state.active)\n                            e.target === t.elements.profileBubble || t.elements.profileBubble.contains(e.target) ? t.openLightBox() : t.deactivateOverlay();\n                        else {\n                            var o, n, i = t.elements.container.getBoundingClientRect();\n                            if (\"touchstart\" === e.type || \"touchend\" === e.type) {\n                                var a = e.changedTouches[0];\n                                o = a.clientX - i.left,\n                                n = a.clientY - i.top\n                            } else\n                                o = e.clientX - i.left,\n                                n = e.clientY - i.top;\n                            t.activateOverlay(o, n)\n                        }\n                };\n                \n                this.elements.container.addEventListener(\"click\", e),\n                this.elements.container.addEventListener(\"touchend\", e);\n                var o = function(e) {\n                    t.state.active && (t.openLightBox(),\n                    e.stopPropagation())\n                };\n                this.elements.profileBubble.addEventListener(\"click\", o),\n                this.elements.profileBubble.addEventListener(\"touchend\", function(e) {\n                    // Prevent default touch behavior to avoid any issues with touch events\n                    e.preventDefault();\n                    // Call the original handler\n                    o(e);\n                });\n                var n = function(e) {\n                    e.target === t.elements.lightBox && t.closeLightBox()\n                };\n                this.elements.lightBox.addEventListener(\"click\", n),\n                this.elements.lightBox.addEventListener(\"touchend\", n),\n                document.addEventListener(\"keydown\", (function(e) {\n                    \"Escape\" === e.key && (t.elements.lightBox.classList.contains(\"active\") ? t.closeLightBox() : t.state.active && t.deactivateOverlay())\n                }\n                )),\n                this.elements.video && (this.elements.video.addEventListener(\"play\", (function() {\n                    t.state.videoPlaying = !0\n                }\n                )),\n                this.elements.video.addEventListener(\"pause\", (function() {\n                    t.state.videoPlaying = !1\n                }\n                ))),\n                window.addEventListener(\"resize\", this.throttledResize),\n                this.updateContainerDimensions()\n\n                // Add swipe detection\n                this.addSwipeHandlers();\n            }\n        }, {\n            key: \"addSwipeHandlers\",\n            value: function() {\n                var t = this;\n                \n                // Initialize swipe state\n                this.state.swipe = {\n                    startX: 0,\n                    startY: 0,\n                    endX: 0,\n                    endY: 0,\n                    startTime: 0,\n                    onVideo: false,\n                    overlayActive: false,\n                    threshold: 50, // Min distance to be considered a swipe\n                    maxTime: 500 // Max time in ms for a gesture to be considered a swipe\n                };\n                \n                // Common handler for both desktop and mobile\n                var handleSwipeStart = function(e) {\n                    var clientX, clientY, targetElement;\n                    \n                    if (e.type.includes('touch')) {\n                        clientX = e.touches[0].clientX;\n                        clientY = e.touches[0].clientY;\n                        targetElement = document.elementFromPoint(clientX, clientY);\n                    } else {\n                        clientX = e.clientX;\n                        clientY = e.clientY;\n                        targetElement = e.target;\n                    }\n                    \n                    t.state.swipe.startX = clientX;\n                    t.state.swipe.startY = clientY;\n                    t.state.swipe.startTime = Date.now();\n                    t.state.swipe.onVideo = targetElement === t.elements.video;\n                    t.state.swipe.overlayActive = t.state.active;\n                    \n                    t.log(\"Swipe start\", {\n                        x: clientX,\n                        y: clientY,\n                        onVideo: t.state.swipe.onVideo,\n                        overlayActive: t.state.swipe.overlayActive\n                    });\n                };\n                \n                var handleSwipeEnd = function(e) {\n                    var clientX, clientY;\n                    \n                    // Skip processing if already handling a swipe\n                    if (t.state.swipeProcessing) {\n                        t.log(\"Ignoring swipe end during active processing\");\n                        return;\n                    }\n                    \n                    // If no start position recorded, this isn't a valid swipe\n                    if (t.state.swipe.startX === 0 && t.state.swipe.startY === 0) {\n                        return;\n                    }\n                    \n                    if (e.type.includes('touch')) {\n                        clientX = e.changedTouches[0].clientX;\n                        clientY = e.changedTouches[0].clientY;\n                    } else {\n                        clientX = e.clientX;\n                        clientY = e.clientY;\n                    }\n                    \n                    t.state.swipe.endX = clientX;\n                    t.state.swipe.endY = clientY;\n                    \n                    var deltaX = t.state.swipe.endX - t.state.swipe.startX;\n                    var deltaY = t.state.swipe.endY - t.state.swipe.startY;\n                    var elapsedTime = Date.now() - t.state.swipe.startTime;\n                    \n                    // Reset start position to prevent duplicate processing\n                    t.state.swipe.startX = 0;\n                    t.state.swipe.startY = 0;\n                    \n                    if (elapsedTime <= t.state.swipe.maxTime) {\n                        var swipeDirection = \"\";\n                        var absX = Math.abs(deltaX);\n                        var absY = Math.abs(deltaY);\n                        \n                        // Determine swipe direction if threshold is met\n                        if (Math.max(absX, absY) >= t.state.swipe.threshold) {\n                            if (absX > absY) {\n                                swipeDirection = deltaX > 0 ? \"right\" : \"left\";\n                            } else {\n                                swipeDirection = deltaY > 0 ? \"down\" : \"up\";\n                            }\n                            \n                            t.log(\"Swipe detected\", {\n                                direction: swipeDirection,\n                                onVideo: t.state.swipe.onVideo,\n                                overlayActive: t.state.swipe.overlayActive,\n                                deltaX: deltaX,\n                                deltaY: deltaY,\n                                time: elapsedTime\n                            });\n                            \n                            // Handle the swipe by opening lightbox with swipe info\n                            t.handleSwipe(swipeDirection);\n                        }\n                    }\n                };\n                \n                var handleSwipeMove = function(e) {\n                    // Optional: track movement for more complex gestures\n                    // For now we just prevent default to avoid scrolling\n                    if (e.cancelable) e.preventDefault();\n                };\n                \n                // Add mouse events for desktop\n                this.elements.container.addEventListener('mousedown', handleSwipeStart);\n                document.addEventListener('mouseup', handleSwipeEnd);\n                document.addEventListener('mousemove', function(e) {\n                    // Only track movement if mouse is down (potential swipe in progress)\n                    if (e.buttons === 1) handleSwipeMove(e);\n                });\n                \n                // Add touch events for mobile\n                this.elements.container.addEventListener('touchstart', handleSwipeStart, {passive: false});\n                this.elements.container.addEventListener('touchend', handleSwipeEnd);\n                this.elements.container.addEventListener('touchmove', handleSwipeMove, {passive: false});\n            }\n        }, {\n            key: \"handleSwipe\",\n            value: function(direction) {\n                // More aggressive debounce to prevent multiple calls\n                if (this.state.swipeProcessing) {\n                    this.log(\"Ignoring swipe during active processing\", direction);\n                    return; // Exit if a swipe is already being processed\n                }\n                \n                // Set processing flag immediately\n                this.state.swipeProcessing = true;\n                \n                // Clear any existing debounce timer\n                if (this.state.swipeDebounceTimer) {\n                    clearTimeout(this.state.swipeDebounceTimer);\n                }\n                \n                // Create swipe info text to display in the lightbox\n                var swipeInfo = \"Swipe: \" + direction.toUpperCase() + \n                               \"\\nOverlay: \" + (this.state.swipe.overlayActive ? \"ACTIVE\" : \"INACTIVE\") +\n                               \"\\nOn Video: \" + (this.state.swipe.onVideo ? \"YES\" : \"NO\");\n                \n                // Store swipe info for the lightbox to access\n                this.state.swipeInfo = swipeInfo;\n                \n                // If lightbox is already open, update the content\n                if (this.elements.lightBox && this.elements.lightBox.classList.contains('active')) {\n                    this.updateLightboxSwipeInfo(swipeInfo);\n                } else {\n                    // Open the lightbox which will display swipe info\n                    this.openLightBoxWithSwipeInfo(swipeInfo);\n                }\n                \n                // Set debounce timer to reset processing flag\n                this.state.swipeDebounceTimer = setTimeout(() => {\n                    this.state.swipeProcessing = false;\n                    this.state.swipeDebounceTimer = null;\n                }, 500); // Longer debounce time: 500ms\n            }\n        }, {\n            key: \"updateLightboxSwipeInfo\",\n            value: function(swipeInfo) {\n                // Update existing lightbox with swipe info\n                if (this.elements.lightBoxContent) {\n                    // Find or create swipe info container\n                    var swipeInfoElement = this.elements.lightBoxContent.querySelector('.swipe-info');\n                    if (!swipeInfoElement) {\n                        swipeInfoElement = document.createElement('div');\n                        swipeInfoElement.className = 'swipe-info';\n                        swipeInfoElement.style.padding = '10px';\n                        swipeInfoElement.style.marginTop = '15px';\n                        swipeInfoElement.style.backgroundColor = 'rgba(0,0,0,0.1)';\n                        swipeInfoElement.style.borderRadius = '5px';\n                        swipeInfoElement.style.fontFamily = 'monospace';\n                        swipeInfoElement.style.whiteSpace = 'pre';\n                        this.elements.lightBoxContent.appendChild(swipeInfoElement);\n                    }\n                    \n                    swipeInfoElement.textContent = swipeInfo;\n                }\n            }\n        }, {\n            key: \"openLightBoxWithSwipeInfo\",\n            value: function(swipeInfo) {\n                var t = this;\n                \n                // First open the normal lightbox\n                this.openLightBox();\n                \n                // Then add or update swipe info\n                setTimeout(function() {\n                    t.updateLightboxSwipeInfo(swipeInfo);\n                }, 100);\n            }\n        }, {\n            key: \"handleResize\",\n            value: function() {\n                if (this.state.active) {\n                    this.updateContainerDimensions();\n                    var t = this.state.containerDimensions.width * this.state.profileBubblePosition.x\n                      , e = this.state.containerDimensions.height * this.state.profileBubblePosition.y;\n                    n(this.elements.profileBubble, t, e),\n                    this.positionDirectionalEmojis(t, e),\n                    this.positionQuadrantEmojis(),\n                    this.positionVideoControls(),\n                    this.positionTooltip()\n                }\n                \n                // If lightbox is active, recalculate its max-height and max-width on resize\n                if (this.elements.lightBox && this.elements.lightBox.classList.contains('active') && this.elements.lightBoxContent) {\n                    var viewportWidth = window.innerWidth;\n                    var viewportHeight = window.innerHeight;\n                    \n                    // Calculate optimal dimensions based on viewport\n                    var maxWidth = Math.min(viewportWidth * 0.95, viewportWidth < 768 ? 600 : 800);\n                    var maxHeight = viewportHeight * 0.85;\n                    \n                    // Apply responsive styles\n                    this.elements.lightBoxContent.style.maxWidth = maxWidth + 'px';\n                    this.elements.lightBoxContent.style.maxHeight = maxHeight + 'px';\n                    \n                    // Adjust top bezel and alignment for mobile\n                    if (viewportWidth < 768) {\n                        this.elements.lightBox.style.paddingTop = '5vh';\n                        this.elements.lightBox.style.alignItems = 'flex-start';\n                    } else {\n                        this.elements.lightBox.style.paddingTop = '0';\n                        this.elements.lightBox.style.alignItems = 'center';\n                    }\n                    \n                    if (this.config.debug) {\n                        this.log(\"Window resized, updated lightbox dimensions\", {\n                            viewport: { width: viewportWidth, height: viewportHeight },\n                            lightbox: { maxWidth: maxWidth, maxHeight: maxHeight }\n                        });\n                    }\n                }\n            }\n        }, {\n            key: \"updateContainerDimensions\",\n            value: function() {\n                if (this.elements.container) {\n                    var t = this.elements.container.getBoundingClientRect();\n                    this.state.containerDimensions = {\n                        width: t.width,\n                        height: t.height\n                    }\n                }\n            }\n        }, {\n            key: \"activateOverlay\",\n            value: function(t, e) {\n                var o = this;\n                this.log(\"Activating overlay\", {\n                    x: t,\n                    y: e\n                });\n                var i = t / this.state.containerDimensions.width\n                  , a = e / this.state.containerDimensions.height;\n                this.state.profileBubblePosition = {\n                    x: i,\n                    y: a\n                },\n                this.state.currentQuadrant = function(t, e, o) {\n                    var n = o.getBoundingClientRect()\n                      , i = n.width / 2\n                      , a = n.height / 2;\n                    return t < i ? e < a ? \"top-left\" : \"bottom-left\" : e < a ? \"top-right\" : \"bottom-right\"\n                }(t, e, this.elements.container),\n                this.log(\"Current quadrant\", this.state.currentQuadrant),\n                this.elements.overlay.style.display = \"block\",\n                setTimeout((function() {\n                    o.elements.overlay.classList.add(\"active\")\n                }\n                ), 10),\n                this.elements.profileBubble.style.display = \"flex\";\n                \n                // Apply responsive bubble size\n                var bubbleDimensions = this.calculateResponsiveBubbleSize();\n                this.elements.profileBubble.style.width = bubbleDimensions.width;\n                this.elements.profileBubble.style.height = bubbleDimensions.height;\n                \n                var r = this.state.containerDimensions.width * this.state.profileBubblePosition.x\n                  , s = this.state.containerDimensions.height * this.state.profileBubblePosition.y;\n                n(this.elements.profileBubble, r, s),\n                this.positionDirectionalEmojis(t, e),\n                this.positionQuadrantEmojis(),\n                this.positionVideoControls(),\n                this.positionTooltip(),\n                this.state.active = !0,\n                this.config.autoCancelTimeout > 0 && (this.state.autoCancelTimer = setTimeout((function() {\n                    o.deactivateOverlay()\n                }\n                ), this.config.autoCancelTimeout)),\n                this.config.callbacks.onOverlayActivate && this.config.callbacks.onOverlayActivate(t, e)\n            }\n        }, {\n            key: \"positionDirectionalEmojis\",\n            value: function(t, e) {\n                var o = this.state.containerDimensions\n                  , n = o.width\n                  , i = o.height\n                  , a = e\n                  , r = n - t\n                  , s = i - e\n                  , l = t\n                  , d = n / 2\n                  , c = .1 * i\n                  , u = .9 * n\n                  , h = i / 2\n                  , p = n / 2\n                  , g = .9 * i\n                  , m = .1 * n\n                  , f = i / 2\n                  , b = Math.sqrt(Math.pow(t - d, 2) + Math.pow(e - c, 2))\n                  , v = Math.sqrt(Math.pow(t - u, 2) + Math.pow(e - h, 2))\n                  , y = Math.sqrt(Math.pow(t - p, 2) + Math.pow(e - g, 2))\n                  , w = Math.sqrt(Math.pow(t - m, 2) + Math.pow(e - f, 2))\n                  , x = Math.sqrt(Math.pow(n, 2) + Math.pow(i, 2))\n                  , C = .8 + Math.max(0, 1.2 * (1 - b / x)) + Math.max(0, .8 * (1 - a / (i / 2)))\n                  , j = .8 + Math.max(0, 1.2 * (1 - v / x)) + Math.max(0, .8 * (1 - r / (n / 2)))\n                  , k = .8 + Math.max(0, 1.2 * (1 - y / x)) + Math.max(0, .8 * (1 - s / (i / 2)))\n                  , S = .8 + Math.max(0, 1.2 * (1 - w / x)) + Math.max(0, .8 * (1 - l / (n / 2)))\n                  , T = this.elements.directionalEmojis.up;\n                T.style.display = \"block\",\n                T.style.position = \"absolute\",\n                T.style.top = \"10%\",\n                T.style.left = \"50%\",\n                T.style.transform = \"translate(-50%, 0) scale(\".concat(C, \")\"),\n                T.style.fontSize = \"2rem\",\n                T.style.opacity = \"0.8\";\n                var B = this.elements.directionalEmojis.right;\n                B.style.display = \"block\",\n                B.style.position = \"absolute\",\n                B.style.top = \"50%\",\n                B.style.right = \"10%\",\n                B.style.transform = \"translate(0, -50%) scale(\".concat(j, \")\"),\n                B.style.fontSize = \"2rem\",\n                B.style.opacity = \"0.8\";\n                var E = this.elements.directionalEmojis.down;\n                E.style.display = \"block\",\n                E.style.position = \"absolute\",\n                E.style.bottom = \"10%\",\n                E.style.left = \"50%\",\n                E.style.transform = \"translate(-50%, 0) scale(\".concat(k, \")\"),\n                E.style.fontSize = \"2rem\",\n                E.style.opacity = \"0.8\";\n                var q = this.elements.directionalEmojis.left;\n                q.style.display = \"block\",\n                q.style.position = \"absolute\",\n                q.style.top = \"50%\",\n                q.style.left = \"10%\",\n                q.style.transform = \"translate(0, -50%) scale(\".concat(S, \")\"),\n                q.style.fontSize = \"2rem\",\n                q.style.opacity = \"0.8\"\n            }\n        }, {\n            key: \"calculateResponsiveEmojiSize\",\n            value: function() {\n                var t, e, o = this.state.containerDimensions, n = o.width, i = o.height;\n                \n                // Check if we're on a mobile device\n                var isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent) || window.innerWidth < 768;\n                \n                // Check orientation - true if portrait (height > width)\n                var isPortrait = i > n;\n                \n                // Base emoji size on width rather than the minimum dimension\n                // This ensures emojis are properly sized when orientation changes\n                var widthBasedSize;\n                \n                if (n < 200) {\n                    widthBasedSize = 0.3; // Very small screens (was 0.4)\n                } else if (n < 300) {\n                    widthBasedSize = 0.4; // Small screens (was 0.5)\n                } else if (n < 400) {\n                    widthBasedSize = 0.5; // Medium-small screens (was 0.6)\n                } else if (n < 600) {\n                    widthBasedSize = 0.6; // Medium screens (was 0.7)\n                } else if (n < 800) {\n                    widthBasedSize = 0.7; // Medium-large screens (was 0.8)\n                } else {\n                    widthBasedSize = 0.8; // Large screens (was 0.9)\n                }\n                \n                // Adjust size based on orientation\n                if (isPortrait && isMobile) {\n                    // In portrait mode on mobile, make emojis smaller relative to width\n                    widthBasedSize *= 0.75; // Reduced from 0.85 to 0.75\n                }\n                \n                // Calculate final sizes\n                t = widthBasedSize + \"rem\";\n                e = (widthBasedSize * 1.4) + \"rem\";\n                \n                // Log sizes if debug is enabled\n                if (this.config.debug) {\n                    console.log(\"[QuadTap] Responsive emoji sizes:\", {\n                        width: n,\n                        height: i,\n                        isPortrait: isPortrait,\n                        isMobile: isMobile,\n                        defaultSize: t,\n                        enlargedSize: e\n                    });\n                }\n                \n                return {\n                    defaultSize: t,\n                    enlargedSize: e,\n                    defaultOpacity: \"0.6\",\n                    enlargedOpacity: \"0.8\"\n                }\n            }\n        }, {\n            key: \"calculateResponsiveBubbleSize\",\n            value: function() {\n                // Get container dimensions\n                var containerWidth = this.state.containerDimensions.width;\n                var containerHeight = this.state.containerDimensions.height;\n                \n                // Check if we're on a mobile device\n                var isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent) || window.innerWidth < 768;\n                \n                // Check orientation - true if portrait (height > width)\n                var isPortrait = containerHeight > containerWidth;\n                \n                // Base bubble size on width rather than minimum dimension\n                // This ensures consistent sizing when orientation changes\n                var bubbleSize;\n                \n                // Size based on width percentage\n                var widthPercentage = isMobile ? 0.12 : 0.10; // 12% of width on mobile, 10% on desktop\n                bubbleSize = Math.round(containerWidth * widthPercentage);\n                \n                // Apply min/max constraints\n                bubbleSize = Math.max(30, bubbleSize); // Minimum size\n                bubbleSize = Math.min(70, bubbleSize); // Maximum size\n                \n                // Adjust for portrait orientation on mobile\n                if (isPortrait && isMobile) {\n                    // In portrait mode, make bubble slightly smaller\n                    bubbleSize = Math.floor(bubbleSize * 0.9);\n                }\n                \n                // Log size if debug is enabled\n                if (this.config.debug) {\n                    console.log(\"[QuadTap] Responsive bubble size:\", {\n                        width: containerWidth,\n                        height: containerHeight,\n                        isPortrait: isPortrait,\n                        isMobile: isMobile,\n                        bubbleSize: bubbleSize\n                    });\n                }\n                \n                return {\n                    width: bubbleSize + 'px',\n                    height: bubbleSize + 'px'\n                };\n            }\n        }, {\n            key: \"positionQuadrantEmojis\",\n            value: function() {\n                var t = this.calculateResponsiveEmojiSize()\n                  , e = t.defaultSize\n                  , o = t.enlargedSize\n                  , n = t.defaultOpacity\n                  , i = t.enlargedOpacity;\n                \n                // Check if we're on a mobile device\n                var isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent) || window.innerWidth < 768;\n                \n                // Use smaller corner spacing on mobile\n                var cornerSpacing = isMobile ? \"3%\" : \"4%\";\n                \n                var a = this.elements.quadrantEmojis.topLeft;\n                a.style.display = \"block\",\n                a.style.position = \"absolute\",\n                a.style.top = cornerSpacing,\n                a.style.left = cornerSpacing,\n                a.style.transform = \"translate(-50%, -50%)\",\n                a.style.fontSize = e,\n                a.style.opacity = n;\n                \n                var r = this.elements.quadrantEmojis.topRight;\n                r.style.display = \"block\",\n                r.style.position = \"absolute\",\n                r.style.top = cornerSpacing,\n                r.style.right = cornerSpacing,\n                r.style.transform = \"translate(50%, -50%)\",\n                r.style.fontSize = e,\n                r.style.opacity = n;\n                \n                var s = this.elements.quadrantEmojis.bottomLeft;\n                s.style.display = \"block\",\n                s.style.position = \"absolute\",\n                s.style.bottom = cornerSpacing,\n                s.style.left = cornerSpacing,\n                s.style.transform = \"translate(-50%, 50%)\",\n                s.style.fontSize = e,\n                s.style.opacity = n;\n                \n                var l = this.elements.quadrantEmojis.bottomRight;\n                if (l.style.display = \"block\",\n                l.style.position = \"absolute\",\n                l.style.bottom = cornerSpacing,\n                l.style.right = cornerSpacing,\n                l.style.transform = \"translate(50%, 50%)\",\n                l.style.fontSize = e,\n                l.style.opacity = n,\n                this.state.currentQuadrant)\n                    switch (this.state.currentQuadrant) {\n                    case \"top-left\":\n                        a.style.fontSize = o,\n                        a.style.opacity = i;\n                        break;\n                    case \"top-right\":\n                        r.style.fontSize = o,\n                        r.style.opacity = i;\n                        break;\n                    case \"bottom-left\":\n                        s.style.fontSize = o,\n                        s.style.opacity = i;\n                        break;\n                    case \"bottom-right\":\n                        l.style.fontSize = o,\n                        l.style.opacity = i\n                    }\n            }\n        }, {\n            key: \"positionVideoControls\",\n            value: function() {\n                if (this.config.videoControls.enabled) {\n                    var t = this.elements.videoControls;\n                    t.style.display = \"flex\",\n                    t.style.position = \"absolute\",\n                    t.style.top = \"50%\",\n                    t.style.left = \"50%\",\n                    t.style.transform = \"translate(-50%, -50%)\",\n                    t.style.zIndex = \"1001\"\n                }\n            }\n        }, {\n            key: \"positionTooltip\",\n            value: function() {\n                if (this.config.tooltip && !1 !== this.config.tooltip.enabled) {\n                    var t = this.elements.tooltip;\n                    switch (t.style.display = \"block\",\n                    t.style.position = \"absolute\",\n                    t.style.zIndex = \"1001\",\n                    this.config.tooltip.text && (t.textContent = this.config.tooltip.text),\n                    this.config.tooltip.position || \"above-controls\") {\n                    case \"above-controls\":\n                    default:\n                        t.style.top = \"40%\",\n                        t.style.left = \"50%\",\n                        t.style.transform = \"translate(-50%, -50%)\";\n                        break;\n                    case \"below-controls\":\n                        t.style.top = \"60%\",\n                        t.style.left = \"50%\",\n                        t.style.transform = \"translate(-50%, -50%)\";\n                        break;\n                    case \"on-bubble\":\n                        var e = this.elements.profileBubble.getBoundingClientRect()\n                          , o = this.elements.overlay.getBoundingClientRect()\n                          , n = (e.top - o.top) / o.height * 100;\n                        t.style.top = \"\".concat(n - 10, \"%\"),\n                        t.style.left = \"50%\",\n                        t.style.transform = \"translate(-50%, -100%)\"\n                    }\n                    if (this.config.tooltip.style) {\n                        var i = this.config.tooltip.style;\n                        i.backgroundColor && (t.style.backgroundColor = i.backgroundColor),\n                        i.color && (t.style.color = i.color),\n                        i.padding && (t.style.padding = i.padding),\n                        i.borderRadius && (t.style.borderRadius = i.borderRadius)\n                    } else\n                        t.style.textAlign = \"center\",\n                        t.style.backgroundColor = \"rgba(0, 0, 0, 0.7)\",\n                        t.style.color = \"white\",\n                        t.style.padding = \"8px 12px\",\n                        t.style.borderRadius = \"4px\"\n                }\n            }\n        }, {\n            key: \"controlVideo\",\n            value: function(t) {\n                this.log(\"Controlling video\", t);\n                var e = document.querySelector(this.config.videoSelector);\n                if (e) {\n                    switch (t) {\n                    case \"rewind\":\n                        e.currentTime = Math.max(0, e.currentTime - this.config.videoControls.rewindTime);\n                        break;\n                    case \"playpause\":\n                        e.paused ? e.play() : e.pause();\n                        break;\n                    case \"forward\":\n                        e.currentTime = Math.min(e.duration, e.currentTime + this.config.videoControls.forwardTime);\n                        break;\n                    case \"share\":\n                        navigator.share ? navigator.share({\n                            title: \"Shared Video\",\n                            text: \"Check out this video!\",\n                            url: window.location.href\n                        }).catch((function(t) {\n                            console.error(\"Share failed:\", t)\n                        }\n                        )) : alert(\"Share feature not supported by your browser\")\n                    }\n                    this.config.callbacks.onVideoControl && this.config.callbacks.onVideoControl(t, e.currentTime)\n                } else\n                    this.log(\"Video element not found\")\n            }\n        }, {\n            key: \"deactivateOverlay\",\n            value: function() {\n                var t = this;\n                this.log(\"Deactivating overlay\"),\n                this.elements.overlay.classList.remove(\"active\"),\n                setTimeout((function() {\n                    t.state.active || (t.elements.overlay.style.display = \"none\",\n                    t.elements.profileBubble.style.display = \"none\",\n                    Object.values(t.elements.directionalEmojis).forEach((function(t) {\n                        t.style.display = \"none\"\n                    }\n                    )),\n                    Object.values(t.elements.quadrantEmojis).forEach((function(t) {\n                        t.style.display = \"none\"\n                    }\n                    )),\n                    t.elements.videoControls.style.display = \"none\",\n                    t.elements.tooltip.style.display = \"none\")\n                }\n                ), 300),\n                this.state.active = !1,\n                this.state.autoCancelTimer && (clearTimeout(this.state.autoCancelTimer),\n                this.state.autoCancelTimer = null),\n                this.config.callbacks.onThrowDownCancel && this.config.callbacks.onThrowDownCancel(this.state.currentQuadrant),\n                this.log(\"Overlay deactivated\")\n            }\n        }, {\n            key: \"createVideoTimeSlider\",\n            value: function() {\n                return o(\"div\", {\n                    styles: {\n                        display: \"none\"\n                    }\n                })\n            }\n        }, {\n            key: \"openLightBox\",\n            value: function() {\n                var t = this;\n                this.log(\"Opening light-box\"),\n                this.elements.lightBox.classList.add(\"active\"),\n                this.state.autoCancelTimer && (clearTimeout(this.state.autoCancelTimer),\n                this.state.autoCancelTimer = null);\n\n                // ADDED: Calculate dynamic dimensions for responsive lightbox\n                var viewportWidth = window.innerWidth;\n                var viewportHeight = window.innerHeight;\n                \n                // Adjust lightbox content size based on viewport\n                if (this.elements.lightBoxContent) {\n                    // Calculate max dimensions - use smaller dimensions on mobile\n                    var maxWidth = Math.min(viewportWidth * 0.95, viewportWidth < 768 ? 600 : 800);\n                    var maxHeight = viewportHeight * 0.85;\n                    \n                    // Apply responsive styles\n                    this.elements.lightBoxContent.style.maxWidth = maxWidth + 'px';\n                    this.elements.lightBoxContent.style.maxHeight = maxHeight + 'px';\n                    \n                    // Adjust top bezel and alignment for mobile\n                    if (viewportWidth < 768) {\n                        this.elements.lightBox.style.paddingTop = '5vh';\n                        this.elements.lightBox.style.alignItems = 'flex-start';\n                    } else {\n                        this.elements.lightBox.style.paddingTop = '0';\n                        this.elements.lightBox.style.alignItems = 'center';\n                    }\n                    \n                    this.log(\"Responsive lightbox dimensions set\", {\n                        viewport: { width: viewportWidth, height: viewportHeight },\n                        lightbox: { maxWidth: maxWidth, maxHeight: maxHeight }\n                    });\n                }\n                \n                var e = this.config.videoPlayerApi && this.config.videoPlayerApi.enabled && this.config.videoPlayerApi.adapter;\n                if (this.state.wasPlayingBefore = !!e && e.isPlaying(),\n                !e) {\n                    var o = document.querySelector(this.config.videoSelector);\n                    this.state.wasPlayingBefore = !!o && !o.paused\n                }\n                if (this.elements.videoSliderContainer || (this.elements.videoSliderContainer = this.createVideoTimeSlider(),\n                this.elements.lightboxControlStrip && this.elements.lightboxControlStrip.parentNode && this.elements.lightboxControlStrip.parentNode.insertBefore(this.elements.videoSliderContainer, this.elements.lightboxControlStrip)),\n                this.elements.lightboxControlStripObj && this.config.videoControls.enabled) {\n                    this.elements.lightboxControlStrip && (this.elements.lightboxControlStrip.style.display = \"flex\");\n                    var n = document.querySelector(this.config.videoSelector);\n                    if (n)\n                        try {\n                            this.elements.lightboxControlStripObj.updatePlayPauseButton ? this.elements.lightboxControlStripObj.updatePlayPauseButton(!n.paused) : j(this.elements.lightboxControlStrip, !n.paused)\n                        } catch (t) {\n                            this.log(\"Error updating play/pause button\", t)\n                        }\n                }\n                if (this.updateVideoTimeDisplay(),\n                this.videoTimeUpdateInterval = setInterval((function() {\n                    t.updateVideoTimeDisplay()\n                }\n                ), 1e3),\n                function(t) {\n                    p.apply(this, arguments)\n                }(this),\n                this.elements.videoControls && this.elements.videoControlsObj)\n                    try {\n                        this.elements.videoControlsObj.updatePlayPauseButton ? this.elements.videoControlsObj.updatePlayPauseButton(!1) : j(this.elements.videoControls, !1)\n                    } catch (t) {\n                        this.log(\"Error updating play/pause button\", t)\n                    }\n                this.config.callbacks.onThrowDownInitiate && this.config.callbacks.onThrowDownInitiate(this.state.currentQuadrant, this.state.profileBubblePosition.x, this.state.profileBubblePosition.y)\n\n                // Update position display if it exists\n                if (this.elements.positionDisplay) {\n                    var xPos = this.state.profileBubblePosition.x;\n                    var yPos = this.state.profileBubblePosition.y;\n                    \n                    // If values are not available in state, try to get from localStorage\n                    if (typeof xPos !== 'number' || typeof yPos !== 'number') {\n                        var storedPos = s('positionX');\n                        var storedPosY = s('positionY');\n                        if (storedPos !== null) xPos = parseFloat(storedPos);\n                        if (storedPosY !== null) yPos = parseFloat(storedPosY);\n                    }\n                    \n                    // Default to 50% if still no valid values\n                    if (typeof xPos !== 'number') xPos = 0.5;\n                    if (typeof yPos !== 'number') yPos = 0.5;\n\n                    // Calculate percentages, inverting y-value so \"up\" is positive\n                    var xPercent = Math.round(xPos * 100 * 100) / 100;\n                    var yPercentUp = Math.round((1 - yPos) * 100 * 100) / 100; // Invert y so up is positive\n                    this.elements.positionDisplay.textContent = \"Position: \" + yPercentUp + \"% up, \" + xPercent + \"% right\";\n                }\n            }\n        }, {\n            key: \"closeLightBox\",\n            value: function() {\n                var t = this; // Make sure t is initialized with this\n                \n                this.log(\"Closing light-box\"),\n                this.elements.lightBox.classList.remove(\"active\"),\n                this.videoTimeUpdateInterval && (clearInterval(this.videoTimeUpdateInterval),\n                this.videoTimeUpdateInterval = null),\n                this.elements.videoControlsObj && this.config.videoControls.enabled && (this.elements.videoControls.parentNode && this.elements.videoControls.parentNode.removeChild(this.elements.videoControls),\n                this.elements.overlay && (this.elements.overlay.appendChild(this.elements.videoControls),\n                this.elements.videoControlsObj.setMode(\"overlay\", this.elements.container),\n                this.elements.videoControls.style.display = \"none\")),\n                this.log(\"Always resuming video on lightbox close\"),\n                // QuadTap MOD: Video is always played when lightbox closes. Overlay is always deactivated.\n                setTimeout((function() {\n                    !function(t) { // Call h (play)\n                        h.apply(this, arguments)\n                    }(t),\n                    // Update control strip UI if it exists\n                    t.elements.videoControls && t.elements.videoControlsObj && (t.elements.videoControlsObj.updatePlayPauseButton ? t.elements.videoControlsObj.updatePlayPauseButton(!0) : j(t.elements.videoControls, !0))\n                }\n                ), 100),\n                // Clear swipe info when lightbox closes\n                this.state.swipeInfo = null,\n                this.state.swipeProcessing = false,\n                \n                // Find and remove any swipe info elements\n                this.elements.lightBoxContent && this.elements.lightBoxContent.querySelector('.swipe-info') && (\n                    this.elements.lightBoxContent.querySelector('.swipe-info').parentNode.removeChild(\n                        this.elements.lightBoxContent.querySelector('.swipe-info')\n                    )\n                ),\n                \n                this.deactivateOverlay() // QuadTap MOD: Ensure overlay is deactivated.\n            }\n        }, {\n            key: \"updateVideoTimeDisplay\",\n            value: function() {\n                if (this.elements.videoInfoDisplay) {\n                    var t = document.querySelector(this.config.videoSelector);\n                    if (t) {\n                        var e = function(t) {\n                            if (isNaN(t) || !isFinite(t))\n                                return \"0:00\";\n                            var e = Math.floor(t / 60)\n                              , o = Math.floor(t % 60);\n                            return \"\".concat(e, \":\").concat(o < 10 ? \"0\" : \"\").concat(o)\n                        }\n                          , o = e(t.currentTime)\n                          , n = e(t.duration);\n                        if (this.elements.videoInfoDisplay.textContent = \"\".concat(o, \" / \").concat(n),\n                        this.elements.currentTimeElement && (this.elements.currentTimeElement.textContent = o),\n                        this.elements.durationElement && (this.elements.durationElement.textContent = n),\n                        this.elements.videoSlider && t.duration) {\n                            var i = t.currentTime / t.duration * 100;\n                            this.elements.videoSlider.value = i\n                        }\n                    }\n                }\n            }\n        }, {\n            key: \"startRecording\",\n            value: function() {\n                var t = this;\n                if (this.log(\"Starting video recording\"),\n                this.state.recording = !0,\n                !navigator.mediaDevices || !window.MediaRecorder)\n                    return this.log(\"MediaRecorder API not supported\"),\n                    alert(\"Video recording is not supported in your browser\"),\n                    void (this.state.recording = !1);\n                navigator.mediaDevices.getUserMedia({\n                    video: !0,\n                    audio: !0\n                }).then((function(e) {\n                    t.state.mediaStream = e,\n                    t.state.mediaRecorder = new MediaRecorder(e);\n                    var o = [];\n                    t.state.mediaRecorder.ondataavailable = function(t) {\n                        t.data.size > 0 && o.push(t.data)\n                    }\n                    ,\n                    t.state.mediaRecorder.onstop = function() {\n                        var e = new Blob(o,{\n                            type: \"video/webm\"\n                        });\n                        r(\"recordedVideo\", URL.createObjectURL(e)),\n                        t.saveEventToHistory({\n                            type: \"video_recording\",\n                            size: e.size,\n                            duration: Date.now() - t.state.recordingStartTime\n                        }),\n                        t.state.mediaStream.getTracks().forEach((function(t) {\n                            return t.stop()\n                        }\n                        )),\n                        t.state.mediaStream = null,\n                        t.state.mediaRecorder = null,\n                        t.state.recording = !1\n                    }\n                    ,\n                    t.state.mediaRecorder.start(),\n                    t.state.recordingStartTime = Date.now();\n                    var n = document.createElement(\"div\");\n                    n.className = \"recording-indicator\",\n                    n.textContent = \"🔴 Recording...\",\n                    n.style.position = \"absolute\",\n                    n.style.top = \"10px\",\n                    n.style.right = \"10px\",\n                    n.style.backgroundColor = \"rgba(255, 0, 0, 0.7)\",\n                    n.style.color = \"white\",\n                    n.style.padding = \"5px 10px\",\n                    n.style.borderRadius = \"4px\",\n                    n.style.zIndex = \"1002\",\n                    t.elements.lightBoxContent.appendChild(n),\n                    t.state.recordingIndicator = n\n                }\n                )).catch((function(e) {\n                    t.log(\"Error accessing media devices\", e),\n                    alert(\"Could not access camera and microphone\"),\n                    t.state.recording = !1\n                }\n                ))\n            }\n        }, {\n            key: \"stopRecording\",\n            value: function() {\n                this.log(\"Stopping video recording\"),\n                this.state.mediaRecorder && this.state.recording && (this.state.mediaRecorder.stop(),\n                this.state.recordingIndicator && this.state.recordingIndicator.parentNode && this.state.recordingIndicator.parentNode.removeChild(this.state.recordingIndicator))\n            }\n        }, {\n            key: \"toggleVideoPause\",\n            value: function() {\n                var t = this;\n                this.log(\"Toggling video pause/play state\");\n                var e = this.config.videoPlayerApi && this.config.videoPlayerApi.enabled && this.config.videoPlayerApi.adapter\n                  , o = document.querySelector(this.config.videoSelector);\n                if (e)\n                    e.isPlaying().then((function(o) {\n                        if (o) {\n                            e.pause();\n                            var n = t.elements.lightBox.querySelector(\".td-pause-play-btn\");\n                            n && (n.textContent = \"▶️\")\n                        } else {\n                            e.play();\n                            var i = t.elements.lightBox.querySelector(\".td-pause-play-btn\");\n                            i && (i.textContent = \"⏸️\")\n                        }\n                    }\n                    ));\n                else if (o)\n                    if (o.paused)\n                        o.play().then((function() {\n                            var e = t.elements.lightBox.querySelector(\".td-pause-play-btn\");\n                            e && (e.textContent = \"⏸️\")\n                        }\n                        )).catch((function(e) {\n                            t.log(\"Error playing video\", e)\n                        }\n                        ));\n                    else {\n                        o.pause();\n                        var n = this.elements.lightBox.querySelector(\".td-pause-play-btn\");\n                        n && (n.textContent = \"▶️\")\n                    }\n                this.config.callbacks.onVideoControl && this.config.callbacks.onVideoControl(\"playpause\", o ? o.currentTime : 0)\n            }\n        }, {\n            key: \"destroy\",\n            value: function() {\n                this.log(\"Destroying QuadTap\"),\n                this.state.autoCancelTimer && clearTimeout(this.state.autoCancelTimer),\n                this.state.swipeDebounceTimer && clearTimeout(this.state.swipeDebounceTimer), // Add this line\n                this.elements.container && this.elements.container.removeEventListener(\"click\", this.handleContainerClick),\n                this.elements.profileBubble && this.elements.profileBubble.removeEventListener(\"click\", this.handleBubbleClick),\n                this.elements.lightBox && this.elements.lightBox.removeEventListener(\"click\", this.handleLightBoxClick),\n                this.elements.video && (this.elements.video.removeEventListener(\"play\", this.handleVideoPlay),\n                this.elements.video.removeEventListener(\"pause\", this.handleVideoPause)),\n                window.removeEventListener(\"resize\", this.throttledResize),\n                document.removeEventListener(\"keydown\", this.handleKeyDown),\n                this.elements.overlay && this.elements.overlay.parentNode && this.elements.overlay.parentNode.removeChild(this.elements.overlay),\n                this.elements.lightBox && this.elements.lightBox.parentNode && this.elements.lightBox.parentNode.removeChild(this.elements.lightBox),\n                this.state.recording && this.state.mediaRecorder && this.stopRecording(),\n                this.state.mediaStream && this.state.mediaStream.getTracks().forEach((function(t) {\n                    return t.stop()\n                }\n                )),\n                this.state = {\n                    active: !1,\n                    profileBubblePosition: {\n                        x: 0,\n                        y: 0\n                    },\n                    currentQuadrant: null,\n                    autoCancelTimer: null,\n                    containerDimensions: {\n                        width: 0,\n                        height: 0\n                    },\n                    videoPlaying: !1,\n                    recording: !1,\n                    mediaStream: null,\n                    mediaRecorder: null,\n                    recordingStartTime: 0,\n                    recordingIndicator: null,\n                    swipeDebounceTimer: null,\n                    swipeProcessing: !1 // Add this new property\n                },\n                this.log(\"QuadTap destroyed\")\n            }\n        }],\n        e && B(t.prototype, e),\n        Object.defineProperty(t, \"prototype\", {\n            writable: !1\n        }),\n        t;\n        var t, e\n    }();\n    function O(t, e) {\n        var o = Object.keys(t);\n        if (Object.getOwnPropertySymbols) {\n            var n = Object.getOwnPropertySymbols(t);\n            e && (n = n.filter((function(e) {\n                return Object.getOwnPropertyDescriptor(t, e).enumerable\n            }\n            ))),\n            o.push.apply(o, n)\n        }\n        return o\n    }\n    function z(t) {\n        for (var e = 1; e < arguments.length; e++) {\n            var o = null != arguments[e] ? arguments[e] : {};\n            e % 2 ? O(Object(o), !0).forEach((function(e) {\n                L(t, e, o[e])\n            }\n            )) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(o)) : O(Object(o)).forEach((function(e) {\n                Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(o, e))\n            }\n            ))\n        }\n        return t\n    }\n    function L(t, e, o) {\n        return (e = N(e))in t ? Object.defineProperty(t, e, {\n            value: o,\n            enumerable: !0,\n            configurable: !0,\n            writable: !0\n        }) : t[e] = o,\n        t\n    }\n    function R(t) {\n        return R = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(t) {\n            return typeof t\n        }\n        : function(t) {\n            return t && \"function\" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? \"symbol\" : typeof t\n        }\n        ,\n        R(t)\n    }\n    function I(t, e) {\n        for (var o = 0; o < e.length; o++) {\n            var n = e[o];\n            n.enumerable = n.enumerable || !1,\n            n.configurable = !0,\n            \"value\"in n && (n.writable = !0),\n            Object.defineProperty(t, N(n.key), n)\n        }\n    }\n    function N(t) {\n        var e = function(t) {\n            if (\"object\" != R(t) || !t)\n                return t;\n            var e = t[Symbol.toPrimitive];\n            if (void 0 !== e) {\n                var o = e.call(t, \"string\");\n                if (\"object\" != R(o))\n                    return o;\n                throw new TypeError(\"@@toPrimitive must return a primitive value.\")\n            }\n            return String(t)\n        }(t);\n        return \"symbol\" == R(e) ? e : e + \"\"\n    }\n    const D = function() {\n        return t = function t() {\n            !function(t, e) {\n                if (!(t instanceof e))\n                    throw new TypeError(\"Cannot call a class as a function\")\n            }(this, t),\n            this.settings = {\n                containerId: \"quad-tap-container\",\n                videoSelector: \"video\",\n                debug: !1,\n                autoCancelTimeout: 3e3,\n                autoInitialize: !1,\n                quadrantEmojis: {\n                    topLeft: \"🌈\",\n                    topRight: \"🔥\",\n                    bottomLeft: \"💧\",\n                    bottomRight: \"🌪️\"\n                },\n                directionalEmojis: {\n                    north: \"⬆️\",\n                    east: \"➡️\",\n                    south: \"⬇️\",\n                    west: \"⬅️\"\n                },\n                thoughtEmojis: {\n                    topLeft: [\"🌈\", \"🦄\", \"🌟\", \"🌻\"],\n                    topRight: [\"🔥\", \"⚡\", \"💥\", \"🌋\"],\n                    bottomLeft: [\"💧\", \"🌊\", \"❄️\", \"☔\"],\n                    bottomRight: [\"🌪️\", \"🌩️\", \"⛈️\", \"🌀\"]\n                },\n                videoControls: {\n                    enabled: !0,\n                    position: \"center\",\n                    autoHide: !0,\n                    autoHideDelay: 2e3,\n                    pauseOnLightboxOnly: !0\n                },\n                tooltip: {\n                    enabled: !0,\n                    position: \"above-controls\",\n                    text: \"Tap elsewhere to cancel\",\n                    style: {\n                        backgroundColor: \"rgba(0, 0, 0, 0.7)\",\n                        color: \"white\",\n                        padding: \"8px 12px\",\n                        borderRadius: \"4px\"\n                    }\n                },\n                swipeNavigation: {\n                    enabled: !0,\n                    threshold: 50,\n                    direction: \"vertical\"\n                },\n                northContextBar: {\n                    enabled: !0,\n                    content: \"FROM\"\n                },\n                southContextBar: {\n                    enabled: !0,\n                    content: \"TO\"\n                },\n                coordinateSystem: {\n                    type: \"percentage\",\n                    storeMetadata: !0\n                },\n                emojiSizes: {\n                    default: \"24px\",\n                    active: \"36px\"\n                },\n                profileBubble: {\n                    imageUrl: null,\n                    fallbackEmoji: \"👤\",\n                    size: \"60px\",\n                    borderColor: \"white\",\n                    borderWidth: \"2px\",\n                    backgroundColor: \"rgba(0, 0, 0, 0.7)\"\n                },\n                colors: {\n                    overlay: {\n                        background: \"rgba(240, 240, 245, 0.5)\",\n                        quadrantGradients: {\n                            topLeft: \"rgba(0, 255, 255, 0.8)\",\n                            topRight: \"rgba(255, 255, 0, 0.8)\",\n                            bottomLeft: \"rgba(0, 255, 0, 0.8)\",\n                            bottomRight: \"rgba(255, 0, 255, 0.8)\"\n                        }\n                    },\n                    lightbox: {\n                        background: \"rgba(0, 0, 0, 0.9)\",\n                        text: \"white\",\n                        headerBackground: \"rgba(50, 50, 50, 0.8)\",\n                        buttonPrimary: \"#4CAF50\",\n                        buttonSecondary: \"#f44336\"\n                    }\n                },\n                callbacks: {\n                    onOverlayActivate: null,\n                    onThrowDownInitiate: null,\n                    onThrowDownConfirm: null,\n                    onThrowDownCancel: null,\n                    onVideoControl: null\n                },\n                videoPlayerApi: {\n                    enabled: !1,\n                    adapter: null\n                }\n            }\n        }\n        ,\n        (e = [{\n            key: \"withContainer\",\n            value: function(t) {\n                return \"string\" != typeof t && console.warn(\"[SettingsBuilder] containerId should be a string\"),\n                this.settings.containerId = t,\n                this\n            }\n        }, {\n            key: \"withVideoSelector\",\n            value: function(t) {\n                return \"string\" != typeof t && console.warn(\"[SettingsBuilder] videoSelector should be a string\"),\n                this.settings.videoSelector = t,\n                this\n            }\n        }, {\n            key: \"withDebug\",\n            value: function(t) {\n                return \"boolean\" != typeof t && console.warn(\"[SettingsBuilder] debug should be a boolean\"),\n                this.settings.debug = t,\n                this\n            }\n        }, {\n            key: \"withAutoCancelTimeout\",\n            value: function(t) {\n                return (\"number\" != typeof t || t < 0) && console.warn(\"[SettingsBuilder] autoCancelTimeout should be a positive number\"),\n                this.settings.autoCancelTimeout = t,\n                this\n            }\n        }, {\n            key: \"withQuadrantEmojis\",\n            value: function(t) {\n                return \"object\" !== R(t) ? (console.warn(\"[SettingsBuilder] quadrantEmojis should be an object\"),\n                this) : (this.settings.quadrantEmojis = z(z({}, this.settings.quadrantEmojis), t),\n                this)\n            }\n        }, {\n            key: \"withDirectionalEmojis\",\n            value: function(t) {\n                return \"object\" !== R(t) ? (console.warn(\"[SettingsBuilder] directionalEmojis should be an object\"),\n                this) : (this.settings.directionalEmojis = z(z({}, this.settings.directionalEmojis), t),\n                this)\n            }\n        }, {\n            key: \"withThoughtEmojisForQuadrant\",\n            value: function(t, e) {\n                return [\"topLeft\", \"topRight\", \"bottomLeft\", \"bottomRight\"].includes(t) ? Array.isArray(e) ? (this.settings.thoughtEmojis[t] = e,\n                this) : (console.warn(\"[SettingsBuilder] emojis should be an array\"),\n                this) : (console.warn(\"[SettingsBuilder] quadrant should be one of: topLeft, topRight, bottomLeft, bottomRight\"),\n                this)\n            }\n        }, {\n            key: \"withThoughtEmojis\",\n            value: function(t) {\n                return \"object\" !== R(t) ? (console.warn(\"[SettingsBuilder] thoughtEmojis should be an object\"),\n                this) : (this.settings.thoughtEmojis = z(z({}, this.settings.thoughtEmojis), t),\n                this)\n            }\n        }, {\n            key: \"withVideoControls\",\n            value: function(t) {\n                return \"object\" !== R(t) ? (console.warn(\"[SettingsBuilder] videoControlsConfig should be an object\"),\n                this) : (this.settings.videoControls = z(z({}, this.settings.videoControls), t),\n                this)\n            }\n        }, {\n            key: \"withTooltip\",\n            value: function(t) {\n                return \"object\" !== R(t) ? (console.warn(\"[SettingsBuilder] tooltipConfig should be an object\"),\n                this) : (t.style && \"object\" === R(t.style) && (t.style = z(z({}, this.settings.tooltip.style), t.style)),\n                this.settings.tooltip = z(z({}, this.settings.tooltip), t),\n                this)\n            }\n        }, {\n            key: \"withSwipeNavigation\",\n            value: function(t) {\n                return \"object\" !== R(t) ? (console.warn(\"[SettingsBuilder] swipeConfig should be an object\"),\n                this) : (this.settings.swipeNavigation = z(z({}, this.settings.swipeNavigation), t),\n                this)\n            }\n        }, {\n            key: \"withNorthContextBar\",\n            value: function(t) {\n                return \"object\" !== R(t) ? (console.warn(\"[SettingsBuilder] northConfig should be an object\"),\n                this) : (this.settings.northContextBar = z(z({}, this.settings.northContextBar), t),\n                this)\n            }\n        }, {\n            key: \"withSouthContextBar\",\n            value: function(t) {\n                return \"object\" !== R(t) ? (console.warn(\"[SettingsBuilder] southConfig should be an object\"),\n                this) : (this.settings.southContextBar = z(z({}, this.settings.southContextBar), t),\n                this)\n            }\n        }, {\n            key: \"withCoordinateSystem\",\n            value: function(t) {\n                return \"object\" !== R(t) ? (console.warn(\"[SettingsBuilder] coordinateConfig should be an object\"),\n                this) : (this.settings.coordinateSystem = z(z({}, this.settings.coordinateSystem), t),\n                this)\n            }\n        }, {\n            key: \"withAutoInitialize\",\n            value: function(t) {\n                return \"boolean\" != typeof t && console.warn(\"[SettingsBuilder] autoInitialize should be a boolean\"),\n                this.settings.autoInitialize = t,\n                this\n            }\n        }, {\n            key: \"withProfileBubble\",\n            value: function(t) {\n                return \"object\" !== R(t) ? (console.warn(\"[SettingsBuilder] bubbleConfig should be an object\"),\n                this) : (this.settings.profileBubble = z(z({}, this.settings.profileBubble), t),\n                this)\n            }\n        }, {\n            key: \"withOverlayColors\",\n            value: function(t) {\n                return \"object\" !== R(t) ? (console.warn(\"[SettingsBuilder] overlayColors should be an object\"),\n                this) : (t.quadrantGradients && \"object\" === R(t.quadrantGradients) && (t.quadrantGradients = z(z({}, this.settings.colors.overlay.quadrantGradients), t.quadrantGradients)),\n                this.settings.colors.overlay = z(z({}, this.settings.colors.overlay), t),\n                this)\n            }\n        }, {\n            key: \"withLightboxColors\",\n            value: function(t) {\n                return \"object\" !== R(t) ? (console.warn(\"[SettingsBuilder] lightboxColors should be an object\"),\n                this) : (this.settings.colors.lightbox = z(z({}, this.settings.colors.lightbox), t),\n                this)\n            }\n        }, {\n            key: \"withColors\",\n            value: function(t) {\n                return \"object\" !== R(t) ? (console.warn(\"[SettingsBuilder] colorConfig should be an object\"),\n                this) : (t.overlay && \"object\" === R(t.overlay) && (t.overlay.quadrantGradients && \"object\" === R(t.overlay.quadrantGradients) && (t.overlay.quadrantGradients = z(z({}, this.settings.colors.overlay.quadrantGradients), t.overlay.quadrantGradients)),\n                t.overlay = z(z({}, this.settings.colors.overlay), t.overlay)),\n                t.lightbox && \"object\" === R(t.lightbox) && (t.lightbox = z(z({}, this.settings.colors.lightbox), t.lightbox)),\n                this.settings.colors = z(z({}, this.settings.colors), t),\n                this)\n            }\n        }, {\n            key: \"withEmojiSizes\",\n            value: function(t) {\n                return \"object\" !== R(t) ? (console.warn(\"[SettingsBuilder] sizeConfig should be an object\"),\n                this) : (this.settings.emojiSizes = z(z({}, this.settings.emojiSizes), t),\n                this)\n            }\n        }, {\n            key: \"withVideoPlayerApi\",\n            value: function(t) {\n                return \"object\" !== R(t) ? (console.warn(\"[SettingsBuilder] apiConfig should be an object\"),\n                this) : (this.settings.videoPlayerApi = z(z({}, this.settings.videoPlayerApi), t),\n                this)\n            }\n        }, {\n            key: \"withVideoPlayerAdapter\",\n            value: function(t) {\n                return t ? (this.settings.videoPlayerApi = z(z({}, this.settings.videoPlayerApi), {}, {\n                    enabled: !0,\n                    adapter: t\n                }),\n                this) : (console.warn(\"[SettingsBuilder] adapter should be a valid VideoPlayerAdapter instance\"),\n                this)\n            }\n        }, {\n            key: \"onOverlayActivate\",\n            value: function(t) {\n                return \"function\" != typeof t ? (console.warn(\"[SettingsBuilder] callback should be a function\"),\n                this) : (this.settings.callbacks.onOverlayActivate = t,\n                this)\n            }\n        }, {\n            key: \"onThrowDownInitiate\",\n            value: function(t) {\n                return \"function\" != typeof t ? (console.warn(\"[SettingsBuilder] callback should be a function\"),\n                this) : (this.settings.callbacks.onThrowDownInitiate = t,\n                this)\n            }\n        }, {\n            key: \"onThrowDownConfirm\",\n            value: function(t) {\n                return \"function\" != typeof t ? (console.warn(\"[SettingsBuilder] callback should be a function\"),\n                this) : (this.settings.callbacks.onThrowDownConfirm = t,\n                this)\n            }\n        }, {\n            key: \"onThrowDownCancel\",\n            value: function(t) {\n                return \"function\" != typeof t ? (console.warn(\"[SettingsBuilder] callback should be a function\"),\n                this) : (this.settings.callbacks.onThrowDownCancel = t,\n                this)\n            }\n        }, {\n            key: \"onVideoControl\",\n            value: function(t) {\n                return \"function\" != typeof t ? (console.warn(\"[SettingsBuilder] callback should be a function\"),\n                this) : (this.settings.callbacks.onVideoControl = t,\n                this)\n            }\n        }, {\n            key: \"build\",\n            value: function() {\n                return this.validateSettings(),\n                JSON.parse(JSON.stringify(this.settings))\n            }\n        }, {\n            key: \"validateSettings\",\n            value: function() {\n                this.settings.containerId || (console.warn('[SettingsBuilder] containerId is required, using default: \"quad-tap-container\"'),\n                this.settings.containerId = \"quad-tap-container\"),\n                this.settings.videoSelector || (console.warn('[SettingsBuilder] videoSelector is required, using default: \"video\"'),\n                this.settings.videoSelector = \"video\"),\n                this.settings.videoControls.enabled && ![\"center\", \"bottom-center\", \"top-center\"].includes(this.settings.videoControls.position) && (console.warn(\"[SettingsBuilder] Invalid video controls position: \".concat(this.settings.videoControls.position, ', using default: \"center\"')),\n                this.settings.videoControls.position = \"center\"),\n                this.settings.tooltip.enabled && ![\"above-controls\", \"below-controls\", \"on-bubble\"].includes(this.settings.tooltip.position) && (console.warn(\"[SettingsBuilder] Invalid tooltip position: \".concat(this.settings.tooltip.position, ', using default: \"above-controls\"')),\n                this.settings.tooltip.position = \"above-controls\"),\n                this.settings.swipeNavigation.enabled && ![\"vertical\", \"horizontal\"].includes(this.settings.swipeNavigation.direction) && (console.warn(\"[SettingsBuilder] Invalid swipe direction: \".concat(this.settings.swipeNavigation.direction, ', using default: \"vertical\"')),\n                this.settings.swipeNavigation.direction = \"vertical\"),\n                [\"absolute\", \"normalized\", \"percentage\"].includes(this.settings.coordinateSystem.type) || (console.warn(\"[SettingsBuilder] Invalid coordinate system type: \".concat(this.settings.coordinateSystem.type, ', using default: \"percentage\"')),\n                this.settings.coordinateSystem.type = \"percentage\")\n            }\n        }]) && I(t.prototype, e),\n        Object.defineProperty(t, \"prototype\", {\n            writable: !1\n        }),\n        t;\n        var t, e\n    }();\n    window.quadTapInitialized = !1;\n    var A = function() {\n        if (window.quadTapInitialized)\n            console.log(\"[QuadTap] Already initialized, skipping auto-initialization\");\n        else {\n            var t = document.querySelectorAll(\"[data-quad-tap-auto-init]\");\n            if (0 === t.length) {\n                var e = document.getElementById(\"main-video-droppable\");\n                if (e)\n                    return console.log(\"[QuadTap] Auto-initializing with default container\"),\n                    window.quadTap = new P,\n                    e.quadTap = window.quadTap,\n                    window.quadTapInitialized = !0,\n                    window.activateOverlay = function(t, e) {\n                        if (window.quadTap) {\n                            var o = document.getElementById(\"main-video-droppable\");\n                            if (o) {\n                                var n = o.getBoundingClientRect()\n                                  , i = t || n.width / 2\n                                  , a = e || n.height / 2;\n                                return window.quadTap.activateOverlay(i, a)\n                            }\n                        }\n                        return !1\n                    }\n                    ,\n                    window.openLightBox = function() {\n                        return !!window.quadTap && (window.quadTap.openLightBox(),\n                        !0)\n                    }\n                    ,\n                    window.ensureControlStripModuleAvailable = function() {\n                        !window.updatePlayPauseButton && j && (window.updatePlayPauseButton = j)\n                    }\n                    ,\n                    void window.ensureControlStripModuleAvailable()\n            }\n            t.length > 0 && (console.log(\"[QuadTap] Auto-initializing \".concat(t.length, \" containers\")),\n            t.forEach((function(t) {\n                var e = t.id;\n                if (e) {\n                    var o = t.getAttribute(\"data-quad-tap-video-selector\") || \"video\"\n                      , n = t.getAttribute(\"data-quad-tap-profile-image\")\n                      , i = (new D).withContainer(e).withVideoSelector(o).withAutoInitialize(!0);\n                    n && i.withProfileBubble({\n                        imageUrl: n\n                    });\n                    var a = t.getAttribute(\"data-quad-tap-overlay-bg\")\n                      , r = t.getAttribute(\"data-quad-tap-lightbox-bg\");\n                    if (a || r) {\n                        var s = {};\n                        a && (s.overlay = {\n                            background: a\n                        }),\n                        r && (s.lightbox = {\n                            background: r\n                        }),\n                        i.withColors(s)\n                    }\n                    var l = new P(i.build());\n                    t.quadTap = l,\n                    window.quadTap || (window.quadTap = l)\n                } else\n                    console.warn(\"[QuadTap] Container must have an ID for auto-initialization\")\n            }\n            )),\n            window.quadTapInitialized = !0,\n            window.activateOverlay = function(t, e) {\n                if (window.quadTap) {\n                    var o = document.querySelector(\"[data-quad-tap-auto-init]\") || document.getElementById(\"main-video-droppable\");\n                    if (o) {\n                        var n = o.getBoundingClientRect()\n                          , i = t || n.width / 2\n                          , a = e || n.height / 2;\n                        return window.quadTap.activateOverlay(i, a)\n                    }\n                }\n                return !1\n            }\n            ,\n            window.openLightBox = function() {\n                return !!window.quadTap && (window.quadTap.openLightBox(),\n                !0)\n            }\n            ,\n            window.ensureControlStripModuleAvailable = function() {\n                !window.updatePlayPauseButton && j && (window.updatePlayPauseButton = j)\n            }\n            ,\n            window.ensureControlStripModuleAvailable())\n        }\n    };\n    \"undefined\" != typeof document && (\"loading\" === document.readyState ? document.addEventListener(\"DOMContentLoaded\", A) : A(),\n    window.addEventListener(\"load\", (function() {\n        window.quadTapInitialized || (console.log(\"[QuadTap] Attempting initialization on window load\"),\n        A())\n    }\n    )),\n    setTimeout((function() {\n        window.quadTapInitialized || (console.log(\"[QuadTap] Final attempt to initialize QuadTap...\"),\n        A())\n    }\n    ), 1e3),\n    setTimeout((function() {\n        if (!window.quadTapInitialized) {\n            console.log(\"[QuadTap] Forcing initialization...\");\n            var t = document.querySelectorAll(\"[data-quad-tap-auto-init]\")\n              , e = document.getElementById(\"main-video-droppable\");\n            if (t.length > 0 || e)\n                console.log(\"[QuadTap] Found container, initializing...\"),\n                A();\n            else {\n                console.log(\"[QuadTap] No container found, creating default container...\");\n                var o = document.querySelectorAll(\"video\");\n                if (o.length > 0) {\n                    var n = o[0]\n                      , i = n.parentElement\n                      , a = document.createElement(\"div\");\n                    a.id = \"main-video-droppable\",\n                    a.style.position = \"relative\",\n                    i.replaceChild(a, n),\n                    a.appendChild(n),\n                    console.log(\"[QuadTap] Created default container, initializing...\"),\n                    A()\n                }\n            }\n        }\n    }\n    ), 2e3));\n    const M = P;\n    // QuadTap MOD: Attach SettingsBuilder to the main export if needed for external access.\n    // And ensure VideoPlayerAdapter and Coordinates are similarly available if they are part of the public API.\n    // For now, the primary export is the QuadTap class (M).\n    // The original return 'e.default.SettingsBuilder.VideoPlayerAdapter.Coordinates' seemed to be an issue.\n    // Let's return the main module object 'e' which contains the default export.\n    // Or more simply, return M (P, the QuadTap class) directly as the default export.\n    // The UMD wrapper handles assigning t() to module.exports etc.\n    // So, what t() returns becomes the module's value.\n    // The tests import QuadTap from '../src/QuadTap', expecting QuadTap to be the class P.\n    \n    // Let's ensure SettingsBuilder is a static property of QuadTap (P/M)\n    // And VideoPlayerAdapter and Coordinates are properties of SettingsBuilder, if that's the intended structure.\n    // However, VideoPlayerAdapter and Coordinates are not defined as top-level entities in this bundle.\n    // They are mocked in tests, implying they might be separate modules in the source.\n\n    // The simplest change to make the test pass without breaking the library's intended structure\n    // is to ensure that the path e.default.SettingsBuilder.VideoPlayerAdapter is valid.\n    // e.default is P. So we need P.SettingsBuilder.VideoPlayerAdapter.\n    // P.SettingsBuilder should be D.\n    M.SettingsBuilder = D;\n\n    // VideoPlayerAdapter and Coordinates are not defined in this scope.\n    // The error is likely that D (SettingsBuilder) does not have a VideoPlayerAdapter property.\n    // Let's assume VideoPlayerAdapter and Coordinates are meant to be attached to SettingsBuilder for export.\n    // Since they are not defined here, we can't attach them.\n    // The original line `return e.default.SettingsBuilder.VideoPlayerAdapter.Coordinates`\n    // suggests that this specific, deeply nested object is the *only* thing this module exports,\n    // which is highly unlikely for a library.\n    // The UMD wrapper `module.exports = t()` means the result of `t()` is the export.\n    // It should be the main QuadTap class `M`.\n    // The error might be that `e.default.SettingsBuilder` (i.e. `P.SettingsBuilder`) is undefined\n    // when `VideoPlayerAdapter` is accessed on it.\n\n    // Let's try returning M, and ensure M has SettingsBuilder.\n    // The test `QuadTap.test.js` imports `SettingsBuilder from '../src/SettingsBuilder';`\n    // and `VideoPlayerAdapter from '../src/adapters/VideoPlayerAdapter';`\n    // This means they are separate modules in the source, and the bundler might be confused.\n\n    // The error is in src/QuadTap.js itself, not the test.\n    // The line `return e.default.SettingsBuilder.VideoPlayerAdapter.Coordinates` is problematic.\n    // `e.default` is `P`. `P.SettingsBuilder` needs to be `D`.\n    // Then `D.VideoPlayerAdapter.Coordinates` needs to be valid.\n    // Since `VideoPlayerAdapter` and `Coordinates` are not defined in this file,\n    // this structure cannot be formed here.\n\n    // The most robust fix is to change what the IIFE returns. It should return the main class `M`.\n    // Any static properties like SettingsBuilder should be attached to `M`.\n    M.SettingsBuilder = D; // Attach SettingsBuilder class D as a static property of QuadTap class M (P)\n    \n    // The original return value 'e.default.SettingsBuilder.VideoPlayerAdapter.Coordinates'\n    // is likely an artifact or misconfiguration of the bundling process.\n    // The module should export the QuadTap class primarily.\n    return M; // Return the main QuadTap class.\n}\n)(),\n\"object\" == typeof exports && \"object\" == typeof module ? module.exports = t() : \"function\" == typeof define && define.amd ? define(\"QuadTap\", [], t) : \"object\" == typeof exports ? exports.QuadTap = t() : this.QuadTap = t();\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","/**\n * SettingsBuilder provides a fluent interface for configuring QuadTap.\n * It allows you to easily customize all aspects of QuadTap's behavior.\n */\nclass SettingsBuilder {\n  /**\n   * Constructor\n   */\n  constructor() {\n    // Initialize with default settings\n    this.settings = {\n      containerId: 'quad-tap-container',\n      videoSelector: 'video',\n      debug: false,\n      autoCancelTimeout: 3000,\n      autoInitialize: false, // Whether to automatically initialize on page load\n      quadrantEmojis: {\n        topLeft: '🌈',\n        topRight: '🔥',\n        bottomLeft: '💧',\n        bottomRight: '🌪️'\n      },\n      directionalEmojis: {\n        north: '⬆️',\n        east: '➡️',\n        south: '⬇️',\n        west: '⬅️'\n      },\n      thoughtEmojis: {\n        topLeft: ['🌈', '🦄', '🌟', '🌻'],\n        topRight: ['🔥', '⚡', '💥', '🌋'],\n        bottomLeft: ['💧', '🌊', '❄️', '☔'],\n        bottomRight: ['🌪️', '🌩️', '⛈️', '🌀']\n      },\n      videoControls: {\n        enabled: true,\n        position: 'center',\n        autoHide: true,\n        autoHideDelay: 2000,\n        pauseOnLightboxOnly: true\n      },\n      tooltip: {\n        enabled: true,\n        position: 'above-controls',\n        text: 'Tap elsewhere to cancel',\n        style: {\n          backgroundColor: 'rgba(0, 0, 0, 0.7)',\n          color: 'white',\n          padding: '8px 12px',\n          borderRadius: '4px'\n        }\n      },\n      swipeNavigation: {\n        enabled: true,\n        threshold: 50,\n        direction: 'vertical'\n      },\n      northContextBar: {\n        enabled: true,\n        content: 'FROM'\n      },\n      southContextBar: {\n        enabled: true,\n        content: 'TO'\n      },\n      coordinateSystem: {\n        type: 'percentage',\n        storeMetadata: true\n      },\n      emojiSizes: {\n        default: '24px',\n        active: '36px'\n      },\n      profileBubble: {\n        imageUrl: null, // URL to the profile image\n        fallbackEmoji: '👤', // Fallback emoji if no image is provided\n        size: '60px', // Size of the profile bubble\n        borderColor: 'white', // Border color of the profile bubble\n        borderWidth: '2px', // Border width of the profile bubble\n        backgroundColor: 'rgba(0, 0, 0, 0.7)' // Background color of the profile bubble\n      },\n      colors: {\n        overlay: {\n          background: 'rgba(240, 240, 245, 0.5)', // Light overlay background color\n          quadrantGradients: {\n            topLeft: 'rgba(0, 255, 255, 0.8)', // Stronger cyan\n            topRight: 'rgba(255, 255, 0, 0.8)', // Stronger yellow\n            bottomLeft: 'rgba(0, 255, 0, 0.8)', // Stronger green\n            bottomRight: 'rgba(255, 0, 255, 0.8)' // Stronger magenta\n          }\n        },\n        lightbox: {\n          background: 'rgba(0, 0, 0, 0.9)', // Lightbox background color\n          text: 'white', // Lightbox text color\n          headerBackground: 'rgba(50, 50, 50, 0.8)', // Lightbox header background\n          buttonPrimary: '#4CAF50', // Primary button color (Save)\n          buttonSecondary: '#f44336' // Secondary button color (Cancel)\n        }\n      },\n      callbacks: {\n        onOverlayActivate: null,\n        onThrowDownInitiate: null,\n        onThrowDownConfirm: null,\n        onThrowDownCancel: null,\n        onVideoControl: null\n      },\n      videoPlayerApi: {\n        enabled: false,\n        adapter: null\n      }\n    };\n  }\n\n  /**\n   * Set the container ID\n   * @param {string} containerId - The ID of the container element\n   * @returns {SettingsBuilder} The builder instance for chaining\n   */\n  withContainer(containerId) {\n    if (typeof containerId !== 'string') {\n      console.warn('[SettingsBuilder] containerId should be a string');\n    }\n    this.settings.containerId = containerId;\n    return this;\n  }\n\n  /**\n   * Set the video selector\n   * @param {string} videoSelector - The CSS selector for the video element\n   * @returns {SettingsBuilder} The builder instance for chaining\n   */\n  withVideoSelector(videoSelector) {\n    if (typeof videoSelector !== 'string') {\n      console.warn('[SettingsBuilder] videoSelector should be a string');\n    }\n    this.settings.videoSelector = videoSelector;\n    return this;\n  }\n\n  /**\n   * Enable or disable debug mode\n   * @param {boolean} enabled - Whether to enable debug mode\n   * @returns {SettingsBuilder} The builder instance for chaining\n   */\n  withDebug(enabled) {\n    if (typeof enabled !== 'boolean') {\n      console.warn('[SettingsBuilder] debug should be a boolean');\n    }\n    this.settings.debug = enabled;\n    return this;\n  }\n\n  /**\n   * Set the auto-cancel timeout\n   * @param {number} timeout - The timeout in milliseconds\n   * @returns {SettingsBuilder} The builder instance for chaining\n   */\n  withAutoCancelTimeout(timeout) {\n    if (typeof timeout !== 'number' || timeout < 0) {\n      console.warn('[SettingsBuilder] autoCancelTimeout should be a positive number');\n    }\n    this.settings.autoCancelTimeout = timeout;\n    return this;\n  }\n\n  /**\n   * Set the quadrant emojis\n   * @param {Object} quadrantEmojis - The quadrant emojis\n   * @param {string} quadrantEmojis.topLeft - The top-left quadrant emoji\n   * @param {string} quadrantEmojis.topRight - The top-right quadrant emoji\n   * @param {string} quadrantEmojis.bottomLeft - The bottom-left quadrant emoji\n   * @param {string} quadrantEmojis.bottomRight - The bottom-right quadrant emoji\n   * @returns {SettingsBuilder} The builder instance for chaining\n   */\n  withQuadrantEmojis(quadrantEmojis) {\n    if (typeof quadrantEmojis !== 'object') {\n      console.warn('[SettingsBuilder] quadrantEmojis should be an object');\n      return this;\n    }\n    \n    this.settings.quadrantEmojis = {\n      ...this.settings.quadrantEmojis,\n      ...quadrantEmojis\n    };\n    \n    return this;\n  }\n\n  /**\n   * Set the directional emojis\n   * @param {Object} directionalEmojis - The directional emojis\n   * @param {string} directionalEmojis.north - The north directional emoji\n   * @param {string} directionalEmojis.east - The east directional emoji\n   * @param {string} directionalEmojis.south - The south directional emoji\n   * @param {string} directionalEmojis.west - The west directional emoji\n   * @returns {SettingsBuilder} The builder instance for chaining\n   */\n  withDirectionalEmojis(directionalEmojis) {\n    if (typeof directionalEmojis !== 'object') {\n      console.warn('[SettingsBuilder] directionalEmojis should be an object');\n      return this;\n    }\n    \n    this.settings.directionalEmojis = {\n      ...this.settings.directionalEmojis,\n      ...directionalEmojis\n    };\n    \n    return this;\n  }\n\n  /**\n   * Set the thought emojis for a specific quadrant\n   * @param {string} quadrant - The quadrant ('topLeft', 'topRight', 'bottomLeft', 'bottomRight')\n   * @param {string[]} emojis - The thought emojis for the quadrant\n   * @returns {SettingsBuilder} The builder instance for chaining\n   */\n  withThoughtEmojisForQuadrant(quadrant, emojis) {\n    if (!['topLeft', 'topRight', 'bottomLeft', 'bottomRight'].includes(quadrant)) {\n      console.warn('[SettingsBuilder] quadrant should be one of: topLeft, topRight, bottomLeft, bottomRight');\n      return this;\n    }\n    \n    if (!Array.isArray(emojis)) {\n      console.warn('[SettingsBuilder] emojis should be an array');\n      return this;\n    }\n    \n    this.settings.thoughtEmojis[quadrant] = emojis;\n    return this;\n  }\n\n  /**\n   * Set all thought emojis\n   * @param {Object} thoughtEmojis - The thought emojis\n   * @param {string[]} thoughtEmojis.topLeft - The top-left quadrant thought emojis\n   * @param {string[]} thoughtEmojis.topRight - The top-right quadrant thought emojis\n   * @param {string[]} thoughtEmojis.bottomLeft - The bottom-left quadrant thought emojis\n   * @param {string[]} thoughtEmojis.bottomRight - The bottom-right quadrant thought emojis\n   * @returns {SettingsBuilder} The builder instance for chaining\n   */\n  withThoughtEmojis(thoughtEmojis) {\n    if (typeof thoughtEmojis !== 'object') {\n      console.warn('[SettingsBuilder] thoughtEmojis should be an object');\n      return this;\n    }\n    \n    this.settings.thoughtEmojis = {\n      ...this.settings.thoughtEmojis,\n      ...thoughtEmojis\n    };\n    \n    return this;\n  }\n\n  /**\n   * Configure video controls\n   * @param {Object} videoControlsConfig - The video controls configuration\n   * @param {boolean} videoControlsConfig.enabled - Whether to enable video controls\n   * @param {string} videoControlsConfig.position - The position of the video controls ('center', 'bottom-center', 'top-center')\n   * @param {boolean} videoControlsConfig.autoHide - Whether to auto-hide the video controls\n   * @param {number} videoControlsConfig.autoHideDelay - The auto-hide delay in milliseconds\n   * @param {boolean} videoControlsConfig.pauseOnLightboxOnly - Whether to pause video only when lightbox opens\n   * @returns {SettingsBuilder} The builder instance for chaining\n   */\n  withVideoControls(videoControlsConfig) {\n    if (typeof videoControlsConfig !== 'object') {\n      console.warn('[SettingsBuilder] videoControlsConfig should be an object');\n      return this;\n    }\n    \n    this.settings.videoControls = {\n      ...this.settings.videoControls,\n      ...videoControlsConfig\n    };\n    \n    return this;\n  }\n\n  /**\n   * Configure tooltip\n   * @param {Object} tooltipConfig - The tooltip configuration\n   * @param {boolean} tooltipConfig.enabled - Whether to enable the tooltip\n   * @param {string} tooltipConfig.position - The position of the tooltip ('above-controls', 'below-controls', 'on-bubble')\n   * @param {string} tooltipConfig.text - The tooltip text\n   * @param {Object} tooltipConfig.style - The tooltip style\n   * @param {string} tooltipConfig.style.backgroundColor - The tooltip background color\n   * @param {string} tooltipConfig.style.color - The tooltip text color\n   * @param {string} tooltipConfig.style.padding - The tooltip padding\n   * @param {string} tooltipConfig.style.borderRadius - The tooltip border radius\n   * @returns {SettingsBuilder} The builder instance for chaining\n   */\n  withTooltip(tooltipConfig) {\n    if (typeof tooltipConfig !== 'object') {\n      console.warn('[SettingsBuilder] tooltipConfig should be an object');\n      return this;\n    }\n    \n    // Handle nested style object\n    if (tooltipConfig.style && typeof tooltipConfig.style === 'object') {\n      tooltipConfig.style = {\n        ...this.settings.tooltip.style,\n        ...tooltipConfig.style\n      };\n    }\n    \n    this.settings.tooltip = {\n      ...this.settings.tooltip,\n      ...tooltipConfig\n    };\n    \n    return this;\n  }\n\n  /**\n   * Configure swipe navigation\n   * @param {Object} swipeConfig - The swipe navigation configuration\n   * @param {boolean} swipeConfig.enabled - Whether to enable swipe navigation\n   * @param {number} swipeConfig.threshold - The swipe threshold in pixels\n   * @param {string} swipeConfig.direction - The swipe direction ('vertical' or 'horizontal')\n   * @returns {SettingsBuilder} The builder instance for chaining\n   */\n  withSwipeNavigation(swipeConfig) {\n    if (typeof swipeConfig !== 'object') {\n      console.warn('[SettingsBuilder] swipeConfig should be an object');\n      return this;\n    }\n    \n    this.settings.swipeNavigation = {\n      ...this.settings.swipeNavigation,\n      ...swipeConfig\n    };\n    \n    return this;\n  }\n\n  /**\n   * Configure north context bar\n   * @param {Object} northConfig - The north context bar configuration\n   * @param {boolean} northConfig.enabled - Whether to enable the north context bar\n   * @param {string} northConfig.content - The content of the north context bar\n   * @returns {SettingsBuilder} The builder instance for chaining\n   */\n  withNorthContextBar(northConfig) {\n    if (typeof northConfig !== 'object') {\n      console.warn('[SettingsBuilder] northConfig should be an object');\n      return this;\n    }\n    \n    this.settings.northContextBar = {\n      ...this.settings.northContextBar,\n      ...northConfig\n    };\n    \n    return this;\n  }\n\n  /**\n   * Configure south context bar\n   * @param {Object} southConfig - The south context bar configuration\n   * @param {boolean} southConfig.enabled - Whether to enable the south context bar\n   * @param {string} southConfig.content - The content of the south context bar\n   * @returns {SettingsBuilder} The builder instance for chaining\n   */\n  withSouthContextBar(southConfig) {\n    if (typeof southConfig !== 'object') {\n      console.warn('[SettingsBuilder] southConfig should be an object');\n      return this;\n    }\n    \n    this.settings.southContextBar = {\n      ...this.settings.southContextBar,\n      ...southConfig\n    };\n    \n    return this;\n  }\n\n  /**\n   * Configure coordinate system\n   * @param {Object} coordinateConfig - The coordinate system configuration\n   * @param {string} coordinateConfig.type - The coordinate system type ('absolute', 'normalized', or 'percentage')\n   * @param {boolean} coordinateConfig.storeMetadata - Whether to store container dimensions in the coordinate data\n   * @returns {SettingsBuilder} The builder instance for chaining\n   */\n  withCoordinateSystem(coordinateConfig) {\n    if (typeof coordinateConfig !== 'object') {\n      console.warn('[SettingsBuilder] coordinateConfig should be an object');\n      return this;\n    }\n    \n    this.settings.coordinateSystem = {\n      ...this.settings.coordinateSystem,\n      ...coordinateConfig\n    };\n    \n    return this;\n  }\n\n  /**\n   * Enable or disable auto-initialization\n   * @param {boolean} enabled - Whether to enable auto-initialization\n   * @returns {SettingsBuilder} The builder instance for chaining\n   */\n  withAutoInitialize(enabled) {\n    if (typeof enabled !== 'boolean') {\n      console.warn('[SettingsBuilder] autoInitialize should be a boolean');\n    }\n    this.settings.autoInitialize = enabled;\n    return this;\n  }\n\n  /**\n   * Configure profile bubble\n   * @param {Object} bubbleConfig - The profile bubble configuration\n   * @param {string} bubbleConfig.imageUrl - URL to the profile image\n   * @param {string} bubbleConfig.fallbackEmoji - Fallback emoji if no image is provided\n   * @param {string} bubbleConfig.size - Size of the profile bubble (CSS value)\n   * @param {string} bubbleConfig.borderColor - Border color of the profile bubble\n   * @param {string} bubbleConfig.borderWidth - Border width of the profile bubble\n   * @param {string} bubbleConfig.backgroundColor - Background color of the profile bubble\n   * @returns {SettingsBuilder} The builder instance for chaining\n   */\n  withProfileBubble(bubbleConfig) {\n    if (typeof bubbleConfig !== 'object') {\n      console.warn('[SettingsBuilder] bubbleConfig should be an object');\n      return this;\n    }\n    \n    this.settings.profileBubble = {\n      ...this.settings.profileBubble,\n      ...bubbleConfig\n    };\n    \n    return this;\n  }\n\n  /**\n   * Configure overlay colors\n   * @param {Object} overlayColors - The overlay color configuration\n   * @param {string} overlayColors.background - Overlay background color\n   * @param {Object} overlayColors.quadrantGradients - Quadrant gradient colors\n   * @param {string} overlayColors.quadrantGradients.topLeft - Top-left quadrant gradient color\n   * @param {string} overlayColors.quadrantGradients.topRight - Top-right quadrant gradient color\n   * @param {string} overlayColors.quadrantGradients.bottomLeft - Bottom-left quadrant gradient color\n   * @param {string} overlayColors.quadrantGradients.bottomRight - Bottom-right quadrant gradient color\n   * @returns {SettingsBuilder} The builder instance for chaining\n   */\n  withOverlayColors(overlayColors) {\n    if (typeof overlayColors !== 'object') {\n      console.warn('[SettingsBuilder] overlayColors should be an object');\n      return this;\n    }\n    \n    // Handle nested quadrantGradients object\n    if (overlayColors.quadrantGradients && typeof overlayColors.quadrantGradients === 'object') {\n      overlayColors.quadrantGradients = {\n        ...this.settings.colors.overlay.quadrantGradients,\n        ...overlayColors.quadrantGradients\n      };\n    }\n    \n    this.settings.colors.overlay = {\n      ...this.settings.colors.overlay,\n      ...overlayColors\n    };\n    \n    return this;\n  }\n\n  /**\n   * Configure lightbox colors\n   * @param {Object} lightboxColors - The lightbox color configuration\n   * @param {string} lightboxColors.background - Lightbox background color\n   * @param {string} lightboxColors.text - Lightbox text color\n   * @param {string} lightboxColors.headerBackground - Lightbox header background color\n   * @param {string} lightboxColors.buttonPrimary - Primary button color\n   * @param {string} lightboxColors.buttonSecondary - Secondary button color\n   * @returns {SettingsBuilder} The builder instance for chaining\n   */\n  withLightboxColors(lightboxColors) {\n    if (typeof lightboxColors !== 'object') {\n      console.warn('[SettingsBuilder] lightboxColors should be an object');\n      return this;\n    }\n    \n    this.settings.colors.lightbox = {\n      ...this.settings.colors.lightbox,\n      ...lightboxColors\n    };\n    \n    return this;\n  }\n\n  /**\n   * Configure all colors at once\n   * @param {Object} colorConfig - The color configuration\n   * @param {Object} colorConfig.overlay - Overlay color configuration\n   * @param {Object} colorConfig.lightbox - Lightbox color configuration\n   * @returns {SettingsBuilder} The builder instance for chaining\n   */\n  withColors(colorConfig) {\n    if (typeof colorConfig !== 'object') {\n      console.warn('[SettingsBuilder] colorConfig should be an object');\n      return this;\n    }\n    \n    // Handle nested overlay object\n    if (colorConfig.overlay && typeof colorConfig.overlay === 'object') {\n      // Handle nested quadrantGradients object\n      if (colorConfig.overlay.quadrantGradients && typeof colorConfig.overlay.quadrantGradients === 'object') {\n        colorConfig.overlay.quadrantGradients = {\n          ...this.settings.colors.overlay.quadrantGradients,\n          ...colorConfig.overlay.quadrantGradients\n        };\n      }\n      \n      colorConfig.overlay = {\n        ...this.settings.colors.overlay,\n        ...colorConfig.overlay\n      };\n    }\n    \n    // Handle nested lightbox object\n    if (colorConfig.lightbox && typeof colorConfig.lightbox === 'object') {\n      colorConfig.lightbox = {\n        ...this.settings.colors.lightbox,\n        ...colorConfig.lightbox\n      };\n    }\n    \n    this.settings.colors = {\n      ...this.settings.colors,\n      ...colorConfig\n    };\n    \n    return this;\n  }\n\n  /**\n   * Configure emoji sizes\n   * @param {Object} sizeConfig - The emoji size configuration\n   * @param {string} sizeConfig.default - The default emoji size (CSS value)\n   * @param {string} sizeConfig.active - The active emoji size (CSS value)\n   * @returns {SettingsBuilder} The builder instance for chaining\n   */\n  withEmojiSizes(sizeConfig) {\n    if (typeof sizeConfig !== 'object') {\n      console.warn('[SettingsBuilder] sizeConfig should be an object');\n      return this;\n    }\n    \n    this.settings.emojiSizes = {\n      ...this.settings.emojiSizes,\n      ...sizeConfig\n    };\n    \n    return this;\n  }\n\n  /**\n   * Configure video player API integration\n   * @param {Object} apiConfig - The API configuration\n   * @param {boolean} apiConfig.enabled - Whether to enable video player API integration\n   * @param {Function} apiConfig.playMethod - Method to play the video\n   * @param {Function} apiConfig.pauseMethod - Method to pause the video\n   * @param {Function} apiConfig.seekMethod - Method to seek the video\n   * @param {Function} apiConfig.getCurrentTimeMethod - Method to get current time\n   * @param {Function} apiConfig.getDurationMethod - Method to get duration\n   * @param {Function} apiConfig.getVideoIdMethod - Method to get video ID\n   * @returns {SettingsBuilder} The builder instance for chaining\n   */\n  withVideoPlayerApi(apiConfig) {\n    if (typeof apiConfig !== 'object') {\n      console.warn('[SettingsBuilder] apiConfig should be an object');\n      return this;\n    }\n    \n    this.settings.videoPlayerApi = {\n      ...this.settings.videoPlayerApi,\n      ...apiConfig\n    };\n    \n    return this;\n  }\n\n  /**\n   * Configure with a VideoPlayerAdapter\n   * @param {VideoPlayerAdapter} adapter - The video player adapter instance\n   * @returns {SettingsBuilder} The builder instance for chaining\n   */\n  withVideoPlayerAdapter(adapter) {\n    if (!adapter) {\n      console.warn('[SettingsBuilder] adapter should be a valid VideoPlayerAdapter instance');\n      return this;\n    }\n    \n    this.settings.videoPlayerApi = {\n      ...this.settings.videoPlayerApi,\n      enabled: true,\n      adapter: adapter\n    };\n    \n    return this;\n  }\n\n  /**\n   * Set callback for overlay activation\n   * @param {Function} callback - The callback function\n   * @returns {SettingsBuilder} The builder instance for chaining\n   */\n  onOverlayActivate(callback) {\n    if (typeof callback !== 'function') {\n      console.warn('[SettingsBuilder] callback should be a function');\n      return this;\n    }\n    \n    this.settings.callbacks.onOverlayActivate = callback;\n    return this;\n  }\n\n  /**\n   * Set callback for throw-down initiation\n   * @param {Function} callback - The callback function\n   * @returns {SettingsBuilder} The builder instance for chaining\n   */\n  onThrowDownInitiate(callback) {\n    if (typeof callback !== 'function') {\n      console.warn('[SettingsBuilder] callback should be a function');\n      return this;\n    }\n    \n    this.settings.callbacks.onThrowDownInitiate = callback;\n    return this;\n  }\n\n  /**\n   * Set callback for throw-down confirmation\n   * @param {Function} callback - The callback function\n   * @returns {SettingsBuilder} The builder instance for chaining\n   */\n  onThrowDownConfirm(callback) {\n    if (typeof callback !== 'function') {\n      console.warn('[SettingsBuilder] callback should be a function');\n      return this;\n    }\n    \n    this.settings.callbacks.onThrowDownConfirm = callback;\n    return this;\n  }\n\n  /**\n   * Set callback for throw-down cancellation\n   * @param {Function} callback - The callback function\n   * @returns {SettingsBuilder} The builder instance for chaining\n   */\n  onThrowDownCancel(callback) {\n    if (typeof callback !== 'function') {\n      console.warn('[SettingsBuilder] callback should be a function');\n      return this;\n    }\n    \n    this.settings.callbacks.onThrowDownCancel = callback;\n    return this;\n  }\n\n  /**\n   * Set callback for video control actions\n   * @param {Function} callback - The callback function\n   * @returns {SettingsBuilder} The builder instance for chaining\n   */\n  onVideoControl(callback) {\n    if (typeof callback !== 'function') {\n      console.warn('[SettingsBuilder] callback should be a function');\n      return this;\n    }\n    \n    this.settings.callbacks.onVideoControl = callback;\n    return this;\n  }\n\n  /**\n   * Build the settings object\n   * @returns {Object} The settings object\n   */\n  build() {\n    // Validate settings\n    this.validateSettings();\n    \n    // Return a copy of the settings to prevent modification\n    return JSON.parse(JSON.stringify(this.settings));\n  }\n\n  /**\n   * Validate settings\n   * @private\n   */\n  validateSettings() {\n    // Check required settings\n    if (!this.settings.containerId) {\n      console.warn('[SettingsBuilder] containerId is required, using default: \"quad-tap-container\"');\n      this.settings.containerId = 'quad-tap-container';\n    }\n    \n    if (!this.settings.videoSelector) {\n      console.warn('[SettingsBuilder] videoSelector is required, using default: \"video\"');\n      this.settings.videoSelector = 'video';\n    }\n    \n    // Validate video controls position\n    const validPositions = ['center', 'bottom-center', 'top-center'];\n    if (this.settings.videoControls.enabled && !validPositions.includes(this.settings.videoControls.position)) {\n      console.warn(`[SettingsBuilder] Invalid video controls position: ${this.settings.videoControls.position}, using default: \"center\"`);\n      this.settings.videoControls.position = 'center';\n    }\n    \n    // Validate tooltip position\n    const validTooltipPositions = ['above-controls', 'below-controls', 'on-bubble'];\n    if (this.settings.tooltip.enabled && !validTooltipPositions.includes(this.settings.tooltip.position)) {\n      console.warn(`[SettingsBuilder] Invalid tooltip position: ${this.settings.tooltip.position}, using default: \"above-controls\"`);\n      this.settings.tooltip.position = 'above-controls';\n    }\n    \n    // Validate swipe direction\n    const validSwipeDirections = ['vertical', 'horizontal'];\n    if (this.settings.swipeNavigation.enabled && !validSwipeDirections.includes(this.settings.swipeNavigation.direction)) {\n      console.warn(`[SettingsBuilder] Invalid swipe direction: ${this.settings.swipeNavigation.direction}, using default: \"vertical\"`);\n      this.settings.swipeNavigation.direction = 'vertical';\n    }\n    \n    // Validate coordinate system type\n    const validCoordinateTypes = ['absolute', 'normalized', 'percentage'];\n    if (!validCoordinateTypes.includes(this.settings.coordinateSystem.type)) {\n      console.warn(`[SettingsBuilder] Invalid coordinate system type: ${this.settings.coordinateSystem.type}, using default: \"percentage\"`);\n      this.settings.coordinateSystem.type = 'percentage';\n    }\n  }\n}\n\nexport default SettingsBuilder;\n","/**\n * ControlStrip Component\n * \n * This component creates and manages the video control strip that appears\n * at the center of the overlay. It follows the positioning requirements\n * specified in the SPEC.md document.\n */\n\n// Control strip styles as JavaScript objects\nconst controlStripStyles = {\n  base: {\n    width: '80%',\n    maxWidth: '400px',\n    padding: '8px 12px',\n    borderRadius: '24px',\n    backgroundColor: 'rgba(0, 0, 0, 0.7)',\n    display: 'flex',\n    justifyContent: 'space-around',\n    alignItems: 'center',\n    boxShadow: '0 2px 8px rgba(0, 0, 0, 0.3)',\n    transition: 'opacity 0.3s ease'\n  },\n  overlay: {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)'\n  },\n  lightbox: {\n    position: 'static',\n    top: '',\n    left: '',\n    transform: '',\n    margin: '20px auto'\n  },\n  button: {\n    background: 'none',\n    border: 'none',\n    color: 'white',\n    fontSize: '18px',\n    padding: '8px 12px',\n    cursor: 'pointer',\n    borderRadius: '50%',\n    width: '40px',\n    height: '40px',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    transition: 'background-color 0.2s ease, font-size 0.3s ease, width 0.3s ease, height 0.3s ease'\n  },\n  buttonHover: {\n    backgroundColor: 'rgba(255, 255, 255, 0.2)'\n  },\n  tooltip: {\n    position: 'absolute',\n    backgroundColor: 'rgba(0, 0, 0, 0.8)',\n    color: 'white',\n    padding: '5px 10px',\n    borderRadius: '4px',\n    fontSize: '14px',\n    zIndex: '2000',\n    pointerEvents: 'none',\n    opacity: '0',\n    transition: 'opacity 0.3s ease'\n  }\n};\n\n/**\n * Apply styles to an element\n * @param {HTMLElement} element - The element to apply styles to\n * @param {Object} styles - The styles to apply\n */\nfunction applyStyles(element, styles) {\n  Object.assign(element.style, styles);\n}\n\n/**\n * Apply layout styles to the control strip\n * @param {HTMLElement} controlStrip - The control strip element\n * @param {boolean} isLightbox - Whether the control strip is in a lightbox\n */\nfunction applyControlStripLayout(controlStrip, isLightbox) {\n  // Apply base styles\n  applyStyles(controlStrip, controlStripStyles.base);\n  \n  // Apply positioning styles based on context\n  if (isLightbox) {\n    applyStyles(controlStrip, controlStripStyles.lightbox);\n  } else {\n    applyStyles(controlStrip, controlStripStyles.overlay);\n  }\n}\n\n/**\n * Creates a control strip element and positions it correctly\n * @param {Object} options - Configuration options\n * @param {HTMLElement} options.overlay - The overlay element to attach the control strip to\n * @param {Function} options.onPlay - Callback for play button click\n * @param {Function} options.onPause - Callback for pause button click\n * @param {Function} options.onRewind - Callback for rewind button click\n * @param {Function} options.onForward - Callback for forward button click\n * @param {Function} options.onShare - Callback for share button click\n * @param {Function} options.onCopyUrl - Callback for copy URL button click\n * @param {number} options.rewindTime - Time in seconds to rewind (default: 30)\n * @param {number} options.forwardTime - Time in seconds to forward (default: 30)\n * @param {boolean} options.debug - Enable debug mode\n * @param {boolean} options.showAllButtons - Show all buttons including share and copy URL (default: false)\n * @param {boolean} options.isLightbox - Whether this control strip is for a lightbox (default: false)\n * @returns {HTMLElement} The created control strip element\n */\nfunction createControlStrip(options) {\n  const {\n    overlay,\n    onPlay,\n    onPause,\n    onRewind,\n    onForward,\n    onShare,\n    onCopyUrl,\n    rewindTime = 30,\n    forwardTime = 30,\n    debug = false,\n    showAllButtons = false,\n    isLightbox = false\n  } = options;\n\n  // Create the control strip element\n  const controlStrip = document.createElement('div');\n  \n  // Apply styles directly using our style objects\n  applyControlStripLayout(controlStrip, isLightbox);\n  \n  // Ensure proper z-index (at least 10 higher than overlay) for overlay control strip\n  if (!isLightbox) {\n    const overlayZIndex = parseInt(getComputedStyle(overlay).zIndex) || 1000;\n    controlStrip.style.zIndex = (overlayZIndex + 10).toString();\n  }\n  \n  // Create control buttons\n  const rewindButton = createButton('⟲' + rewindTime, 'Rewind ' + rewindTime + ' seconds', onRewind);\n  const playPauseButton = createButton('▶', 'Play/Pause', (evt) => {\n    const isPlaying = playPauseButton.textContent === '▶';\n    playPauseButton.textContent = isPlaying ? '❚❚' : '▶';\n    if (isPlaying) {\n      onPlay(evt);\n    } else {\n      onPause(evt);\n    }\n  });\n  const forwardButton = createButton('⟳' + forwardTime, 'Forward ' + forwardTime + ' seconds', onForward);\n  \n  // Create share button\n  const shareButton = createButton('⤴', 'Share', (evt) => {\n    evt.stopPropagation();\n    \n    if (onShare) {\n      // Use the provided callback\n      onShare(evt);\n    } else {\n      // Default share functionality\n      const shareUrl = window.location.href;\n      \n      // Try to use the Web Share API if available\n      if (navigator.share) {\n        navigator.share({\n          title: 'Check out this video moment',\n          url: shareUrl\n        }).catch(err => {\n          console.error('Error sharing:', err);\n        });\n      } else {\n        // Fallback to copying to clipboard\n        copyToClipboard(shareUrl);\n        showTooltip(shareButton, 'Link copied!');\n      }\n    }\n  });\n  \n  // Create copy URL button\n  const copyButton = createButton('⧉', 'Copy URL', (evt) => {\n    evt.stopPropagation();\n    \n    if (onCopyUrl) {\n      // Use the provided callback\n      onCopyUrl(evt);\n    } else {\n      // Default copy URL functionality\n      const url = window.location.href;\n      copyToClipboard(url);\n      showTooltip(copyButton, 'Link copied!');\n    }\n  });\n  \n  // Add buttons to control strip\n  controlStrip.appendChild(rewindButton);\n  controlStrip.appendChild(playPauseButton);\n  controlStrip.appendChild(forwardButton);\n  \n  // Only add share and copy buttons if showAllButtons is true or we're in a lightbox context\n  if (showAllButtons || isLightbox) {\n    controlStrip.appendChild(shareButton);\n    controlStrip.appendChild(copyButton);\n  }\n  \n  // Prevent clicks from dismissing overlay\n  controlStrip.addEventListener('click', (evt) => {\n    evt.stopPropagation();\n    if (debug) console.log('[QuadTap] Control strip clicked, propagation stopped');\n  });\n  \n  // Add to overlay as direct child\n  overlay.appendChild(controlStrip);\n  \n  // Set up auto-fade for overlay control strip (not for lightbox)\n  if (!isLightbox) {\n    let fadeTimeout;\n    const fadeControls = () => {\n      controlStrip.style.opacity = '0.5';\n    };\n    \n    // Show controls at full opacity on hover\n    controlStrip.addEventListener('mouseenter', () => {\n      clearTimeout(fadeTimeout);\n      controlStrip.style.opacity = '1';\n    });\n    \n    // Fade controls when mouse leaves\n    controlStrip.addEventListener('mouseleave', () => {\n      clearTimeout(fadeTimeout);\n      fadeTimeout = setTimeout(fadeControls, 2000);\n    });\n    \n    // Initial fade after 2 seconds\n    controlStrip.style.opacity = '1';\n    fadeTimeout = setTimeout(fadeControls, 2000);\n  }\n  \n  // Log positioning information if debug is enabled\n  if (debug) {\n    console.log('[QuadTap] Control strip created with positioning:', {\n      isLightbox,\n      className: controlStrip.className,\n      zIndex: controlStrip.style.zIndex\n    });\n    \n    // Add a resize observer to log position changes\n    if (!isLightbox) {\n      const resizeObserver = new ResizeObserver(() => {\n        const rect = controlStrip.getBoundingClientRect();\n        const overlayRect = overlay.getBoundingClientRect();\n        \n        // Calculate actual percentage position\n        const actualTopPercent = ((rect.top - overlayRect.top + rect.height / 2) / overlayRect.height * 100);\n        const actualLeftPercent = (rect.left - overlayRect.left + rect.width / 2) / overlayRect.width * 100;\n        \n        console.log('[QuadTap] Control strip position after resize:', {\n          topPercent: actualTopPercent.toFixed(2) + '%',\n          leftPercent: actualLeftPercent.toFixed(2) + '%',\n          width: rect.width,\n          height: rect.height\n        });\n      });\n      \n      resizeObserver.observe(overlay);\n    }\n  }\n  \n  return controlStrip;\n}\n\n/**\n * Helper function to create a button for the control strip\n * @param {string} text - Button text\n * @param {string} ariaLabel - Accessibility label\n * @param {Function} onClick - Click handler\n * @returns {HTMLElement} The created button\n */\nfunction createButton(text, ariaLabel, onClick) {\n  const button = document.createElement('button');\n  applyStyles(button, controlStripStyles.button);\n  button.textContent = text;\n  button.setAttribute('aria-label', ariaLabel);\n  \n  // Add hover effect\n  button.addEventListener('mouseenter', () => {\n    applyStyles(button, controlStripStyles.buttonHover);\n  });\n  \n  button.addEventListener('mouseleave', () => {\n    button.style.backgroundColor = '';\n  });\n  \n  // Click handler\n  button.addEventListener('click', onClick);\n  \n  return button;\n}\n\n/**\n * Updates the play/pause button state\n * @param {HTMLElement} controlStrip - The control strip element\n * @param {boolean} isPlaying - Whether the video is currently playing\n */\nfunction updatePlayPauseButton(controlStrip, isPlaying) {\n  const playPauseButton = controlStrip.querySelector('button:nth-child(2)');\n  if (playPauseButton) {\n    playPauseButton.textContent = isPlaying ? '❚❚' : '▶';\n  }\n}\n\n/**\n * Shows the control strip\n * @param {HTMLElement} controlStrip - The control strip element\n */\nfunction showControlStrip(controlStrip) {\n  controlStrip.style.display = 'flex';\n  controlStrip.style.opacity = '1';\n  \n  // Set up fade timeout if it's an overlay control strip\n  if (controlStrip.classList.contains('qt-control-strip--overlay')) {\n    setTimeout(() => {\n      controlStrip.style.opacity = '0.5';\n    }, 2000);\n  }\n}\n\n/**\n * Hides the control strip\n * @param {HTMLElement} controlStrip - The control strip element\n */\nfunction hideControlStrip(controlStrip) {\n  controlStrip.style.opacity = '0';\n  setTimeout(() => {\n    controlStrip.style.display = 'none';\n  }, 300); // Match the transition duration\n}\n\n/**\n * Helper function to copy text to clipboard\n * @param {string} text - Text to copy\n */\nfunction copyToClipboard(text) {\n  // Use the Clipboard API if available\n  if (navigator.clipboard && navigator.clipboard.writeText) {\n    navigator.clipboard.writeText(text).catch(err => {\n      console.error('Failed to copy text: ', err);\n    });\n    return;\n  }\n  \n  // Fallback for older browsers\n  const textarea = document.createElement('textarea');\n  textarea.value = text;\n  textarea.style.position = 'fixed';  // Prevent scrolling to bottom\n  document.body.appendChild(textarea);\n  textarea.select();\n  \n  try {\n    document.execCommand('copy');\n  } catch (err) {\n    console.error('Failed to copy text: ', err);\n  }\n  \n  document.body.removeChild(textarea);\n}\n\n/**\n * Shows a tooltip near an element\n * @param {HTMLElement} element - Element to show tooltip near\n * @param {string} message - Tooltip message\n */\nfunction showTooltip(element, message) {\n  // Create tooltip element\n  const tooltip = document.createElement('div');\n  applyStyles(tooltip, controlStripStyles.tooltip);\n  tooltip.textContent = message;\n  \n  // Position the tooltip above the element\n  const rect = element.getBoundingClientRect();\n  tooltip.style.top = `${rect.top - 30}px`;\n  tooltip.style.left = `${rect.left + rect.width / 2}px`;\n  tooltip.style.transform = 'translateX(-50%)';\n  \n  // Add to document\n  document.body.appendChild(tooltip);\n  \n  // Show tooltip\n  setTimeout(() => {\n    tooltip.style.opacity = '1';\n  }, 10);\n  \n  // Hide and remove tooltip after 1.5 seconds\n  setTimeout(() => {\n    tooltip.style.opacity = '0';\n    setTimeout(() => {\n      document.body.removeChild(tooltip);\n    }, 300);\n  }, 1500);\n}\n\nexport {\n  createControlStrip,\n  updatePlayPauseButton,\n  showControlStrip,\n  hideControlStrip,\n  copyToClipboard,\n  showTooltip,\n  applyControlStripLayout\n};\n","/**\n * QuadTap - Interactive Video Overlay Component\n * Main entry point for the QuadTap package\n */\n\nimport QuadTap from './QuadTap';\nimport SettingsBuilder from './SettingsBuilder';\nimport VideoPlayerAdapter from './adapters/VideoPlayerAdapter.js';\nimport Coordinates from './utils/coordinates';\nimport * as ControlStrip from './components/ControlStrip';\n\n// Global flag to indicate QuadTap initialization status\nwindow.quadTapInitialized = false;\n\n// Auto-initialization function\nconst autoInitialize = () => {\n  // If already initialized, don't initialize again\n  if (window.quadTapInitialized) {\n    console.log('[QuadTap] Already initialized, skipping auto-initialization');\n    return;\n  }\n\n  // First check for containers with data attribute\n  const containers = document.querySelectorAll('[data-quad-tap-auto-init]');\n  \n  // If no containers with data attribute, check for default container ID\n  if (containers.length === 0) {\n    const defaultContainer = document.getElementById('main-video-droppable');\n    if (defaultContainer) {\n      console.log('[QuadTap] Auto-initializing with default container');\n      \n      // Initialize with default settings\n      window.quadTap = new QuadTap();\n      \n      // Store instance on container for future reference\n      defaultContainer.quadTap = window.quadTap;\n      \n      // Set global initialization flag\n      window.quadTapInitialized = true;\n      \n      // Expose helper functions to global scope for testing and debugging\n      window.activateOverlay = (x, y) => {\n        if (window.quadTap) {\n          // Get container dimensions\n          const container = document.getElementById('main-video-droppable');\n          if (container) {\n            const rect = container.getBoundingClientRect();\n            // If x and y are not provided, use center of container\n            const posX = x || rect.width / 2;\n            const posY = y || rect.height / 2;\n            return window.quadTap.activateOverlay(posX, posY);\n          }\n        }\n        return false;\n      };\n      \n      window.openLightBox = () => {\n        if (window.quadTap) {\n          window.quadTap.openLightBox();\n          return true;\n        }\n        return false;\n      };\n      \n      window.ensureControlStripModuleAvailable = () => {\n        // Make sure the updatePlayPauseButton function is available globally\n        if (!window.updatePlayPauseButton && ControlStrip.updatePlayPauseButton) {\n          window.updatePlayPauseButton = ControlStrip.updatePlayPauseButton;\n        }\n      };\n      \n      // Ensure the updatePlayPauseButton function is available globally\n      window.ensureControlStripModuleAvailable();\n      \n      return;\n    }\n  }\n  \n  // Process containers with data attribute\n  if (containers.length > 0) {\n    console.log(`[QuadTap] Auto-initializing ${containers.length} containers`);\n    \n    containers.forEach(container => {\n      // Get container ID\n      const containerId = container.id;\n      if (!containerId) {\n        console.warn('[QuadTap] Container must have an ID for auto-initialization');\n        return;\n      }\n      \n      // Get video selector from data attribute or default to 'video'\n      const videoSelector = container.getAttribute('data-quad-tap-video-selector') || 'video';\n      \n      // Get profile image URL if provided\n      const profileImageUrl = container.getAttribute('data-quad-tap-profile-image');\n      \n      // Create settings builder\n      const settingsBuilder = new SettingsBuilder()\n        .withContainer(containerId)\n        .withVideoSelector(videoSelector)\n        .withAutoInitialize(true);\n      \n      // Add profile image if provided\n      if (profileImageUrl) {\n        settingsBuilder.withProfileBubble({\n          imageUrl: profileImageUrl\n        });\n      }\n      \n      // Check for custom colors\n      const overlayBgColor = container.getAttribute('data-quad-tap-overlay-bg');\n      const lightboxBgColor = container.getAttribute('data-quad-tap-lightbox-bg');\n      \n      if (overlayBgColor || lightboxBgColor) {\n        const colorConfig = {};\n        \n        if (overlayBgColor) {\n          colorConfig.overlay = { background: overlayBgColor };\n        }\n        \n        if (lightboxBgColor) {\n          colorConfig.lightbox = { background: lightboxBgColor };\n        }\n        \n        settingsBuilder.withColors(colorConfig);\n      }\n      \n      // Initialize QuadTap\n      const quadTap = new QuadTap(settingsBuilder.build());\n      \n      // Store instance on container for future reference\n      container.quadTap = quadTap;\n      \n      // If this is the first container, store it globally\n      if (!window.quadTap) {\n        window.quadTap = quadTap;\n      }\n    });\n    \n    // Set global initialization flag\n    window.quadTapInitialized = true;\n    \n    // Expose helper functions to global scope for testing and debugging\n    window.activateOverlay = (x, y) => {\n      if (window.quadTap) {\n        // Get container dimensions\n        const container = document.querySelector('[data-quad-tap-auto-init]') || \n                         document.getElementById('main-video-droppable');\n        if (container) {\n          const rect = container.getBoundingClientRect();\n          // If x and y are not provided, use center of container\n          const posX = x || rect.width / 2;\n          const posY = y || rect.height / 2;\n          return window.quadTap.activateOverlay(posX, posY);\n        }\n      }\n      return false;\n    };\n    \n    window.openLightBox = () => {\n      if (window.quadTap) {\n        window.quadTap.openLightBox();\n        return true;\n      }\n      return false;\n    };\n    \n    window.ensureControlStripModuleAvailable = () => {\n      // Make sure the updatePlayPauseButton function is available globally\n      if (!window.updatePlayPauseButton && ControlStrip.updatePlayPauseButton) {\n        window.updatePlayPauseButton = ControlStrip.updatePlayPauseButton;\n      }\n    };\n    \n    // Ensure the updatePlayPauseButton function is available globally\n    window.ensureControlStripModuleAvailable();\n  }\n};\n\n// Run auto-initialization when DOM is ready\nif (typeof document !== 'undefined') {\n  // Try to initialize on DOMContentLoaded\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', autoInitialize);\n  } else {\n    // DOM already loaded, run auto-initialization immediately\n    autoInitialize();\n  }\n  \n  // Also try to initialize on window load as a fallback\n  // This helps with cases where the video element might be loaded dynamically\n  window.addEventListener('load', () => {\n    if (!window.quadTapInitialized) {\n      console.log('[QuadTap] Attempting initialization on window load');\n      autoInitialize();\n    }\n  });\n  \n  // Final attempt after a short delay to catch any late-loading elements\n  setTimeout(() => {\n    if (!window.quadTapInitialized) {\n      console.log('[QuadTap] Final attempt to initialize QuadTap...');\n      autoInitialize();\n    }\n  }, 1000);\n  \n  // Force initialization if it hasn't happened after 2 seconds\n  // This is a fallback for cases where the container might be dynamically added\n  setTimeout(() => {\n    if (!window.quadTapInitialized) {\n      console.log('[QuadTap] Forcing initialization...');\n      // Try to find any video container\n      const containers = document.querySelectorAll('[data-quad-tap-auto-init]');\n      const defaultContainer = document.getElementById('main-video-droppable');\n      \n      if (containers.length > 0 || defaultContainer) {\n        console.log('[QuadTap] Found container, initializing...');\n        autoInitialize();\n      } else {\n        console.log('[QuadTap] No container found, creating default container...');\n        // Create a default container if none exists\n        const videoElements = document.querySelectorAll('video');\n        if (videoElements.length > 0) {\n          const video = videoElements[0];\n          const parent = video.parentElement;\n          \n          // Create a wrapper div with the default ID\n          const wrapper = document.createElement('div');\n          wrapper.id = 'main-video-droppable';\n          wrapper.style.position = 'relative';\n          \n          // Replace the video with the wrapper and add the video inside\n          parent.replaceChild(wrapper, video);\n          wrapper.appendChild(video);\n          \n          console.log('[QuadTap] Created default container, initializing...');\n          autoInitialize();\n        }\n      }\n    }\n  }, 2000);\n}\n\n// Export the main QuadTap class as default\nexport default QuadTap;\n\n// Export additional classes and utilities\nexport {\n  SettingsBuilder,\n  VideoPlayerAdapter,\n  Coordinates,\n  ControlStrip,\n  autoInitialize\n};\n\n// Example usage:\n/*\n// Using the default constructor\nconst quadTap = new QuadTap({\n  containerId: 'video-container',\n  videoSelector: '#my-video'\n});\n\n// Using the settings builder\nimport { QuadTap, SettingsBuilder, VideoPlayerAdapter, Coordinates } from 'quad-tap';\n\n// Create a video player adapter\nconst videoAdapter = VideoPlayerAdapter.forHtml5Video(\n  document.querySelector('#my-video'),\n  true // debug mode\n);\n\n// Build settings with fluent interface\nconst settings = new SettingsBuilder()\n  .withContainer('video-container')\n  .withVideoSelector('#my-video')\n  .withDebug(true)\n  .withAutoCancelTimeout(3000)\n  .withQuadrantEmojis({\n    topLeft: \"🕊️\",\n    topRight: \"🌟\",\n    bottomLeft: \"🌧️\",\n    bottomRight: \"💥\"\n  })\n  .withVideoPlayerApi({\n    enabled: true,\n    playMethod: () => videoAdapter.play(),\n    pauseMethod: () => videoAdapter.pause(),\n    seekMethod: (time) => videoAdapter.seek(time),\n    getCurrentTimeMethod: () => videoAdapter.getCurrentTime(),\n    getDurationMethod: () => videoAdapter.getDuration(),\n    getVideoIdMethod: () => videoAdapter.getVideoId()\n  })\n  .withCoordinateSystem({\n    type: 'normalized', // 'normalized', 'percentage', or 'absolute'\n    storeMetadata: true // Include container dimensions in stored data\n  })\n  .onOverlayActivate((coordinates) => {\n    console.log('Overlay activated at', coordinates);\n    // coordinates contains both absolute and normalized positions\n  })\n  .onThrowDownConfirm((quadrant, coordinates, videoInfo) => {\n    console.log('Throw-down confirmed in', quadrant);\n    console.log('Coordinates:', coordinates);\n    console.log('Video info:', videoInfo);\n  })\n  .build();\n\n// Initialize QuadTap with the settings\nconst quadTap = new QuadTap(settings);\n\n// Using the Coordinates utility directly\nconst containerWidth = 800;\nconst containerHeight = 600;\nconst absoluteX = 400;\nconst absoluteY = 300;\n\n// Convert to normalized coordinates (0-1)\nconst { normalizedX, normalizedY } = Coordinates.normalize(\n  absoluteX, \n  absoluteY, \n  containerWidth, \n  containerHeight\n);\n\n// Get the quadrant\nconst quadrant = Coordinates.getQuadrant(normalizedX, normalizedY);\n\n// Create a complete coordinate data object\nconst coordinateData = Coordinates.createData(\n  absoluteX,\n  absoluteY,\n  containerWidth,\n  containerHeight\n);\n*/\n"],"names":["root","factory","exports","module","define","amd","this","t","d","e","o","n","Object","defineProperty","enumerable","get","prototype","hasOwnProperty","call","arguments","length","document","createElement","className","id","text","textContent","html","innerHTML","attributes","setAttribute","styles","i","style","events","a","addEventListener","children","forEach","appendChild","parentElement","getBoundingClientRect","width","height","left","top","transform","Symbol","_typeof","iterator","constructor","default","M","r","localStorage","setItem","JSON","stringify","console","error","s","getItem","parse","l","asyncIterator","toStringTag","c","value","configurable","writable","u","g","create","Error","done","method","arg","delegate","j","p","sent","_sent","dispatchException","abrupt","h","type","T","wrap","m","f","b","v","getPrototypeOf","y","B","w","x","_invoke","C","isMobile","test","navigator","userAgent","isSmallScreen","window","innerWidth","margin","fontSize","display","alignItems","justifyContent","lineHeight","padding","verticalAlign","backgroundColor","preventDefault","TypeError","next","k","tryEntries","push","S","reset","isNaN","displayName","isGeneratorFunction","name","mark","setPrototypeOf","__proto__","awrap","__await","AsyncIterator","async","Promise","then","keys","unshift","pop","values","prev","charAt","slice","stop","rval","complete","finish","catch","delegateYield","resolve","apply","elements","video","config","videoPlayerApi","enabled","adapter","play","t0","pause","maxWidth","borderRadius","boxShadow","transition","position","border","color","cursor","outline","zIndex","pointerEvents","opacity","assign","overlay","onPlay","onPause","onRewind","onForward","onShare","onCopyUrl","rewindTime","forwardTime","debug","showAllButtons","isLightbox","parseInt","getComputedStyle","toString","E","q","P","stopPropagation","location","href","share","title","url","O","log","z","L","clearTimeout","setTimeout","ResizeObserver","topPercent","toFixed","leftPercent","observe","querySelector","clipboard","writeText","body","select","execCommand","removeChild","concat","toPrimitive","String","containerId","videoSelector","autoCancelTimeout","emojis","quadrants","topLeft","topRight","bottomLeft","bottomRight","directional","up","right","down","thoughts","videoControls","callbacks","onOverlayActivate","onThrowDownInitiate","onThrowDownConfirm","onThrowDownCancel","onVideoControl","profileBubble","imageUrl","fallbackEmoji","size","borderColor","borderWidth","colors","background","quadrantGradients","lightbox","headerBackground","buttonPrimary","buttonSecondary","state","active","profileBubblePosition","currentQuadrant","autoCancelTimer","containerDimensions","videoPlaying","wasPlayingBefore","recording","mediaStream","mediaRecorder","recordingStartTime","recordingIndicator","swipeDebounceTimer","swipeProcessing","container","directionalEmojis","quadrantEmojis","tooltip","lightBox","lightBoxContent","emojiGrid","commentBox","throttledResize","handleResize","bind","init","key","getElementById","head","createOverlayElements","createLightBoxElements","bindEventHandlers","click","deactivateOverlay","borderStyle","backgroundImage","backgroundSize","backgroundPosition","createVideoControls","currentTime","Math","max","min","duration","videoControlsObj","element","setMode","classList","remove","add","bottom","offsetWidth","updateTimeDisplay","updatePlayPauseButton","marginTop","marginBottom","borderTop","borderBottom","flexDirection","lightboxControlStripObj","lightboxControlStrip","closeLightBox","marginRight","createEmojiGrid","placeholder","rows","maxlength","input","target","extractUrlFromText","saveEventToHistory","comment","extractedUrl","accept","change","files","fileName","fileSize","fileType","stopRecording","parentNode","startRecording","positionDisplay","marginLeft","fontFamily","xPos","yPos","storedPos","storedPosY","parseFloat","xPercent","round","yPercentUp","saveThrowDown","clear","createLightboxControlStrip","videoInfoDisplay","gridTemplateColumns","gridTemplateRows","gap","gridRow","gridColumn","createEmojiTable","selectEmoji","match","timestamp","Date","toISOString","context","emoji","quadrant","index","querySelectorAll","commentTextarea","currentText","event","Event","bubbles","dispatchEvent","getAttribute","videoId","now","Array","from","filter","startsWith","replace","paused","muted","volume","playbackRate","videoWidth","videoHeight","src","currentSrc","selectedEmoji","selectedQuadrant","selectedIndex","positionX","positionY","videoTime","videoMetadata","containerWidth","containerHeight","timezoneOffset","getTimezoneOffset","locale","language","platform","referrer","removeAttribute","controls","btn","err","closest","contains","openLightBox","changedTouches","clientX","clientY","activateOverlay","updateContainerDimensions","addSwipeHandlers","swipe","startX","startY","endX","endY","startTime","onVideo","overlayActive","threshold","maxTime","handleSwipeStart","targetElement","includes","touches","elementFromPoint","handleSwipeEnd","deltaX","deltaY","elapsedTime","swipeDirection","absX","abs","absY","direction","time","handleSwipe","handleSwipeMove","cancelable","buttons","passive","_this","swipeInfo","toUpperCase","updateLightboxSwipeInfo","openLightBoxWithSwipeInfo","swipeInfoElement","whiteSpace","positionDirectionalEmojis","positionQuadrantEmojis","positionVideoControls","positionTooltip","viewportWidth","viewportHeight","innerHeight","maxHeight","paddingTop","viewport","bubbleDimensions","calculateResponsiveBubbleSize","sqrt","pow","widthBasedSize","isPortrait","defaultSize","enlargedSize","defaultOpacity","enlargedOpacity","bubbleSize","widthPercentage","floor","calculateResponsiveEmojiSize","cornerSpacing","textAlign","alert","isPlaying","videoSliderContainer","createVideoTimeSlider","insertBefore","updateVideoTimeDisplay","videoTimeUpdateInterval","setInterval","clearInterval","isFinite","currentTimeElement","durationElement","videoSlider","mediaDevices","MediaRecorder","getUserMedia","audio","ondataavailable","data","onstop","Blob","URL","createObjectURL","getTracks","start","removeEventListener","handleContainerClick","handleBubbleClick","handleLightBoxClick","handleVideoPlay","handleVideoPause","handleKeyDown","getOwnPropertySymbols","getOwnPropertyDescriptor","getOwnPropertyDescriptors","defineProperties","N","R","D","settings","autoInitialize","north","east","south","west","thoughtEmojis","autoHide","autoHideDelay","pauseOnLightboxOnly","swipeNavigation","northContextBar","content","southContextBar","coordinateSystem","storeMetadata","emojiSizes","warn","isArray","validateSettings","I","quadTapInitialized","A","quadTap","ensureControlStripModuleAvailable","withContainer","withVideoSelector","withAutoInitialize","withProfileBubble","withColors","build","readyState","replaceChild","SettingsBuilder","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","loaded","__webpack_modules__","getter","__esModule","definition","obj","prop","nmd","paths","_classCallCheck","timeout","_objectSpread","videoControlsConfig","tooltipConfig","swipeConfig","northConfig","southConfig","coordinateConfig","bubbleConfig","overlayColors","lightboxColors","colorConfig","sizeConfig","apiConfig","callback","controlStrip","playPauseButton","containers","defaultContainer","QuadTap","rect","posX","posY","ControlStrip","profileImageUrl","settingsBuilder","overlayBgColor","lightboxBgColor","videoElements","parent","wrapper"],"sourceRoot":""}