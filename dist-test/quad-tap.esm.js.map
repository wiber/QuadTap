{"version":3,"file":"quad-tap.esm.js","mappings":"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","sources":["webpack://QuadTap/webpack/universalModuleDefinition","webpack://QuadTap/./src/components/ControlStrip.js","webpack://QuadTap/webpack/bootstrap","webpack://QuadTap/webpack/runtime/define property getters","webpack://QuadTap/webpack/runtime/hasOwnProperty shorthand","webpack://QuadTap/./src/helpers/dom.js","webpack://QuadTap/./src/helpers/storage.js","webpack://QuadTap/./src/helpers/video.js","webpack://QuadTap/./src/QuadTap.js","webpack://QuadTap/./src/index.js","webpack://QuadTap/./src/helpers/events.js","webpack://QuadTap/./src/styles/overlay.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"QuadTap\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"QuadTap\"] = factory();\n\telse\n\t\troot[\"QuadTap\"] = factory();\n})(this, () => {\nreturn ","/**\n * ControlStrip Component\n * \n * This component creates and manages the video control strip that appears\n * at the center of the overlay. It follows the positioning requirements\n * specified in the SPEC.md document.\n */\n\n// Inject CSS styles for the control strip\nfunction injectControlStripStyles() {\n  // Check if styles are already injected\n  if (document.getElementById('quad-tap-control-strip-styles')) {\n    return;\n  }\n  \n  const styleElement = document.createElement('style');\n  styleElement.id = 'quad-tap-control-strip-styles';\n  \n  styleElement.textContent = `\n    /* Control Strip Base Styles */\n    .qt-control-strip {\n      width: 80%;\n      max-width: 400px;\n      padding: 8px 12px;\n      border-radius: 24px;\n      background-color: rgba(0, 0, 0, 0.7);\n      display: flex;\n      justify-content: space-around;\n      align-items: center;\n      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n      transition: opacity 0.3s ease;\n    }\n    \n    /* Positioning Modifiers */\n    .qt-control-strip--overlay {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n    \n    .qt-control-strip--lightbox {\n      position: static;\n      transform: none;\n      margin: 20px auto;\n    }\n    \n    /* Control Strip Buttons */\n    .qt-control-button {\n      background: none;\n      border: none;\n      color: white;\n      font-size: 18px;\n      padding: 8px 12px;\n      cursor: pointer;\n      border-radius: 50%;\n      width: 40px;\n      height: 40px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      transition: background-color 0.2s ease;\n    }\n    \n    .qt-control-button:hover {\n      background-color: rgba(255, 255, 255, 0.2);\n    }\n    \n    /* Tooltip */\n    .qt-tooltip {\n      position: absolute;\n      background-color: rgba(0, 0, 0, 0.8);\n      color: white;\n      padding: 5px 10px;\n      border-radius: 4px;\n      font-size: 14px;\n      z-index: 2000;\n      pointer-events: none;\n      opacity: 0;\n      transition: opacity 0.3s ease;\n    }\n  `;\n  \n  document.head.appendChild(styleElement);\n}\n\n/**\n * Creates a control strip element and positions it correctly\n * @param {Object} options - Configuration options\n * @param {HTMLElement} options.overlay - The overlay element to attach the control strip to\n * @param {Function} options.onPlay - Callback for play button click\n * @param {Function} options.onPause - Callback for pause button click\n * @param {Function} options.onRewind - Callback for rewind button click\n * @param {Function} options.onForward - Callback for forward button click\n * @param {Function} options.onShare - Callback for share button click\n * @param {Function} options.onCopyUrl - Callback for copy URL button click\n * @param {number} options.rewindTime - Time in seconds to rewind (default: 30)\n * @param {number} options.forwardTime - Time in seconds to forward (default: 30)\n * @param {boolean} options.debug - Enable debug mode\n * @param {boolean} options.showAllButtons - Show all buttons including share and copy URL (default: false)\n * @param {boolean} options.isLightbox - Whether this control strip is for a lightbox (default: false)\n * @returns {HTMLElement} The created control strip element\n */\nfunction createControlStrip(options) {\n  const {\n    overlay,\n    onPlay,\n    onPause,\n    onRewind,\n    onForward,\n    onShare,\n    onCopyUrl,\n    rewindTime = 30,\n    forwardTime = 30,\n    debug = false,\n    showAllButtons = false,\n    isLightbox = false\n  } = options;\n\n  // Inject CSS styles if not already done\n  injectControlStripStyles();\n\n  // Create the control strip element\n  const controlStrip = document.createElement('div');\n  controlStrip.className = isLightbox \n    ? 'qt-control-strip qt-control-strip--lightbox' \n    : 'qt-control-strip qt-control-strip--overlay';\n  \n  // Ensure proper z-index (at least 10 higher than overlay) for overlay control strip\n  if (!isLightbox) {\n    const overlayZIndex = parseInt(getComputedStyle(overlay).zIndex) || 1000;\n    controlStrip.style.zIndex = (overlayZIndex + 10).toString();\n  }\n  \n  // Create control buttons\n  const rewindButton = createButton('⟲' + rewindTime, 'Rewind ' + rewindTime + ' seconds', onRewind);\n  const playPauseButton = createButton('▶', 'Play/Pause', (evt) => {\n    const isPlaying = playPauseButton.textContent === '▶';\n    playPauseButton.textContent = isPlaying ? '❚❚' : '▶';\n    if (isPlaying) {\n      onPlay(evt);\n    } else {\n      onPause(evt);\n    }\n  });\n  const forwardButton = createButton('⟳' + forwardTime, 'Forward ' + forwardTime + ' seconds', onForward);\n  \n  // Create share button\n  const shareButton = createButton('⤴', 'Share', (evt) => {\n    evt.stopPropagation();\n    \n    if (onShare) {\n      // Use the provided callback\n      onShare(evt);\n    } else {\n      // Default share functionality\n      const shareUrl = window.location.href;\n      \n      // Try to use the Web Share API if available\n      if (navigator.share) {\n        navigator.share({\n          title: 'Check out this video moment',\n          url: shareUrl\n        }).catch(err => {\n          console.error('Error sharing:', err);\n        });\n      } else {\n        // Fallback to copying to clipboard\n        copyToClipboard(shareUrl);\n        showTooltip(shareButton, 'Link copied!');\n      }\n    }\n  });\n  \n  // Create copy URL button\n  const copyButton = createButton('⧉', 'Copy URL', (evt) => {\n    evt.stopPropagation();\n    \n    if (onCopyUrl) {\n      // Use the provided callback\n      onCopyUrl(evt);\n    } else {\n      // Default copy URL functionality\n      const url = window.location.href;\n      copyToClipboard(url);\n      showTooltip(copyButton, 'Link copied!');\n    }\n  });\n  \n  // Add buttons to control strip\n  controlStrip.appendChild(rewindButton);\n  controlStrip.appendChild(playPauseButton);\n  controlStrip.appendChild(forwardButton);\n  \n  // Only add share and copy buttons if showAllButtons is true or we're in a lightbox context\n  if (showAllButtons || isLightbox) {\n    controlStrip.appendChild(shareButton);\n    controlStrip.appendChild(copyButton);\n  }\n  \n  // Prevent clicks from dismissing overlay\n  controlStrip.addEventListener('click', (evt) => {\n    evt.stopPropagation();\n    if (debug) console.log('[QuadTap] Control strip clicked, propagation stopped');\n  });\n  \n  // Add to overlay as direct child\n  overlay.appendChild(controlStrip);\n  \n  // Set up auto-fade for overlay control strip (not for lightbox)\n  if (!isLightbox) {\n    let fadeTimeout;\n    const fadeControls = () => {\n      controlStrip.style.opacity = '0.5';\n    };\n    \n    // Show controls at full opacity on hover\n    controlStrip.addEventListener('mouseenter', () => {\n      clearTimeout(fadeTimeout);\n      controlStrip.style.opacity = '1';\n    });\n    \n    // Fade controls when mouse leaves\n    controlStrip.addEventListener('mouseleave', () => {\n      clearTimeout(fadeTimeout);\n      fadeTimeout = setTimeout(fadeControls, 2000);\n    });\n    \n    // Initial fade after 2 seconds\n    controlStrip.style.opacity = '1';\n    fadeTimeout = setTimeout(fadeControls, 2000);\n  }\n  \n  // Log positioning information if debug is enabled\n  if (debug) {\n    console.log('[QuadTap] Control strip created with positioning:', {\n      isLightbox,\n      className: controlStrip.className,\n      zIndex: controlStrip.style.zIndex\n    });\n    \n    // Add a resize observer to log position changes\n    if (!isLightbox) {\n      const resizeObserver = new ResizeObserver(() => {\n        const rect = controlStrip.getBoundingClientRect();\n        const overlayRect = overlay.getBoundingClientRect();\n        \n        // Calculate actual percentage position\n        const actualTopPercent = ((rect.top - overlayRect.top + rect.height / 2) / overlayRect.height * 100);\n        const actualLeftPercent = (rect.left - overlayRect.left + rect.width / 2) / overlayRect.width * 100;\n        \n        console.log('[QuadTap] Control strip position after resize:', {\n          topPercent: actualTopPercent.toFixed(2) + '%',\n          leftPercent: actualLeftPercent.toFixed(2) + '%',\n          width: rect.width,\n          height: rect.height\n        });\n      });\n      \n      resizeObserver.observe(overlay);\n    }\n  }\n  \n  return controlStrip;\n}\n\n/**\n * Helper function to create a button for the control strip\n * @param {string} text - Button text\n * @param {string} ariaLabel - Accessibility label\n * @param {Function} onClick - Click handler\n * @returns {HTMLElement} The created button\n */\nfunction createButton(text, ariaLabel, onClick) {\n  const button = document.createElement('button');\n  button.className = 'qt-control-button';\n  button.textContent = text;\n  button.setAttribute('aria-label', ariaLabel);\n  \n  // Click handler\n  button.addEventListener('click', onClick);\n  \n  return button;\n}\n\n/**\n * Updates the play/pause button state\n * @param {HTMLElement} controlStrip - The control strip element\n * @param {boolean} isPlaying - Whether the video is currently playing\n */\nfunction updatePlayPauseButton(controlStrip, isPlaying) {\n  const playPauseButton = controlStrip.querySelector('button:nth-child(2)');\n  if (playPauseButton) {\n    playPauseButton.textContent = isPlaying ? '❚❚' : '▶';\n  }\n}\n\n/**\n * Shows the control strip\n * @param {HTMLElement} controlStrip - The control strip element\n */\nfunction showControlStrip(controlStrip) {\n  controlStrip.style.display = 'flex';\n  controlStrip.style.opacity = '1';\n  \n  // Set up fade timeout if it's an overlay control strip\n  if (controlStrip.classList.contains('qt-control-strip--overlay')) {\n    setTimeout(() => {\n      controlStrip.style.opacity = '0.5';\n    }, 2000);\n  }\n}\n\n/**\n * Hides the control strip\n * @param {HTMLElement} controlStrip - The control strip element\n */\nfunction hideControlStrip(controlStrip) {\n  controlStrip.style.opacity = '0';\n  setTimeout(() => {\n    controlStrip.style.display = 'none';\n  }, 300); // Match the transition duration\n}\n\n/**\n * Helper function to copy text to clipboard\n * @param {string} text - Text to copy\n */\nfunction copyToClipboard(text) {\n  // Use the Clipboard API if available\n  if (navigator.clipboard && navigator.clipboard.writeText) {\n    navigator.clipboard.writeText(text).catch(err => {\n      console.error('Failed to copy text: ', err);\n    });\n    return;\n  }\n  \n  // Fallback for older browsers\n  const textarea = document.createElement('textarea');\n  textarea.value = text;\n  textarea.style.position = 'fixed';  // Prevent scrolling to bottom\n  document.body.appendChild(textarea);\n  textarea.select();\n  \n  try {\n    document.execCommand('copy');\n  } catch (err) {\n    console.error('Failed to copy text: ', err);\n  }\n  \n  document.body.removeChild(textarea);\n}\n\n/**\n * Shows a tooltip near an element\n * @param {HTMLElement} element - Element to show tooltip near\n * @param {string} message - Tooltip message\n */\nfunction showTooltip(element, message) {\n  // Create tooltip element\n  const tooltip = document.createElement('div');\n  tooltip.className = 'qt-tooltip';\n  tooltip.textContent = message;\n  \n  // Position the tooltip above the element\n  const rect = element.getBoundingClientRect();\n  tooltip.style.top = `${rect.top - 30}px`;\n  tooltip.style.left = `${rect.left + rect.width / 2}px`;\n  tooltip.style.transform = 'translateX(-50%)';\n  \n  // Add to document\n  document.body.appendChild(tooltip);\n  \n  // Show tooltip\n  setTimeout(() => {\n    tooltip.style.opacity = '1';\n  }, 10);\n  \n  // Hide and remove tooltip after 1.5 seconds\n  setTimeout(() => {\n    tooltip.style.opacity = '0';\n    setTimeout(() => {\n      document.body.removeChild(tooltip);\n    }, 300);\n  }, 1500);\n}\n\nmodule.exports = {\n  createControlStrip,\n  updatePlayPauseButton,\n  showControlStrip,\n  hideControlStrip,\n  copyToClipboard,\n  showTooltip\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","/**\n * DOM Helper Functions\n * Utility functions for DOM manipulation\n */\n\n/**\n * Create an HTML element with specified options\n * @param {string} tag - The HTML tag name\n * @param {Object} options - Options for the element\n * @param {string} options.className - CSS class name\n * @param {string} options.id - Element ID\n * @param {string} options.text - Text content\n * @param {string} options.html - HTML content\n * @param {Object} options.attributes - HTML attributes\n * @param {Object} options.styles - CSS styles\n * @param {Object} options.events - Event listeners\n * @param {Array} options.children - Child elements\n * @returns {HTMLElement} The created element\n */\nexport function createElement(tag, options = {}) {\n  const element = document.createElement(tag);\n  \n  if (options.className) element.className = options.className;\n  if (options.id) element.id = options.id;\n  if (options.text) element.textContent = options.text;\n  if (options.html) element.innerHTML = options.html;\n  \n  if (options.attributes) {\n    for (const key in options.attributes) {\n      element.setAttribute(key, options.attributes[key]);\n    }\n  }\n  \n  if (options.styles) {\n    for (const key in options.styles) {\n      element.style[key] = options.styles[key];\n    }\n  }\n  \n  if (options.events) {\n    for (const event in options.events) {\n      element.addEventListener(event, options.events[event]);\n    }\n  }\n  \n  if (options.children) {\n    options.children.forEach(child => {\n      element.appendChild(child);\n    });\n  }\n  \n  return element;\n}\n\n/**\n * Position an element with its center at the specified coordinates\n * @param {HTMLElement} element - The element to position\n * @param {number} x - X coordinate (can be pixels or percentage 0-1)\n * @param {number} y - Y coordinate (can be pixels or percentage 0-1)\n * @param {boolean} isPercentage - Whether coordinates are percentages (0-1) or pixels\n */\nexport function positionElementWithCenterMaintained(element, x, y, isPercentage = false) {\n  if (isPercentage) {\n    // Convert percentage to pixels based on parent container dimensions\n    const parent = element.parentElement;\n    if (parent) {\n      const parentRect = parent.getBoundingClientRect();\n      x = parentRect.width * x;\n      y = parentRect.height * y;\n    }\n  }\n  \n  element.style.left = x + \"px\";\n  element.style.top = y + \"px\";\n  element.style.transform = \"translate(-50%, -50%)\";\n}\n\n/**\n * Get the quadrant of a point within a container\n * @param {number} x - X coordinate\n * @param {number} y - Y coordinate\n * @param {HTMLElement} container - Container element\n * @returns {string} Quadrant name: 'top-left', 'top-right', 'bottom-left', or 'bottom-right'\n */\nexport function getQuadrant(x, y, container) {\n  const rect = container.getBoundingClientRect();\n  const centerX = rect.width / 2;\n  const centerY = rect.height / 2;\n  \n  if (x < centerX) {\n    if (y < centerY) {\n      return 'top-left';\n    } else {\n      return 'bottom-left';\n    }\n  } else {\n    if (y < centerY) {\n      return 'top-right';\n    } else {\n      return 'bottom-right';\n    }\n  }\n}\n\n/**\n * Check if a point is within an element\n * @param {number} x - X coordinate\n * @param {number} y - Y coordinate\n * @param {HTMLElement} element - Element to check\n * @returns {boolean} True if the point is within the element\n */\nexport function isPointInElement(x, y, element) {\n  const rect = element.getBoundingClientRect();\n  return (\n    x >= rect.left &&\n    x <= rect.right &&\n    y >= rect.top &&\n    y <= rect.bottom\n  );\n}\n\n/**\n * Get the distance between two points\n * @param {number} x1 - X coordinate of first point\n * @param {number} y1 - Y coordinate of first point\n * @param {number} x2 - X coordinate of second point\n * @param {number} y2 - Y coordinate of second point\n * @returns {number} Distance between the points\n */\nexport function getDistance(x1, y1, x2, y2) {\n  return Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n}\n","/**\n * Storage Helper Functions\n * Utility functions for working with localStorage\n */\n\nconst STORAGE_PREFIX = 'quadTap_';\n\n/**\n * Save data to localStorage with the quadTap prefix\n * @param {string} key - The key to save under\n * @param {*} value - The value to save\n */\nexport function saveToStorage(key, value) {\n  try {\n    const prefixedKey = STORAGE_PREFIX + key;\n    \n    // Handle objects and arrays by converting to JSON\n    if (typeof value === 'object') {\n      localStorage.setItem(prefixedKey, JSON.stringify(value));\n    } else {\n      localStorage.setItem(prefixedKey, value);\n    }\n    \n    return true;\n  } catch (error) {\n    console.error('[QuadTap] Error saving to localStorage:', error);\n    return false;\n  }\n}\n\n/**\n * Get data from localStorage with the quadTap prefix\n * @param {string} key - The key to retrieve\n * @param {*} defaultValue - Default value if key doesn't exist\n * @returns {*} The retrieved value or defaultValue\n */\nexport function getFromStorage(key, defaultValue = null) {\n  try {\n    const prefixedKey = STORAGE_PREFIX + key;\n    const value = localStorage.getItem(prefixedKey);\n    \n    if (value === null) {\n      return defaultValue;\n    }\n    \n    // Try to parse as JSON, return as is if not valid JSON\n    try {\n      return JSON.parse(value);\n    } catch (e) {\n      return value;\n    }\n  } catch (error) {\n    console.error('[QuadTap] Error retrieving from localStorage:', error);\n    return defaultValue;\n  }\n}\n\n/**\n * Remove data from localStorage with the quadTap prefix\n * @param {string} key - The key to remove\n */\nexport function removeFromStorage(key) {\n  try {\n    const prefixedKey = STORAGE_PREFIX + key;\n    localStorage.removeItem(prefixedKey);\n    return true;\n  } catch (error) {\n    console.error('[QuadTap] Error removing from localStorage:', error);\n    return false;\n  }\n}\n\n/**\n * Clear all quadTap data from localStorage\n */\nexport function clearAllStorage() {\n  try {\n    const keysToRemove = [];\n    \n    // Find all keys with the quadTap prefix\n    for (let i = 0; i < localStorage.length; i++) {\n      const key = localStorage.key(i);\n      if (key.startsWith(STORAGE_PREFIX)) {\n        keysToRemove.push(key);\n      }\n    }\n    \n    // Remove all found keys\n    keysToRemove.forEach(key => {\n      localStorage.removeItem(key);\n    });\n    \n    return true;\n  } catch (error) {\n    console.error('[QuadTap] Error clearing localStorage:', error);\n    return false;\n  }\n}\n\n/**\n * Save the entire throw-down context to localStorage\n * @param {Object} context - The throw-down context\n */\nexport function saveThrowDownContext(context) {\n  try {\n    // Save each property individually\n    for (const key in context) {\n      saveToStorage(key, context[key]);\n    }\n    \n    // Save a timestamp\n    saveToStorage('timestamp', Date.now());\n    \n    return true;\n  } catch (error) {\n    console.error('[QuadTap] Error saving throw-down context:', error);\n    return false;\n  }\n}\n\n/**\n * Get the entire throw-down context from localStorage\n * @returns {Object} The throw-down context\n */\nexport function getThrowDownContext() {\n  try {\n    return {\n      selectedEmoji: getFromStorage('selectedEmoji', ''),\n      selectedQuadrant: getFromStorage('selectedQuadrant', ''),\n      selectedIndex: getFromStorage('selectedIndex', -1),\n      videoTime: getFromStorage('videoTime', 0),\n      videoId: getFromStorage('videoId', 'unknown'),\n      positionX: getFromStorage('positionX', 0),\n      positionY: getFromStorage('positionY', 0),\n      timestamp: getFromStorage('timestamp', Date.now()),\n      comment: getFromStorage('comment', ''),\n      extractedUrl: getFromStorage('extractedUrl', '')\n    };\n  } catch (error) {\n    console.error('[QuadTap] Error retrieving throw-down context:', error);\n    return {};\n  }\n}\n","/**\n * Video Helper Functions\n * Utilities for controlling video playback\n */\n\n/**\n * Pause video if it's currently playing\n * @param {Object} quadTap - The QuadTap instance\n * @returns {Promise<void>}\n */\nexport async function pauseIfPlaying(quadTap) {\n  const { video } = quadTap.elements;\n  const adapter = quadTap.config.videoPlayerApi?.enabled && \n                 quadTap.config.videoPlayerApi.adapter;\n  \n  if (adapter) {\n    quadTap.state.wasPlayingBefore = await adapter.isPlaying();\n    if (quadTap.state.wasPlayingBefore) await adapter.pause();\n  } else if (video && !video.paused) {\n    quadTap.state.wasPlayingBefore = true;\n    video.pause();\n  } else {\n    quadTap.state.wasPlayingBefore = false;\n  }\n}\n\n/**\n * Resume video if it was playing before\n * @param {Object} quadTap - The QuadTap instance\n * @returns {Promise<void>}\n */\nexport async function resumeIfNeeded(quadTap) {\n  const { video } = quadTap.elements;\n  const adapter = quadTap.config.videoPlayerApi?.enabled && \n                 quadTap.config.videoPlayerApi.adapter;\n  \n  if (!quadTap.state.wasPlayingBefore) return;\n\n  if (adapter) {\n    await adapter.play();\n  } else if (video) {\n    try {\n      await video.play();\n    } catch (err) {\n      console.error('Error resuming video playback:', err);\n    }\n  }\n\n  quadTap.state.wasPlayingBefore = false;\n}\n","/**\n * Quad-Tap Overlay - Core Implementation\n * A pure JavaScript implementation with no dependencies\n * \n * Key features:\n * 1. Proper bubble positioning at exact tap location\n * 2. Correct emoji grid layout with 2x2 table structure\n * 3. Proper variable naming to avoid redeclaration\n * 4. Single event handler with state checking\n * 5. All styles injected via JavaScript\n * 6. Video controls (play/pause, rewind, forward, share)\n * 7. Directional and quadrant emojis with proper scaling\n * 8. Enhanced usability with tooltips and clear guidance\n */\n\nimport { injectStyles } from './styles/overlay';\nimport { createElement, positionElementWithCenterMaintained, getQuadrant } from './helpers/dom';\nimport { saveToStorage, getFromStorage, saveThrowDownContext } from './helpers/storage';\nimport { throttle } from './helpers/events';\nimport { pauseIfPlaying, resumeIfNeeded } from './helpers/video';\nimport { createControlStrip, updatePlayPauseButton, showControlStrip, hideControlStrip } from './components/ControlStrip';\n\n/**\n * Default configuration\n */\nconst DEFAULT_CONFIG = {\n  containerId: \"main-video-droppable\",\n  videoSelector: \"#main-video\",\n  autoCancelTimeout: 5000,\n  debug: true,\n  emojis: {\n    quadrants: {\n      topLeft: \"🕊️\",\n      topRight: \"🌟\",\n      bottomLeft: \"🌧️\",\n      bottomRight: \"💥\"\n    },\n    directional: {\n      up: \"🚀\",\n      right: \"👑\",\n      down: \"⬇️\",\n      left: \"🤫\"\n    },\n    thoughts: {\n      topLeft: [\"🌸\", \"🎈\", \"🌦️\", \"🛤️\"],\n      topRight: [\"🌈\", \"✨\", \"🌤️\", \"🎆\"],\n      bottomLeft: [\"🍂\", \"🌙\", \"☔\", \"🗿\"],\n      bottomRight: [\"⚖️\", \"🏆\", \"⛈️\", \"💣\"]\n    }\n  },\n  videoControls: {\n    enabled: true,\n    rewindTime: 30,\n    forwardTime: 30\n  },\n  callbacks: {\n    onOverlayActivate: null,\n    onThrowDownInitiate: null,\n    onThrowDownConfirm: null,\n    onThrowDownCancel: null,\n    onVideoControl: null\n  }\n};\n\n/**\n * QuadTap class\n */\nclass QuadTap {\n  /**\n   * Constructor\n   * @param {Object} customConfig - Custom configuration options\n   */\n  constructor(customConfig = {}) {\n    // Merge custom config with defaults\n    this.config = Object.assign({}, DEFAULT_CONFIG, customConfig);\n    \n    // Deep merge for nested objects\n    if (customConfig.emojis) {\n      this.config.emojis = Object.assign({}, DEFAULT_CONFIG.emojis, customConfig.emojis);\n      \n      if (customConfig.emojis.quadrants) {\n        this.config.emojis.quadrants = Object.assign({}, DEFAULT_CONFIG.emojis.quadrants, customConfig.emojis.quadrants);\n      }\n      \n      if (customConfig.emojis.directional) {\n        this.config.emojis.directional = Object.assign({}, DEFAULT_CONFIG.emojis.directional, customConfig.emojis.directional);\n      }\n      \n      if (customConfig.emojis.thoughts) {\n        this.config.emojis.thoughts = Object.assign({}, DEFAULT_CONFIG.emojis.thoughts, customConfig.emojis.thoughts);\n      }\n    }\n    \n    if (customConfig.videoControls) {\n      this.config.videoControls = Object.assign({}, DEFAULT_CONFIG.videoControls, customConfig.videoControls);\n    }\n    \n    // State management\n    this.state = {\n      active: false,\n      profileBubblePosition: { x: 0, y: 0 },\n      currentQuadrant: null,\n      autoCancelTimer: null,\n      containerDimensions: { width: 0, height: 0 },\n      videoPlaying: false,\n      wasPlayingBefore: false,\n      recording: false,\n      mediaStream: null,\n      mediaRecorder: null,\n      recordingStartTime: 0,\n      recordingIndicator: null\n    };\n    \n    // Elements\n    this.elements = {\n      container: null,\n      video: null,\n      overlay: null,\n      profileBubble: null,\n      directionalEmojis: {},\n      quadrantEmojis: {},\n      videoControls: null,\n      tooltip: null,\n      lightBox: null,\n      lightBoxContent: null,\n      emojiGrid: null,\n      commentBox: null\n    };\n    \n    // Throttled functions\n    this.throttledResize = throttle(this.handleResize.bind(this), 100);\n    \n    // Initialize\n    this.init();\n  }\n\n  /**\n   * Log events for debugging\n   * @param {string} message - Log message\n   * @param {*} data - Optional data to log\n   */\n  log(message, data) {\n    if (this.config.debug) {\n      console.log(`[QuadTap] ${message}`, data || '');\n    }\n  }\n\n  /**\n   * Initialize the component\n   */\n  init() {\n    this.log('Initializing QuadTap');\n    \n    // Get container element\n    const container = document.getElementById(this.config.containerId);\n    if (!container) {\n      this.log('Container not found', this.config.containerId);\n      return;\n    }\n    \n    this.elements.container = container;\n    \n    // Inject CSS styles\n    injectStyles();\n    \n    // Create overlay elements\n    this.createOverlayElements();\n    \n    // Create light-box elements\n    this.createLightBoxElements();\n    \n    // Bind event handlers\n    this.bindEventHandlers();\n    \n    this.log('QuadTap initialized successfully');\n  }\n  \n  /**\n   * Create overlay elements\n   */\n  createOverlayElements() {\n    // Create overlay container\n    const overlayContainer = createElement('div', { \n      className: 'quad-tap-overlay',\n      styles: { display: 'none' }\n    });\n    \n    // Create quadrants\n    const topLeftQuadrant = createElement('div', { className: 'quadrant top-left' });\n    const topRightQuadrant = createElement('div', { className: 'quadrant top-right' });\n    const bottomLeftQuadrant = createElement('div', { className: 'quadrant bottom-left' });\n    const bottomRightQuadrant = createElement('div', { className: 'quadrant bottom-right' });\n    \n    // Create profile bubble (initially hidden)\n    const profileBubble = createElement('div', { \n      className: 'profile-bubble',\n      styles: { display: 'none' }\n    });\n    \n    // Create directional emojis\n    const upEmoji = createElement('div', {\n      className: 'directional-emoji up',\n      text: this.config.emojis.directional.up,\n      styles: { display: 'none' }\n    });\n    \n    const rightEmoji = createElement('div', {\n      className: 'directional-emoji right',\n      text: this.config.emojis.directional.right,\n      styles: { display: 'none' }\n    });\n    \n    const downEmoji = createElement('div', {\n      className: 'directional-emoji down',\n      text: this.config.emojis.directional.down,\n      styles: { display: 'none' }\n    });\n    \n    const leftEmoji = createElement('div', {\n      className: 'directional-emoji left',\n      text: this.config.emojis.directional.left,\n      styles: { display: 'none' }\n    });\n    \n    // Create quadrant emojis\n    const topLeftEmoji = createElement('div', {\n      className: 'quadrant-emoji top-left',\n      text: this.config.emojis.quadrants.topLeft,\n      styles: { display: 'none' }\n    });\n    \n    const topRightEmoji = createElement('div', {\n      className: 'quadrant-emoji top-right',\n      text: this.config.emojis.quadrants.topRight,\n      styles: { display: 'none' }\n    });\n    \n    const bottomLeftEmoji = createElement('div', {\n      className: 'quadrant-emoji bottom-left',\n      text: this.config.emojis.quadrants.bottomLeft,\n      styles: { display: 'none' }\n    });\n    \n    const bottomRightEmoji = createElement('div', {\n      className: 'quadrant-emoji bottom-right',\n      text: this.config.emojis.quadrants.bottomRight,\n      styles: { display: 'none' }\n    });\n    \n    // Create video controls\n    const videoControls = this.createVideoControls();\n    \n    // Create tooltip\n    const tooltip = createElement('div', {\n      className: 'tooltip',\n      text: 'Tap elsewhere to cancel',\n      styles: { display: 'none' }\n    });\n    \n    // Append elements to container\n    overlayContainer.appendChild(topLeftQuadrant);\n    overlayContainer.appendChild(topRightQuadrant);\n    overlayContainer.appendChild(bottomLeftQuadrant);\n    overlayContainer.appendChild(bottomRightQuadrant);\n    \n    overlayContainer.appendChild(upEmoji);\n    overlayContainer.appendChild(rightEmoji);\n    overlayContainer.appendChild(downEmoji);\n    overlayContainer.appendChild(leftEmoji);\n    \n    overlayContainer.appendChild(topLeftEmoji);\n    overlayContainer.appendChild(topRightEmoji);\n    overlayContainer.appendChild(bottomLeftEmoji);\n    overlayContainer.appendChild(bottomRightEmoji);\n    \n    overlayContainer.appendChild(profileBubble);\n    overlayContainer.appendChild(videoControls);\n    overlayContainer.appendChild(tooltip);\n    \n    // Append overlay to container\n    this.elements.container.appendChild(overlayContainer);\n    \n    // Store references\n    this.elements.overlay = overlayContainer;\n    this.elements.profileBubble = profileBubble;\n    this.elements.directionalEmojis = {\n      up: upEmoji,\n      right: rightEmoji,\n      down: downEmoji,\n      left: leftEmoji\n    };\n    this.elements.quadrantEmojis = {\n      topLeft: topLeftEmoji,\n      topRight: topRightEmoji,\n      bottomLeft: bottomLeftEmoji,\n      bottomRight: bottomRightEmoji\n    };\n    this.elements.videoControls = videoControls;\n    this.elements.tooltip = tooltip;\n  }\n  \n  /**\n   * Create video controls\n   * @returns {HTMLElement} The video controls element\n   */\n  createVideoControls() {\n    if (!this.config.videoControls.enabled) {\n      return createElement('div', { styles: { display: 'none' } });\n    }\n    \n    // Get video element\n    const video = document.querySelector(this.config.videoSelector);\n    \n    // Create control strip using the imported function\n    const controlStrip = createControlStrip({\n      overlay: this.elements.overlay || document.createElement('div'),\n      onPlay: () => {\n        if (video) video.play();\n        if (this.config.callbacks.onVideoControl) {\n          this.config.callbacks.onVideoControl('play', video ? video.currentTime : 0);\n        }\n      },\n      onPause: () => {\n        if (video) video.pause();\n        if (this.config.callbacks.onVideoControl) {\n          this.config.callbacks.onVideoControl('pause', video ? video.currentTime : 0);\n        }\n      },\n      onRewind: () => {\n        if (video) video.currentTime = Math.max(0, video.currentTime - this.config.videoControls.rewindTime);\n        if (this.config.callbacks.onVideoControl) {\n          this.config.callbacks.onVideoControl('rewind', video ? video.currentTime : 0);\n        }\n      },\n      onForward: () => {\n        if (video) video.currentTime = Math.min(video.duration, video.currentTime + this.config.videoControls.forwardTime);\n        if (this.config.callbacks.onVideoControl) {\n          this.config.callbacks.onVideoControl('forward', video ? video.currentTime : 0);\n        }\n      },\n      rewindTime: this.config.videoControls.rewindTime,\n      forwardTime: this.config.videoControls.forwardTime,\n      debug: this.config.debug\n    });\n    \n    // Initially hide the control strip\n    controlStrip.style.display = 'none';\n    \n    return controlStrip;\n  }\n  \n  /**\n   * Create control strip for lightbox\n   * @returns {HTMLElement} The lightbox control strip element\n   */\n  createLightboxControlStrip() {\n    if (!this.config.videoControls.enabled) {\n      return createElement('div', { styles: { display: 'none' } });\n    }\n    \n    // Get video element\n    const video = document.querySelector(this.config.videoSelector);\n    \n    // Create a container for the lightbox control strip\n    const lightboxControlContainer = createElement('div', {\n      className: 'td-lightbox-controls',\n      styles: {\n        width: '100%',\n        padding: '15px 0',\n        marginTop: '20px',\n        marginBottom: '20px',\n        borderTop: '1px solid rgba(255, 255, 255, 0.1)',\n        borderBottom: '1px solid rgba(255, 255, 255, 0.1)',\n        display: 'flex',\n        flexDirection: 'column'\n      }\n    });\n    \n    // Create video time slider\n    const videoSliderContainer = createElement('div', {\n      className: 'td-video-slider-container',\n      styles: {\n        width: '100%',\n        padding: '0 10px',\n        marginBottom: '10px',\n        display: 'flex',\n        flexDirection: 'column'\n      }\n    });\n    \n    // Create time display\n    const timeDisplay = createElement('div', {\n      className: 'td-time-display',\n      styles: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        fontSize: '12px',\n        color: '#fff',\n        marginBottom: '5px'\n      }\n    });\n    \n    const currentTimeElement = createElement('span', {\n      className: 'td-current-time',\n      text: '0:00'\n    });\n    \n    const durationElement = createElement('span', {\n      className: 'td-duration',\n      text: '0:00'\n    });\n    \n    timeDisplay.appendChild(currentTimeElement);\n    timeDisplay.appendChild(durationElement);\n    \n    // Create slider\n    const sliderContainer = createElement('div', {\n      className: 'td-slider-container',\n      styles: {\n        width: '100%',\n        height: '20px',\n        display: 'flex',\n        alignItems: 'center'\n      }\n    });\n    \n    const slider = createElement('input', {\n      className: 'td-video-slider',\n      attributes: {\n        type: 'range',\n        min: '0',\n        max: '100',\n        value: '0',\n        step: '0.1'\n      },\n      styles: {\n        width: '100%',\n        margin: '0',\n        cursor: 'pointer'\n      },\n      events: {\n        input: (evt) => {\n          if (video) {\n            const seekTime = (evt.target.value / 100) * video.duration;\n            video.currentTime = seekTime;\n            this.updateVideoTimeDisplay();\n          }\n        }\n      }\n    });\n    \n    sliderContainer.appendChild(slider);\n    \n    videoSliderContainer.appendChild(timeDisplay);\n    videoSliderContainer.appendChild(sliderContainer);\n    \n    // Create control strip using the imported function with isLightbox=true\n    const controlStrip = createControlStrip({\n      overlay: lightboxControlContainer,\n      onPlay: () => {\n        if (video) {\n          video.play();\n          this.updateVideoTimeDisplay();\n        }\n        if (this.config.callbacks.onVideoControl) {\n          this.config.callbacks.onVideoControl('play', video ? video.currentTime : 0);\n        }\n      },\n      onPause: () => {\n        if (video) {\n          video.pause();\n          this.updateVideoTimeDisplay();\n        }\n        if (this.config.callbacks.onVideoControl) {\n          this.config.callbacks.onVideoControl('pause', video ? video.currentTime : 0);\n        }\n      },\n      onRewind: () => {\n        if (video) {\n          video.currentTime = Math.max(0, video.currentTime - this.config.videoControls.rewindTime);\n          this.updateVideoTimeDisplay();\n        }\n        if (this.config.callbacks.onVideoControl) {\n          this.config.callbacks.onVideoControl('rewind', video ? video.currentTime : 0);\n        }\n      },\n      onForward: () => {\n        if (video) {\n          video.currentTime = Math.min(video.duration, video.currentTime + this.config.videoControls.forwardTime);\n          this.updateVideoTimeDisplay();\n        }\n        if (this.config.callbacks.onVideoControl) {\n          this.config.callbacks.onVideoControl('forward', video ? video.currentTime : 0);\n        }\n      },\n      onShare: () => {\n        // Implement share functionality\n        if (navigator.share) {\n          navigator.share({\n            title: 'Shared Video',\n            text: 'Check out this video!',\n            url: window.location.href\n          }).catch(err => {\n            console.error('Share failed:', err);\n          });\n        } else {\n          alert('Share feature not supported by your browser');\n        }\n        \n        if (this.config.callbacks.onVideoControl) {\n          this.config.callbacks.onVideoControl('share', video ? video.currentTime : 0);\n        }\n      },\n      onCopyUrl: () => {\n        // Implement copy URL functionality\n        const url = window.location.href;\n        navigator.clipboard.writeText(url)\n          .then(() => {\n            alert('URL copied to clipboard');\n          })\n          .catch(err => {\n            console.error('Copy failed:', err);\n            // Fallback\n            const input = document.createElement('input');\n            input.value = url;\n            document.body.appendChild(input);\n            input.select();\n            document.execCommand('copy');\n            document.body.removeChild(input);\n            alert('URL copied to clipboard');\n          });\n          \n        if (this.config.callbacks.onVideoControl) {\n          this.config.callbacks.onVideoControl('copyurl', video ? video.currentTime : 0);\n        }\n      },\n      rewindTime: this.config.videoControls.rewindTime,\n      forwardTime: this.config.videoControls.forwardTime,\n      debug: this.config.debug,\n      showAllButtons: true, // Ensure all buttons are shown\n      isLightbox: true // Use lightbox styling\n    });\n    \n    // Store references to time display elements\n    this.elements.currentTimeElement = currentTimeElement;\n    this.elements.durationElement = durationElement;\n    this.elements.videoSlider = slider;\n    \n    // Append the video slider and control strip to the container\n    lightboxControlContainer.appendChild(videoSliderContainer);\n    lightboxControlContainer.appendChild(controlStrip);\n    \n    return lightboxControlContainer;\n  }\n  \n  /**\n   * Create light-box elements\n   */\n  createLightBoxElements() {\n    // Create light-box modal\n    const lightBoxModal = createElement('div', {\n      id: 'throwdown-modal',\n      className: 'td-modal'\n    });\n    \n    const lightBoxContent = createElement('div', {\n      className: 'td-modal-content'\n    });\n    \n    const lightBoxHeader = createElement('div', {\n      className: 'td-modal-header'\n    });\n    \n    const lightBoxTitle = createElement('h4', {\n      text: 'Share Your Thoughts'\n    });\n    \n    const closeButton = createElement('button', {\n      className: 'td-close-btn',\n      html: '&times;',\n      events: {\n        click: (evt) => {\n          this.closeLightBox();\n          evt.stopPropagation();\n        }\n      }\n    });\n    \n    // Create video info display\n    const videoInfoDisplay = createElement('div', {\n      className: 'td-video-info',\n      styles: {\n        fontSize: '14px',\n        color: '#888',\n        marginRight: '10px'\n      }\n    });\n    \n    lightBoxHeader.appendChild(lightBoxTitle);\n    lightBoxHeader.appendChild(videoInfoDisplay);\n    lightBoxHeader.appendChild(closeButton);\n    \n    // Create control strip for lightbox\n    const lightboxControlStrip = this.createLightboxControlStrip();\n    \n    // Create emoji grid with 2x2 table layout\n    const emojiGrid = this.createEmojiGrid();\n    \n    // Create comment box\n    const commentBox = createElement('div', {\n      className: 'comment-box'\n    });\n    \n    const commentTextarea = createElement('textarea', {\n      placeholder: 'Add a comment (optional)',\n      attributes: {\n        'rows': 3,\n        'maxlength': 500\n      },\n      events: {\n        input: (evt) => {\n          const comment = evt.target.value;\n          \n          // Extract URLs from comment text\n          const extractedUrl = this.extractUrlFromText(comment);\n          if (extractedUrl) {\n            saveToStorage('extractedUrl', extractedUrl);\n          }\n          \n          // Save comment to storage\n          saveToStorage('comment', comment);\n          \n          // Save event to history immediately\n          this.saveEventToHistory({\n            type: 'comment_update',\n            comment: comment,\n            extractedUrl: extractedUrl\n          });\n        }\n      }\n    });\n    \n    commentBox.appendChild(commentTextarea);\n    \n    // Create video upload/capture buttons\n    const mediaButtons = createElement('div', {\n      className: 'media-buttons'\n    });\n    \n    const uploadButton = createElement('button', {\n      className: 'media-button upload-button',\n      text: '📤 Upload Video',\n      events: {\n        click: (evt) => {\n          // Create a file input element\n          const fileInput = createElement('input', {\n            attributes: {\n              'type': 'file',\n              'accept': 'video/*'\n            },\n            events: {\n              change: (e) => {\n                const file = e.target.files[0];\n                if (file) {\n                  this.log('Video file selected', file.name);\n                  // Save file info to storage\n                  saveToStorage('uploadedVideo', file.name);\n                  \n                  // Show file name in the UI\n                  const fileNameDisplay = document.createElement('div');\n                  fileNameDisplay.className = 'uploaded-file-name';\n                  fileNameDisplay.textContent = `Selected: ${file.name}`;\n                  mediaButtons.appendChild(fileNameDisplay);\n                  \n                  // Save event to history\n                  this.saveEventToHistory({\n                    type: 'video_upload',\n                    fileName: file.name,\n                    fileSize: file.size,\n                    fileType: file.type\n                  });\n                }\n              }\n            }\n          });\n          \n          // Trigger file selection dialog\n          document.body.appendChild(fileInput);\n          fileInput.click();\n          document.body.removeChild(fileInput);\n          \n          evt.stopPropagation();\n        }\n      }\n    });\n    \n    const captureButton = createElement('button', {\n      className: 'media-button capture-button',\n      text: '📹 Record Video',\n      events: {\n        click: (evt) => {\n          // Toggle recording state\n          if (this.state.recording) {\n            // Stop recording\n            this.stopRecording();\n            captureButton.textContent = '📹 Record Video';\n            \n            // Show recording saved message\n            const recordingMessage = document.createElement('div');\n            recordingMessage.className = 'recording-message';\n            recordingMessage.textContent = 'Recording saved';\n            mediaButtons.appendChild(recordingMessage);\n            \n            // Remove message after 3 seconds\n            setTimeout(() => {\n              if (recordingMessage.parentNode) {\n                recordingMessage.parentNode.removeChild(recordingMessage);\n              }\n            }, 3000);\n          } else {\n            // Start recording\n            this.startRecording();\n            captureButton.textContent = '⏹️ Stop Recording';\n          }\n          \n          evt.stopPropagation();\n        }\n      }\n    });\n    \n    mediaButtons.appendChild(uploadButton);\n    mediaButtons.appendChild(captureButton);\n    \n    commentBox.appendChild(mediaButtons);\n    \n    // Create action buttons\n    const actionButtons = createElement('div', {\n      className: 'action-buttons'\n    });\n    \n    const cancelButton = createElement('button', {\n      className: 'action-button cancel-button',\n      text: 'Cancel',\n      events: {\n        click: (evt) => {\n          this.closeLightBox();\n          evt.stopPropagation();\n        }\n      }\n    });\n    \n    const saveButton = createElement('button', {\n      className: 'action-button save-button',\n      text: 'Save',\n      events: {\n        click: (evt) => {\n          this.saveThrowDown();\n          evt.stopPropagation();\n        }\n      }\n    });\n    \n    actionButtons.appendChild(cancelButton);\n    actionButtons.appendChild(saveButton);\n    \n    // Append elements to light-box in the correct order\n    lightBoxContent.appendChild(lightBoxHeader);\n    lightBoxContent.appendChild(emojiGrid);\n    \n    // Add a clear separator between emoji grid and control strip\n    const separator = createElement('div', {\n      styles: {\n        width: '100%',\n        height: '20px',\n        clear: 'both'\n      }\n    });\n    lightBoxContent.appendChild(separator);\n    \n  // Add control strip after the emoji grid and before the comment box\n  // Using the new BEM/utility classes for proper styling\n  \n  lightBoxContent.appendChild(lightboxControlStrip);\n    lightBoxContent.appendChild(commentBox);\n    lightBoxContent.appendChild(actionButtons);\n    lightBoxModal.appendChild(lightBoxContent);\n    \n    // Append light-box to body\n    document.body.appendChild(lightBoxModal);\n    \n    // Store references\n    this.elements.lightBox = lightBoxModal;\n    this.elements.lightBoxContent = lightBoxContent;\n    this.elements.lightboxControlStrip = lightboxControlStrip;\n    this.elements.videoInfoDisplay = videoInfoDisplay;\n    this.elements.emojiGrid = emojiGrid;\n    this.elements.commentBox = commentBox;\n  }\n  \n  /**\n   * Create emoji grid with 2x2 table layout\n   * @returns {HTMLElement} The emoji grid element\n   */\n  createEmojiGrid() {\n    // Create emoji grid using CSS Grid for the main layout\n    const emojiGrid = createElement('div', {\n      className: 'emoji-grid',\n      styles: {\n        display: 'grid',\n        gridTemplateColumns: '1fr 1fr',\n        gridTemplateRows: '1fr 1fr',\n        gap: '10px',\n        width: '100%'\n      }\n    });\n    \n    // Create quadrants directly in the grid\n    // Top-left quadrant (0,0) - Dove Quadrant\n    const emojiTopLeftQuadrant = createElement('div', {\n      className: 'emoji-quadrant top-left',\n      styles: {\n        gridRow: '1',\n        gridColumn: '1'\n      }\n    });\n    \n    // Top-right quadrant (0,1) - Star Quadrant\n    const emojiTopRightQuadrant = createElement('div', {\n      className: 'emoji-quadrant top-right',\n      styles: {\n        gridRow: '1',\n        gridColumn: '2'\n      }\n    });\n    \n    // Bottom-left quadrant (1,0) - Rain Cloud Quadrant\n    const emojiBottomLeftQuadrant = createElement('div', {\n      className: 'emoji-quadrant bottom-left',\n      styles: {\n        gridRow: '2',\n        gridColumn: '1'\n      }\n    });\n    \n    // Bottom-right quadrant (1,1) - Collision Quadrant\n    const emojiBottomRightQuadrant = createElement('div', {\n      className: 'emoji-quadrant bottom-right',\n      styles: {\n        gridRow: '2',\n        gridColumn: '2'\n      }\n    });\n    \n    // Add emojis to each quadrant using table layout (2 rows x 2 columns)\n    // Top-left quadrant (Dove Quadrant)\n    this.createEmojiTable(\n      emojiTopLeftQuadrant, \n      this.config.emojis.thoughts.topLeft, \n      'top-left'\n    );\n    \n    // Top-right quadrant (Star Quadrant)\n    this.createEmojiTable(\n      emojiTopRightQuadrant, \n      this.config.emojis.thoughts.topRight, \n      'top-right'\n    );\n    \n    // Bottom-left quadrant (Rain Cloud Quadrant)\n    this.createEmojiTable(\n      emojiBottomLeftQuadrant, \n      this.config.emojis.thoughts.bottomLeft, \n      'bottom-left'\n    );\n    \n    // Bottom-right quadrant (Collision Quadrant)\n    this.createEmojiTable(\n      emojiBottomRightQuadrant, \n      this.config.emojis.thoughts.bottomRight, \n      'bottom-right'\n    );\n    \n    // Add all quadrants directly to the grid\n    emojiGrid.appendChild(emojiTopLeftQuadrant);\n    emojiGrid.appendChild(emojiTopRightQuadrant);\n    emojiGrid.appendChild(emojiBottomLeftQuadrant);\n    emojiGrid.appendChild(emojiBottomRightQuadrant);\n    \n    return emojiGrid;\n  }\n  \n  /**\n   * Create a 2x2 emoji table for a quadrant\n   * @param {HTMLElement} quadrantElement - The quadrant element to add the table to\n   * @param {Array} emojis - Array of emojis for this quadrant\n   * @param {string} quadrantName - Name of the quadrant\n   * @returns {HTMLElement} The emoji table element\n   */\n  createEmojiTable(quadrantElement, emojis, quadrantName) {\n    // First row\n    const firstRow = createElement('div', { className: 'emoji-row' });\n    \n    // First row, first cell\n    const cell1 = createElement('div', { className: 'emoji-cell' });\n    if (emojis[0]) {\n      const emojiElement = createElement('div', { \n        className: 'thought-emoji', \n        text: emojis[0],\n        attributes: {\n          'data-emoji': emojis[0],\n          'data-quadrant': quadrantName,\n          'data-index': 0\n        },\n        events: {\n          click: (evt) => {\n            this.selectEmoji(emojiElement, emojis[0], quadrantName, 0);\n          }\n        }\n      });\n      cell1.appendChild(emojiElement);\n    }\n    \n    // First row, second cell\n    const cell2 = createElement('div', { className: 'emoji-cell' });\n    if (emojis[1]) {\n      const emojiElement = createElement('div', { \n        className: 'thought-emoji', \n        text: emojis[1],\n        attributes: {\n          'data-emoji': emojis[1],\n          'data-quadrant': quadrantName,\n          'data-index': 1\n        },\n        events: {\n          click: (evt) => {\n            this.selectEmoji(emojiElement, emojis[1], quadrantName, 1);\n          }\n        }\n      });\n      cell2.appendChild(emojiElement);\n    }\n    \n    firstRow.appendChild(cell1);\n    firstRow.appendChild(cell2);\n    \n    // Second row\n    const secondRow = createElement('div', { className: 'emoji-row' });\n    \n    // Second row, first cell\n    const cell3 = createElement('div', { className: 'emoji-cell' });\n    if (emojis[2]) {\n      const emojiElement = createElement('div', { \n        className: 'thought-emoji', \n        text: emojis[2],\n        attributes: {\n          'data-emoji': emojis[2],\n          'data-quadrant': quadrantName,\n          'data-index': 2\n        },\n        events: {\n          click: (evt) => {\n            this.selectEmoji(emojiElement, emojis[2], quadrantName, 2);\n          }\n        }\n      });\n      cell3.appendChild(emojiElement);\n    }\n    \n    // Second row, second cell\n    const cell4 = createElement('div', { className: 'emoji-cell' });\n    if (emojis[3]) {\n      const emojiElement = createElement('div', { \n        className: 'thought-emoji', \n        text: emojis[3],\n        attributes: {\n          'data-emoji': emojis[3],\n          'data-quadrant': quadrantName,\n          'data-index': 3\n        },\n        events: {\n          click: (evt) => {\n            this.selectEmoji(emojiElement, emojis[3], quadrantName, 3);\n          }\n        }\n      });\n      cell4.appendChild(emojiElement);\n    }\n    \n    secondRow.appendChild(cell3);\n    secondRow.appendChild(cell4);\n    \n    // Add rows to quadrant\n    quadrantElement.appendChild(firstRow);\n    quadrantElement.appendChild(secondRow);\n  }\n  \n  /**\n   * Extract the first URL from text\n   * @param {string} text - The text to extract URL from\n   * @returns {string|null} The extracted URL or null if none found\n   */\n  extractUrlFromText(text) {\n    if (!text) return null;\n    \n    const urlRegex = /(https?:\\/\\/[^\\s]+)/g;\n    const matches = text.match(urlRegex);\n    \n    return matches && matches.length > 0 ? matches[0] : null;\n  }\n  \n  /**\n   * Save event to history in local storage\n   * @param {Object} eventData - The event data to save\n   */\n  saveEventToHistory(eventData) {\n    // Add timestamp to event data\n    eventData.timestamp = new Date().toISOString();\n    \n    // Add current state context\n    eventData.context = {\n      profileBubblePosition: this.state.profileBubblePosition,\n      currentQuadrant: this.state.currentQuadrant,\n      containerDimensions: this.state.containerDimensions\n    };\n    \n    // Get existing events or initialize empty array\n    let events = [];\n    try {\n      const storedEvents = localStorage.getItem('quadTapEvents');\n      if (storedEvents) {\n        events = JSON.parse(storedEvents);\n      }\n    } catch (e) {\n      this.log('Error parsing stored events', e);\n    }\n    \n    // Add new event to history\n    events.push(eventData);\n    \n    // Save back to local storage\n    localStorage.setItem('quadTapEvents', JSON.stringify(events));\n    \n    // Also save current event separately for immediate access\n    localStorage.setItem('quadTapCurrentEvent', JSON.stringify(eventData));\n    \n    this.log('Event saved to history', eventData);\n  }\n  \n  /**\n   * Select emoji in the grid\n   * @param {HTMLElement} emojiElement - The emoji element that was clicked\n   * @param {string} emoji - The emoji character\n   * @param {string} quadrant - The quadrant name\n   * @param {number} index - The index of the emoji in the quadrant\n   */\n  selectEmoji(emojiElement, emoji, quadrant, index) {\n    this.log('Emoji selected', { emoji, quadrant, index });\n    \n    // Highlight the selected emoji\n    const allEmojis = this.elements.emojiGrid.querySelectorAll('.thought-emoji');\n    allEmojis.forEach(el => el.classList.remove('selected'));\n    emojiElement.classList.add('selected');\n    \n    // Save selection to local storage\n    saveToStorage('selectedEmoji', emoji);\n    saveToStorage('selectedQuadrant', quadrant);\n    saveToStorage('selectedIndex', index);\n    \n    // Save event to history immediately\n    this.saveEventToHistory({\n      type: 'emoji_selected',\n      emoji: emoji,\n      quadrant: quadrant,\n      index: index\n    });\n    \n    // Save video context\n    const video = document.querySelector(this.config.videoSelector);\n    if (video) {\n      saveToStorage('videoTime', video.currentTime);\n      saveToStorage('videoId', video.getAttribute('data-video-id') || 'unknown');\n    }\n    \n    // Save position context\n    saveToStorage('positionX', this.state.profileBubblePosition.x);\n    saveToStorage('positionY', this.state.profileBubblePosition.y);\n    \n    // Call callback if provided\n    if (this.config.callbacks.onThrowDownConfirm) {\n      const videoInfo = video ? {\n        currentTime: video.currentTime,\n        videoId: video.getAttribute('data-video-id') || 'unknown',\n        duration: video.duration\n      } : null;\n      \n      this.config.callbacks.onThrowDownConfirm(\n        quadrant, \n        this.state.profileBubblePosition.x, \n        this.state.profileBubblePosition.y,\n        videoInfo\n      );\n    }\n  }\n  \n  /**\n   * Save throw-down with comment\n   */\n  saveThrowDown() {\n    this.log('Saving throw-down');\n    \n    // Get comment from textarea\n    const commentTextarea = this.elements.commentBox.querySelector('textarea');\n    const comment = commentTextarea ? commentTextarea.value : '';\n    \n    // Extract URL from comment\n    const extractedUrl = this.extractUrlFromText(comment);\n    \n    // Save comment and URL to storage\n    saveToStorage('comment', comment);\n    if (extractedUrl) {\n      saveToStorage('extractedUrl', extractedUrl);\n    }\n    \n    // Save timestamp\n    saveToStorage('timestamp', Date.now());\n    \n    // Get video element and extract additional metadata\n    const video = document.querySelector(this.config.videoSelector);\n    const videoMetadata = {};\n    \n    if (video) {\n      // Extract all data attributes from the video element\n      Array.from(video.attributes)\n        .filter(attr => attr.name.startsWith('data-'))\n        .forEach(attr => {\n          const key = attr.name.replace('data-', '');\n          videoMetadata[key] = attr.value;\n        });\n      \n      // Add additional video context\n      videoMetadata.duration = video.duration || 0;\n      videoMetadata.currentTime = video.currentTime || 0;\n      videoMetadata.paused = video.paused;\n      videoMetadata.muted = video.muted;\n      videoMetadata.volume = video.volume;\n      videoMetadata.playbackRate = video.playbackRate;\n      videoMetadata.videoWidth = video.videoWidth;\n      videoMetadata.videoHeight = video.videoHeight;\n      videoMetadata.src = video.currentSrc || video.src;\n    }\n    \n    // Create enhanced context object\n    const context = {\n      // User selection\n      selectedEmoji: getFromStorage('selectedEmoji', ''),\n      selectedQuadrant: getFromStorage('selectedQuadrant', ''),\n      selectedIndex: getFromStorage('selectedIndex', -1),\n      comment: comment,\n      extractedUrl: extractedUrl || getFromStorage('extractedUrl', ''),\n      \n      // Position data\n      positionX: this.state.profileBubblePosition.x,\n      positionY: this.state.profileBubblePosition.y,\n      quadrant: this.state.currentQuadrant,\n      \n      // Video data\n      videoId: getFromStorage('videoId', video ? (video.getAttribute('data-video-id') || 'unknown') : 'unknown'),\n      videoTime: getFromStorage('videoTime', video ? video.currentTime : 0),\n      videoMetadata: videoMetadata,\n      \n      // Container data\n      containerId: this.config.containerId,\n      containerWidth: this.state.containerDimensions.width,\n      containerHeight: this.state.containerDimensions.height,\n      \n      // Timestamp data\n      timestamp: Date.now(),\n      timezoneOffset: new Date().getTimezoneOffset(),\n      locale: navigator.language || 'en-US',\n      \n      // User agent data (for device context)\n      userAgent: navigator.userAgent,\n      platform: navigator.platform,\n      \n      // Page context\n      url: window.location.href,\n      referrer: document.referrer,\n      title: document.title\n    };\n    \n    // Save entire context\n    saveThrowDownContext(context);\n    \n    // Close light-box\n    this.closeLightBox();\n    \n    this.log('Throw-down saved', context);\n  }\n  \n  /**\n   * Bind event handlers\n   */\n  bindEventHandlers() {\n    const self = this;\n    \n    // Get video element\n    this.elements.video = document.querySelector(this.config.videoSelector);\n    \n    // Single event handler for container clicks\n    this.elements.container.addEventListener('click', function(evt) {\n      // Prevent the event from reaching the video element and toggling play/pause\n      evt.preventDefault();\n      evt.stopPropagation();\n      \n      // Skip if clicking on a video control button\n      if (evt.target.closest('.video-control-button')) {\n        return;\n      }\n      \n      if (!self.state.active) {\n        // First tap - activate overlay\n        const rect = self.elements.container.getBoundingClientRect();\n        const x = evt.clientX - rect.left;\n        const y = evt.clientY - rect.top;\n        self.activateOverlay(x, y);\n      } else {\n        // Second tap - check if on profile bubble\n        const isOnBubble = evt.target === self.elements.profileBubble || \n                           self.elements.profileBubble.contains(evt.target);\n        \n        if (isOnBubble) {\n          // Open light-box\n          self.openLightBox();\n        } else {\n          // Deactivate overlay\n          self.deactivateOverlay();\n        }\n      }\n    });\n    \n    // Backup direct click handler for profile bubble\n    this.elements.profileBubble.addEventListener('click', function(evt) {\n      if (self.state.active) {\n        self.openLightBox();\n        evt.stopPropagation();\n      }\n    });\n    \n    // Close light-box when clicking outside content\n    this.elements.lightBox.addEventListener('click', function(evt) {\n      if (evt.target === self.elements.lightBox) {\n        self.closeLightBox();\n      }\n    });\n    \n    // Add keyboard support for accessibility\n    document.addEventListener('keydown', function(evt) {\n      // ESC key\n      if (evt.key === 'Escape') {\n        if (self.elements.lightBox.classList.contains('active')) {\n          self.closeLightBox();\n        } else if (self.state.active) {\n          self.deactivateOverlay();\n        }\n      }\n    });\n    \n    // Track video play/pause state\n    if (this.elements.video) {\n      this.elements.video.addEventListener('play', function() {\n        self.state.videoPlaying = true;\n      });\n      \n      this.elements.video.addEventListener('pause', function() {\n        self.state.videoPlaying = false;\n      });\n    }\n    \n    // Handle window resize\n    window.addEventListener('resize', this.throttledResize);\n    \n    // Store initial container dimensions\n    this.updateContainerDimensions();\n  }\n  \n  /**\n   * Handle window resize\n   */\n  handleResize() {\n    if (this.state.active) {\n      this.updateContainerDimensions();\n      \n      // Position all elements based on the new dimensions\n      const pixelX = this.state.containerDimensions.width * this.state.profileBubblePosition.x;\n      const pixelY = this.state.containerDimensions.height * this.state.profileBubblePosition.y;\n      \n      // Position profile bubble\n      positionElementWithCenterMaintained(this.elements.profileBubble, pixelX, pixelY);\n      \n      // Position directional emojis\n      this.positionDirectionalEmojis(pixelX, pixelY);\n      \n      // Position quadrant emojis\n      this.positionQuadrantEmojis();\n      \n      // Position video controls\n      this.positionVideoControls();\n      \n      // Position tooltip\n      this.positionTooltip();\n    }\n  }\n  \n  /**\n   * Update container dimensions\n   */\n  updateContainerDimensions() {\n    if (this.elements.container) {\n      const rect = this.elements.container.getBoundingClientRect();\n      this.state.containerDimensions = {\n        width: rect.width,\n        height: rect.height\n      };\n    }\n  }\n  \n  /**\n   * Activate overlay\n   * @param {number} x - X coordinate of the tap in pixels\n   * @param {number} y - Y coordinate of the tap in pixels\n   */\n  activateOverlay(x, y) {\n    this.log('Activating overlay', { x, y });\n    \n    // Convert pixel coordinates to percentages (0-1)\n    const percentX = x / this.state.containerDimensions.width;\n    const percentY = y / this.state.containerDimensions.height;\n    \n    // Store profile bubble position as percentages\n    this.state.profileBubblePosition = { x: percentX, y: percentY };\n    \n    // Determine quadrant\n    this.state.currentQuadrant = getQuadrant(x, y, this.elements.container);\n    this.log('Current quadrant', this.state.currentQuadrant);\n    \n    // Show overlay - ensure both display and opacity/pointer-events are set\n    this.elements.overlay.style.display = 'block';\n    \n    // Use setTimeout to ensure the display change has taken effect before adding the active class\n    setTimeout(() => {\n      this.elements.overlay.classList.add('active');\n    }, 10);\n    \n    // Position and show profile bubble at tap location\n    this.elements.profileBubble.style.display = 'flex';\n    \n    // Convert percentage coordinates back to pixels for positioning\n    const pixelX = this.state.containerDimensions.width * this.state.profileBubblePosition.x;\n    const pixelY = this.state.containerDimensions.height * this.state.profileBubblePosition.y;\n    positionElementWithCenterMaintained(this.elements.profileBubble, pixelX, pixelY);\n    \n    // Position and show directional emojis\n    this.positionDirectionalEmojis(x, y);\n    \n    // Position and show quadrant emojis\n    this.positionQuadrantEmojis();\n    \n    // Position and show video controls\n    this.positionVideoControls();\n    \n    // Position and show tooltip\n    this.positionTooltip();\n    \n    // Set active state\n    this.state.active = true;\n    \n    // Set auto-cancel timer\n    if (this.config.autoCancelTimeout > 0) {\n      this.state.autoCancelTimer = setTimeout(() => {\n        this.deactivateOverlay();\n      }, this.config.autoCancelTimeout);\n    }\n    \n    // Call callback if provided\n    if (this.config.callbacks.onOverlayActivate) {\n      this.config.callbacks.onOverlayActivate(x, y);\n    }\n    \n    // IMPORTANT: Do NOT pause video here - video should only pause when lightbox opens\n    // if pauseOnLightboxOnly is enabled (which is handled in openLightBox method)\n  }\n  \n  /**\n   * Position directional emojis\n   * @param {number} x - X coordinate of the tap\n   * @param {number} y - Y coordinate of the tap\n   */\n  positionDirectionalEmojis(x, y) {\n    const { width, height } = this.state.containerDimensions;\n    \n    // Calculate distances from edges\n    const distanceFromTop = y;\n    const distanceFromRight = width - x;\n    const distanceFromBottom = height - y;\n    const distanceFromLeft = x;\n    \n    // Calculate positions of directional emojis\n    const upPosition = { x: width / 2, y: height * 0.1 };\n    const rightPosition = { x: width * 0.9, y: height / 2 };\n    const downPosition = { x: width / 2, y: height * 0.9 };\n    const leftPosition = { x: width * 0.1, y: height / 2 };\n    \n    // Calculate distances from tap point to each directional emoji\n    const distanceToUp = Math.sqrt(Math.pow(x - upPosition.x, 2) + Math.pow(y - upPosition.y, 2));\n    const distanceToRight = Math.sqrt(Math.pow(x - rightPosition.x, 2) + Math.pow(y - rightPosition.y, 2));\n    const distanceToDown = Math.sqrt(Math.pow(x - downPosition.x, 2) + Math.pow(y - downPosition.y, 2));\n    const distanceToLeft = Math.sqrt(Math.pow(x - leftPosition.x, 2) + Math.pow(y - leftPosition.y, 2));\n    \n    // Calculate max possible distance (diagonal of container)\n    const maxDistance = Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2));\n    \n    // Calculate scaling factors (0.5 to 2.0)\n    // The closer to the tap point, the larger the emoji\n    // Also consider distance from edges for additional effect\n    const upScale = 0.8 + Math.max(0, 1.2 * (1 - distanceToUp / maxDistance)) + \n                   Math.max(0, 0.8 * (1 - distanceFromTop / (height / 2)));\n    \n    const rightScale = 0.8 + Math.max(0, 1.2 * (1 - distanceToRight / maxDistance)) + \n                      Math.max(0, 0.8 * (1 - distanceFromRight / (width / 2)));\n    \n    const downScale = 0.8 + Math.max(0, 1.2 * (1 - distanceToDown / maxDistance)) + \n                     Math.max(0, 0.8 * (1 - distanceFromBottom / (height / 2)));\n    \n    const leftScale = 0.8 + Math.max(0, 1.2 * (1 - distanceToLeft / maxDistance)) + \n                     Math.max(0, 0.8 * (1 - distanceFromLeft / (width / 2)));\n    \n    // Position and scale up emoji\n    const upEmoji = this.elements.directionalEmojis.up;\n    upEmoji.style.display = 'block';\n    upEmoji.style.position = 'absolute';\n    upEmoji.style.top = '10%';\n    upEmoji.style.left = '50%';\n    upEmoji.style.transform = `translate(-50%, 0) scale(${upScale})`;\n    upEmoji.style.fontSize = '2rem';\n    upEmoji.style.opacity = '0.8';\n    \n    // Position and scale right emoji\n    const rightEmoji = this.elements.directionalEmojis.right;\n    rightEmoji.style.display = 'block';\n    rightEmoji.style.position = 'absolute';\n    rightEmoji.style.top = '50%';\n    rightEmoji.style.right = '10%';\n    rightEmoji.style.transform = `translate(0, -50%) scale(${rightScale})`;\n    rightEmoji.style.fontSize = '2rem';\n    rightEmoji.style.opacity = '0.8';\n    \n    // Position and scale down emoji\n    const downEmoji = this.elements.directionalEmojis.down;\n    downEmoji.style.display = 'block';\n    downEmoji.style.position = 'absolute';\n    downEmoji.style.bottom = '10%';\n    downEmoji.style.left = '50%';\n    downEmoji.style.transform = `translate(-50%, 0) scale(${downScale})`;\n    downEmoji.style.fontSize = '2rem';\n    downEmoji.style.opacity = '0.8';\n    \n    // Position and scale left emoji\n    const leftEmoji = this.elements.directionalEmojis.left;\n    leftEmoji.style.display = 'block';\n    leftEmoji.style.position = 'absolute';\n    leftEmoji.style.top = '50%';\n    leftEmoji.style.left = '10%';\n    leftEmoji.style.transform = `translate(0, -50%) scale(${leftScale})`;\n    leftEmoji.style.fontSize = '2rem';\n    leftEmoji.style.opacity = '0.8';\n  }\n  \n  /**\n   * Position quadrant emojis\n   */\n  positionQuadrantEmojis() {\n    // Default size for quadrant emojis\n    const defaultFontSize = '2.5rem';\n    const defaultOpacity = '0.6';\n    \n    // Position top-left emoji\n    const topLeftEmoji = this.elements.quadrantEmojis.topLeft;\n    topLeftEmoji.style.display = 'block';\n    topLeftEmoji.style.position = 'absolute';\n    topLeftEmoji.style.top = '8%';\n    topLeftEmoji.style.left = '8%';\n    topLeftEmoji.style.transform = 'translate(-50%, -50%)';\n    topLeftEmoji.style.fontSize = defaultFontSize;\n    topLeftEmoji.style.opacity = defaultOpacity;\n    \n    // Position top-right emoji\n    const topRightEmoji = this.elements.quadrantEmojis.topRight;\n    topRightEmoji.style.display = 'block';\n    topRightEmoji.style.position = 'absolute';\n    topRightEmoji.style.top = '8%';\n    topRightEmoji.style.right = '8%';\n    topRightEmoji.style.transform = 'translate(50%, -50%)';\n    topRightEmoji.style.fontSize = defaultFontSize;\n    topRightEmoji.style.opacity = defaultOpacity;\n    \n    // Position bottom-left emoji\n    const bottomLeftEmoji = this.elements.quadrantEmojis.bottomLeft;\n    bottomLeftEmoji.style.display = 'block';\n    bottomLeftEmoji.style.position = 'absolute';\n    bottomLeftEmoji.style.bottom = '8%';\n    bottomLeftEmoji.style.left = '8%';\n    bottomLeftEmoji.style.transform = 'translate(-50%, 50%)';\n    bottomLeftEmoji.style.fontSize = defaultFontSize;\n    bottomLeftEmoji.style.opacity = defaultOpacity;\n    \n    // Position bottom-right emoji\n    const bottomRightEmoji = this.elements.quadrantEmojis.bottomRight;\n    bottomRightEmoji.style.display = 'block';\n    bottomRightEmoji.style.position = 'absolute';\n    bottomRightEmoji.style.bottom = '8%';\n    bottomRightEmoji.style.right = '8%';\n    bottomRightEmoji.style.transform = 'translate(50%, 50%)';\n    bottomRightEmoji.style.fontSize = defaultFontSize;\n    bottomRightEmoji.style.opacity = defaultOpacity;\n    \n    // Enlarge the emoji in the tapped quadrant\n    if (this.state.currentQuadrant) {\n      const enlargedFontSize = '3.5rem';\n      const enlargedOpacity = '0.8';\n      \n      switch (this.state.currentQuadrant) {\n        case 'top-left':\n          topLeftEmoji.style.fontSize = enlargedFontSize;\n          topLeftEmoji.style.opacity = enlargedOpacity;\n          break;\n        case 'top-right':\n          topRightEmoji.style.fontSize = enlargedFontSize;\n          topRightEmoji.style.opacity = enlargedOpacity;\n          break;\n        case 'bottom-left':\n          bottomLeftEmoji.style.fontSize = enlargedFontSize;\n          bottomLeftEmoji.style.opacity = enlargedOpacity;\n          break;\n        case 'bottom-right':\n          bottomRightEmoji.style.fontSize = enlargedFontSize;\n          bottomRightEmoji.style.opacity = enlargedOpacity;\n          break;\n      }\n    }\n  }\n  \n  /**\n   * Position video controls\n   */\n  positionVideoControls() {\n    if (!this.config.videoControls.enabled) {\n      return;\n    }\n    \n    const videoControls = this.elements.videoControls;\n    videoControls.style.display = 'flex';\n    \n    // The ControlStrip component already handles positioning\n    // We don't need to set position styles here\n  }\n  \n  /**\n   * Position tooltip based on configuration\n   */\n  positionTooltip() {\n    // Skip if tooltip is disabled in config\n    if (!this.config.tooltip || this.config.tooltip.enabled === false) {\n      return;\n    }\n    \n    const tooltip = this.elements.tooltip;\n    tooltip.style.display = 'block';\n    tooltip.style.position = 'absolute';\n    tooltip.style.zIndex = '1001'; // Ensure it's above other elements\n    \n    // Set tooltip text from config\n    if (this.config.tooltip.text) {\n      tooltip.textContent = this.config.tooltip.text;\n    }\n    \n    // Apply tooltip position based on config\n    const position = this.config.tooltip.position || 'above-controls';\n    \n    switch (position) {\n      case 'above-controls':\n        tooltip.style.top = '40%'; // Position above the control strip (which is at 50%)\n        tooltip.style.left = '50%';\n        tooltip.style.transform = 'translate(-50%, -50%)';\n        break;\n      case 'below-controls':\n        tooltip.style.top = '60%'; // Position below the control strip\n        tooltip.style.left = '50%';\n        tooltip.style.transform = 'translate(-50%, -50%)';\n        break;\n      case 'on-bubble':\n        // Position near the bubble\n        const bubbleRect = this.elements.profileBubble.getBoundingClientRect();\n        const overlayRect = this.elements.overlay.getBoundingClientRect();\n        \n        // Calculate position relative to the overlay\n        const bubbleTop = (bubbleRect.top - overlayRect.top) / overlayRect.height * 100;\n        \n        tooltip.style.top = `${bubbleTop - 10}%`; // 10% above the bubble\n        tooltip.style.left = '50%';\n        tooltip.style.transform = 'translate(-50%, -100%)';\n        break;\n      default:\n        // Default to above controls\n        tooltip.style.top = '40%';\n        tooltip.style.left = '50%';\n        tooltip.style.transform = 'translate(-50%, -50%)';\n    }\n    \n    // Apply tooltip styles from config\n    if (this.config.tooltip.style) {\n      const style = this.config.tooltip.style;\n      \n      if (style.backgroundColor) tooltip.style.backgroundColor = style.backgroundColor;\n      if (style.color) tooltip.style.color = style.color;\n      if (style.padding) tooltip.style.padding = style.padding;\n      if (style.borderRadius) tooltip.style.borderRadius = style.borderRadius;\n    } else {\n      // Apply default styles\n      tooltip.style.textAlign = 'center';\n      tooltip.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';\n      tooltip.style.color = 'white';\n      tooltip.style.padding = '8px 12px';\n      tooltip.style.borderRadius = '4px';\n    }\n  }\n  \n  /**\n   * Control video playback\n   * @param {string} action - The action to perform (rewind, playpause, forward, share)\n   */\n  controlVideo(action) {\n    this.log('Controlling video', action);\n    \n    const video = document.querySelector(this.config.videoSelector);\n    if (!video) {\n      this.log('Video element not found');\n      return;\n    }\n    \n    switch (action) {\n      case 'rewind':\n        video.currentTime = Math.max(0, video.currentTime - this.config.videoControls.rewindTime);\n        break;\n        \n      case 'playpause':\n        if (video.paused) {\n          video.play();\n        } else {\n          video.pause();\n        }\n        break;\n        \n      case 'forward':\n        video.currentTime = Math.min(video.duration, video.currentTime + this.config.videoControls.forwardTime);\n        break;\n        \n      case 'share':\n        // Implement share functionality\n        if (navigator.share) {\n          navigator.share({\n            title: 'Shared Video',\n            text: 'Check out this video!',\n            url: window.location.href\n          }).catch(err => {\n            console.error('Share failed:', err);\n          });\n        } else {\n          alert('Share feature not supported by your browser');\n        }\n        break;\n    }\n    \n    // Call callback if provided\n    if (this.config.callbacks.onVideoControl) {\n      this.config.callbacks.onVideoControl(action, video.currentTime);\n    }\n  }\n  \n  /**\n   * Deactivate overlay\n   */\n  deactivateOverlay() {\n    this.log('Deactivating overlay');\n    \n    // First remove the active class to trigger the opacity transition\n    this.elements.overlay.classList.remove('active');\n    \n    // Then hide the overlay after the transition completes\n    setTimeout(() => {\n      // Only hide if still inactive (prevent race conditions)\n      if (!this.state.active) {\n        this.elements.overlay.style.display = 'none';\n        \n        // Hide all elements\n        this.elements.profileBubble.style.display = 'none';\n        \n        Object.values(this.elements.directionalEmojis).forEach(emoji => {\n          emoji.style.display = 'none';\n        });\n        \n        Object.values(this.elements.quadrantEmojis).forEach(emoji => {\n          emoji.style.display = 'none';\n        });\n        \n        this.elements.videoControls.style.display = 'none';\n        this.elements.tooltip.style.display = 'none';\n      }\n    }, 300); // Match the transition duration\n    \n    // Reset state\n    this.state.active = false;\n    \n    // Clear auto-cancel timer\n    if (this.state.autoCancelTimer) {\n      clearTimeout(this.state.autoCancelTimer);\n      this.state.autoCancelTimer = null;\n    }\n    \n    // Call callback if provided\n    if (this.config.callbacks.onThrowDownCancel) {\n      this.config.callbacks.onThrowDownCancel(this.state.currentQuadrant);\n    }\n    \n    this.log('Overlay deactivated');\n  }\n  \n  /**\n   * Open light-box\n   */\n  openLightBox() {\n    this.log('Opening light-box');\n    \n    // Show light-box\n    this.elements.lightBox.classList.add('active');\n    \n    // Clear auto-cancel timer\n    if (this.state.autoCancelTimer) {\n      clearTimeout(this.state.autoCancelTimer);\n      this.state.autoCancelTimer = null;\n    }\n    \n    // Get adapter if available\n    const adapter = this.config.videoPlayerApi && \n                   this.config.videoPlayerApi.enabled && \n                   this.config.videoPlayerApi.adapter;\n    \n    // Store current playing state\n    this.state.wasPlayingBefore = adapter ? adapter.isPlaying() : false;\n    \n    // If no adapter, check DOM video element\n    if (!adapter) {\n      const video = document.querySelector(this.config.videoSelector);\n      this.state.wasPlayingBefore = video ? !video.paused : false;\n    }\n    \n    // Update video time display\n    this.updateVideoTimeDisplay();\n    \n    // Set up interval to update video time display\n    this.videoTimeUpdateInterval = setInterval(() => {\n      this.updateVideoTimeDisplay();\n    }, 1000);\n    \n    // Pause video if pauseOnLightboxOnly is enabled\n    if (this.config.videoControls && this.config.videoControls.pauseOnLightboxOnly) {\n      this.log('Pausing video on lightbox open (pauseOnLightboxOnly=true)');\n      pauseIfPlaying(this);\n      \n      // Update play/pause button state to reflect paused state\n      if (this.elements.videoControls) {\n        updatePlayPauseButton(this.elements.videoControls, false);\n      }\n      \n      // Also update the lightbox control strip\n      if (this.elements.lightboxControlStrip) {\n        const lightboxControlStrip = this.elements.lightboxControlStrip.querySelector('.quad-tap-controls');\n        if (lightboxControlStrip) {\n          updatePlayPauseButton(lightboxControlStrip, false);\n        }\n      }\n    } else {\n      this.log('Not pausing video on lightbox open (pauseOnLightboxOnly=false)');\n    }\n    \n    // Call callback if provided\n    if (this.config.callbacks.onThrowDownInitiate) {\n      this.config.callbacks.onThrowDownInitiate(\n        this.state.currentQuadrant,\n        this.state.profileBubblePosition.x,\n        this.state.profileBubblePosition.y\n      );\n    }\n  }\n  \n  /**\n   * Close light-box\n   */\n  closeLightBox() {\n    this.log('Closing light-box');\n    \n    // Hide light-box\n    this.elements.lightBox.classList.remove('active');\n    \n    // Clear the video time update interval\n    if (this.videoTimeUpdateInterval) {\n      clearInterval(this.videoTimeUpdateInterval);\n      this.videoTimeUpdateInterval = null;\n    }\n    \n    // Get adapter if available\n    const adapter = this.config.videoPlayerApi && \n                   this.config.videoPlayerApi.enabled && \n                   this.config.videoPlayerApi.adapter;\n    \n    // Resume video if pauseOnLightboxOnly is enabled\n    if (this.config.videoControls && this.config.videoControls.pauseOnLightboxOnly) {\n      this.log('Resuming video on lightbox close (pauseOnLightboxOnly=true)');\n      \n      // Use a small timeout to ensure the video plays after the lightbox is fully closed\n      setTimeout(() => {\n        resumeIfNeeded(this);\n        \n        // Update play/pause button state to reflect playing state\n        if (this.elements.videoControls && this.state.wasPlayingBefore) {\n          updatePlayPauseButton(this.elements.videoControls, true);\n        }\n      }, 100);\n    } else {\n      this.log('Not resuming video on lightbox close (pauseOnLightboxOnly=false)');\n    }\n    \n    // Reset the wasPlayingBefore state\n    this.state.wasPlayingBefore = false;\n    \n    // Deactivate overlay\n    this.deactivateOverlay();\n  }\n  \n  /**\n   * Update video time display in the lightbox\n   */\n  updateVideoTimeDisplay() {\n    if (!this.elements.videoInfoDisplay) return;\n    \n    const video = document.querySelector(this.config.videoSelector);\n    if (!video) return;\n    \n    // Format current time and duration\n    const formatTime = (seconds) => {\n      if (isNaN(seconds) || !isFinite(seconds)) return '0:00';\n      \n      const mins = Math.floor(seconds / 60);\n      const secs = Math.floor(seconds % 60);\n      return `${mins}:${secs < 10 ? '0' : ''}${secs}`;\n    };\n    \n    const currentTime = formatTime(video.currentTime);\n    const duration = formatTime(video.duration);\n    \n    // Update the header display\n    this.elements.videoInfoDisplay.textContent = `${currentTime} / ${duration}`;\n    \n    // Update the slider display if available\n    if (this.elements.currentTimeElement) {\n      this.elements.currentTimeElement.textContent = currentTime;\n    }\n    \n    if (this.elements.durationElement) {\n      this.elements.durationElement.textContent = duration;\n    }\n    \n    // Update slider position without triggering the input event\n    if (this.elements.videoSlider && video.duration) {\n      const percent = (video.currentTime / video.duration) * 100;\n      this.elements.videoSlider.value = percent;\n    }\n  }\n  \n  /**\n   * Start video recording\n   */\n  startRecording() {\n    this.log('Starting video recording');\n    \n    // Set recording state\n    this.state.recording = true;\n    \n    // Check if MediaRecorder is available\n    if (!navigator.mediaDevices || !window.MediaRecorder) {\n      this.log('MediaRecorder API not supported');\n      alert('Video recording is not supported in your browser');\n      this.state.recording = false;\n      return;\n    }\n    \n    // Request user media\n    navigator.mediaDevices.getUserMedia({ video: true, audio: true })\n      .then(stream => {\n        // Store stream\n        this.state.mediaStream = stream;\n        \n        // Create recorder\n        this.state.mediaRecorder = new MediaRecorder(stream);\n        \n        // Store recorded chunks\n        const chunks = [];\n        this.state.mediaRecorder.ondataavailable = (e) => {\n          if (e.data.size > 0) {\n            chunks.push(e.data);\n          }\n        };\n        \n        // Handle recording stop\n        this.state.mediaRecorder.onstop = () => {\n          // Create blob from chunks\n          const blob = new Blob(chunks, { type: 'video/webm' });\n          \n          // Save recording to storage\n          saveToStorage('recordedVideo', URL.createObjectURL(blob));\n          \n          // Save event to history\n          this.saveEventToHistory({\n            type: 'video_recording',\n            size: blob.size,\n            duration: Date.now() - this.state.recordingStartTime\n          });\n          \n          // Stop all tracks\n          this.state.mediaStream.getTracks().forEach(track => track.stop());\n          \n          // Reset state\n          this.state.mediaStream = null;\n          this.state.mediaRecorder = null;\n          this.state.recording = false;\n        };\n        \n        // Start recording\n        this.state.mediaRecorder.start();\n        this.state.recordingStartTime = Date.now();\n        \n        // Show recording indicator\n        const recordingIndicator = document.createElement('div');\n        recordingIndicator.className = 'recording-indicator';\n        recordingIndicator.textContent = '🔴 Recording...';\n        recordingIndicator.style.position = 'absolute';\n        recordingIndicator.style.top = '10px';\n        recordingIndicator.style.right = '10px';\n        recordingIndicator.style.backgroundColor = 'rgba(255, 0, 0, 0.7)';\n        recordingIndicator.style.color = 'white';\n        recordingIndicator.style.padding = '5px 10px';\n        recordingIndicator.style.borderRadius = '4px';\n        recordingIndicator.style.zIndex = '1002';\n        \n        this.elements.lightBoxContent.appendChild(recordingIndicator);\n        this.state.recordingIndicator = recordingIndicator;\n      })\n      .catch(err => {\n        this.log('Error accessing media devices', err);\n        alert('Could not access camera and microphone');\n        this.state.recording = false;\n      });\n  }\n  \n  /**\n   * Stop video recording\n   */\n  stopRecording() {\n    this.log('Stopping video recording');\n    \n    if (this.state.mediaRecorder && this.state.recording) {\n      // Stop recording\n      this.state.mediaRecorder.stop();\n      \n      // Remove recording indicator\n      if (this.state.recordingIndicator && this.state.recordingIndicator.parentNode) {\n        this.state.recordingIndicator.parentNode.removeChild(this.state.recordingIndicator);\n      }\n    }\n  }\n  \n  /**\n   * Toggle video pause/play state\n   * This is used by the pause/play button in the lightbox\n   */\n  toggleVideoPause() {\n    this.log('Toggling video pause/play state');\n    \n    // Get adapter if available\n    const adapter = this.config.videoPlayerApi && \n                   this.config.videoPlayerApi.enabled && \n                   this.config.videoPlayerApi.adapter;\n    \n    // Get video element\n    const video = document.querySelector(this.config.videoSelector);\n    \n    if (adapter) {\n      // Use adapter to toggle play state\n      adapter.isPlaying().then(isPlaying => {\n        if (isPlaying) {\n          adapter.pause();\n          // Update button text\n          const pausePlayButton = this.elements.lightBox.querySelector('.td-pause-play-btn');\n          if (pausePlayButton) pausePlayButton.textContent = '▶️';\n        } else {\n          adapter.play();\n          // Update button text\n          const pausePlayButton = this.elements.lightBox.querySelector('.td-pause-play-btn');\n          if (pausePlayButton) pausePlayButton.textContent = '⏸️';\n        }\n      });\n    } else if (video) {\n      // Use DOM video element to toggle play state\n      if (video.paused) {\n        video.play()\n          .then(() => {\n            // Update button text\n            const pausePlayButton = this.elements.lightBox.querySelector('.td-pause-play-btn');\n            if (pausePlayButton) pausePlayButton.textContent = '⏸️';\n          })\n          .catch(err => {\n            this.log('Error playing video', err);\n          });\n      } else {\n        video.pause();\n        // Update button text\n        const pausePlayButton = this.elements.lightBox.querySelector('.td-pause-play-btn');\n        if (pausePlayButton) pausePlayButton.textContent = '▶️';\n      }\n    }\n    \n    // Call callback if provided\n    if (this.config.callbacks.onVideoControl) {\n      this.config.callbacks.onVideoControl('playpause', video ? video.currentTime : 0);\n    }\n  }\n  \n  /**\n   * Destroy the component and clean up\n   */\n  destroy() {\n    this.log('Destroying QuadTap');\n    \n    // Clear any timers\n    if (this.state.autoCancelTimer) {\n      clearTimeout(this.state.autoCancelTimer);\n    }\n    \n    // Remove event listeners\n    if (this.elements.container) {\n      this.elements.container.removeEventListener('click', this.handleContainerClick);\n    }\n    \n    if (this.elements.profileBubble) {\n      this.elements.profileBubble.removeEventListener('click', this.handleBubbleClick);\n    }\n    \n    if (this.elements.lightBox) {\n      this.elements.lightBox.removeEventListener('click', this.handleLightBoxClick);\n    }\n    \n    if (this.elements.video) {\n      this.elements.video.removeEventListener('play', this.handleVideoPlay);\n      this.elements.video.removeEventListener('pause', this.handleVideoPause);\n    }\n    \n    window.removeEventListener('resize', this.throttledResize);\n    document.removeEventListener('keydown', this.handleKeyDown);\n    \n    // Remove elements\n    if (this.elements.overlay && this.elements.overlay.parentNode) {\n      this.elements.overlay.parentNode.removeChild(this.elements.overlay);\n    }\n    \n    if (this.elements.lightBox && this.elements.lightBox.parentNode) {\n      this.elements.lightBox.parentNode.removeChild(this.elements.lightBox);\n    }\n    \n    // Stop any active recording\n    if (this.state.recording && this.state.mediaRecorder) {\n      this.stopRecording();\n    }\n    \n    // Release media stream if it exists\n    if (this.state.mediaStream) {\n      this.state.mediaStream.getTracks().forEach(track => track.stop());\n    }\n    \n    // Reset state\n    this.state = {\n      active: false,\n      profileBubblePosition: { x: 0, y: 0 },\n      currentQuadrant: null,\n      autoCancelTimer: null,\n      containerDimensions: { width: 0, height: 0 },\n      videoPlaying: false,\n      recording: false,\n      mediaStream: null,\n      mediaRecorder: null,\n      recordingStartTime: 0,\n      recordingIndicator: null\n    };\n    \n    this.log('QuadTap destroyed');\n  }\n}\n\nexport default QuadTap;\n","/**\n * QuadTap - Interactive Video Overlay Component\n * Main entry point for the QuadTap package\n */\n\nimport QuadTap from './QuadTap';\nimport SettingsBuilder from './SettingsBuilder';\nimport VideoPlayerAdapter from './adapters/VideoPlayerAdapter';\nimport Coordinates from './utils/coordinates';\nimport * as ControlStrip from './components/ControlStrip';\n\n// Export the main QuadTap class as default\nexport default QuadTap;\n\n// Export additional classes and utilities\nexport {\n  SettingsBuilder,\n  VideoPlayerAdapter,\n  Coordinates,\n  ControlStrip\n};\n\n// Example usage:\n/*\n// Using the default constructor\nconst quadTap = new QuadTap({\n  containerId: 'video-container',\n  videoSelector: '#my-video'\n});\n\n// Using the settings builder\nimport { QuadTap, SettingsBuilder, VideoPlayerAdapter, Coordinates } from 'quad-tap';\n\n// Create a video player adapter\nconst videoAdapter = VideoPlayerAdapter.forHtml5Video(\n  document.querySelector('#my-video'),\n  true // debug mode\n);\n\n// Build settings with fluent interface\nconst settings = new SettingsBuilder()\n  .withContainer('video-container')\n  .withVideoSelector('#my-video')\n  .withDebug(true)\n  .withAutoCancelTimeout(3000)\n  .withQuadrantEmojis({\n    topLeft: \"🕊️\",\n    topRight: \"🌟\",\n    bottomLeft: \"🌧️\",\n    bottomRight: \"💥\"\n  })\n  .withVideoPlayerApi({\n    enabled: true,\n    playMethod: () => videoAdapter.play(),\n    pauseMethod: () => videoAdapter.pause(),\n    seekMethod: (time) => videoAdapter.seek(time),\n    getCurrentTimeMethod: () => videoAdapter.getCurrentTime(),\n    getDurationMethod: () => videoAdapter.getDuration(),\n    getVideoIdMethod: () => videoAdapter.getVideoId()\n  })\n  .withCoordinateSystem({\n    type: 'normalized', // 'normalized', 'percentage', or 'absolute'\n    storeMetadata: true // Include container dimensions in stored data\n  })\n  .onOverlayActivate((coordinates) => {\n    console.log('Overlay activated at', coordinates);\n    // coordinates contains both absolute and normalized positions\n  })\n  .onThrowDownConfirm((quadrant, coordinates, videoInfo) => {\n    console.log('Throw-down confirmed in', quadrant);\n    console.log('Coordinates:', coordinates);\n    console.log('Video info:', videoInfo);\n  })\n  .build();\n\n// Initialize QuadTap with the settings\nconst quadTap = new QuadTap(settings);\n\n// Using the Coordinates utility directly\nconst containerWidth = 800;\nconst containerHeight = 600;\nconst absoluteX = 400;\nconst absoluteY = 300;\n\n// Convert to normalized coordinates (0-1)\nconst { normalizedX, normalizedY } = Coordinates.normalize(\n  absoluteX, \n  absoluteY, \n  containerWidth, \n  containerHeight\n);\n\n// Get the quadrant\nconst quadrant = Coordinates.getQuadrant(normalizedX, normalizedY);\n\n// Create a complete coordinate data object\nconst coordinateData = Coordinates.createData(\n  absoluteX,\n  absoluteY,\n  containerWidth,\n  containerHeight\n);\n*/\n","/**\n * Events Helper Functions\n * Utility functions for event handling\n */\n\n/**\n * Create a debounced function\n * @param {Function} func - The function to debounce\n * @param {number} wait - The debounce wait time in milliseconds\n * @returns {Function} The debounced function\n */\nexport function debounce(func, wait) {\n  let timeout;\n  \n  return function executedFunction(...args) {\n    const later = () => {\n      clearTimeout(timeout);\n      func(...args);\n    };\n    \n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n}\n\n/**\n * Create a throttled function\n * @param {Function} func - The function to throttle\n * @param {number} limit - The throttle limit in milliseconds\n * @returns {Function} The throttled function\n */\nexport function throttle(func, limit) {\n  let inThrottle;\n  \n  return function executedFunction(...args) {\n    if (!inThrottle) {\n      func(...args);\n      inThrottle = true;\n      setTimeout(() => {\n        inThrottle = false;\n      }, limit);\n    }\n  };\n}\n\n/**\n * Add event listeners to multiple elements\n * @param {Array|NodeList} elements - The elements to add listeners to\n * @param {string} event - The event type\n * @param {Function} handler - The event handler\n * @param {Object} options - Event listener options\n */\nexport function addEventListenerToAll(elements, event, handler, options = {}) {\n  if (!elements) return;\n  \n  // Convert to array if it's a NodeList\n  const elementsArray = Array.isArray(elements) ? elements : Array.from(elements);\n  \n  elementsArray.forEach(element => {\n    element.addEventListener(event, handler, options);\n  });\n}\n\n/**\n * Remove event listeners from multiple elements\n * @param {Array|NodeList} elements - The elements to remove listeners from\n * @param {string} event - The event type\n * @param {Function} handler - The event handler\n * @param {Object} options - Event listener options\n */\nexport function removeEventListenerFromAll(elements, event, handler, options = {}) {\n  if (!elements) return;\n  \n  // Convert to array if it's a NodeList\n  const elementsArray = Array.isArray(elements) ? elements : Array.from(elements);\n  \n  elementsArray.forEach(element => {\n    element.removeEventListener(event, handler, options);\n  });\n}\n\n/**\n * Create a custom event\n * @param {string} name - The event name\n * @param {Object} detail - The event detail\n * @returns {CustomEvent} The custom event\n */\nexport function createCustomEvent(name, detail = {}) {\n  return new CustomEvent(name, {\n    bubbles: true,\n    cancelable: true,\n    detail\n  });\n}\n\n/**\n * Dispatch a custom event\n * @param {HTMLElement} element - The element to dispatch the event on\n * @param {string} name - The event name\n * @param {Object} detail - The event detail\n * @returns {boolean} Whether the event was canceled\n */\nexport function dispatchCustomEvent(element, name, detail = {}) {\n  const event = createCustomEvent(name, detail);\n  return element.dispatchEvent(event);\n}\n\n/**\n * Add a one-time event listener\n * @param {HTMLElement} element - The element to add the listener to\n * @param {string} event - The event type\n * @param {Function} handler - The event handler\n * @param {Object} options - Event listener options\n */\nexport function addOneTimeEventListener(element, event, handler, options = {}) {\n  const onceHandler = function(e) {\n    handler(e);\n    element.removeEventListener(event, onceHandler, options);\n  };\n  \n  element.addEventListener(event, onceHandler, options);\n}\n","/**\n * Overlay Styles\n * CSS styles for the Quad-Tap overlay\n */\n\n/**\n * Inject all styles for the Quad-Tap component\n */\nexport function injectStyles() {\n  // Check if styles are already injected\n  if (document.getElementById('quad-tap-styles')) {\n    return;\n  }\n  \n  // Create style element\n  const styleElement = document.createElement('style');\n  styleElement.id = 'quad-tap-styles';\n  \n  // Add CSS rules\n  styleElement.textContent = `\n    /* Overlay Container */\n    .overlay-container {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      display: flex;\n      opacity: 0;\n      pointer-events: none;\n      transition: opacity 0.3s ease;\n      z-index: 1000;\n    }\n    \n    .overlay-container.active {\n      opacity: 1;\n      pointer-events: auto;\n    }\n    \n    /* Block pointer events on video when overlay is active */\n    .overlay-container.active + video,\n    .quad-tap-overlay.active + video {\n      pointer-events: none;\n    }\n    \n    /* Quadrants */\n    .quadrant {\n      position: absolute;\n      width: 50%;\n      height: 50%;\n      opacity: 0.7;\n      transition: opacity 0.3s ease;\n    }\n    \n    .quadrant.top-left {\n      top: 0;\n      left: 0;\n      background: linear-gradient(135deg, rgba(173, 216, 230, 0.7), rgba(173, 216, 230, 0));\n    }\n    \n    .quadrant.top-right {\n      top: 0;\n      right: 0;\n      background: linear-gradient(225deg, rgba(255, 255, 153, 0.7), rgba(255, 255, 153, 0));\n    }\n    \n    .quadrant.bottom-left {\n      bottom: 0;\n      left: 0;\n      background: linear-gradient(45deg, rgba(144, 238, 144, 0.7), rgba(144, 238, 144, 0));\n    }\n    \n    .quadrant.bottom-right {\n      bottom: 0;\n      right: 0;\n      background: linear-gradient(315deg, rgba(255, 182, 193, 0.7), rgba(255, 182, 193, 0));\n    }\n    \n    /* Profile Bubble */\n    .profile-bubble {\n      position: absolute;\n      width: 60px;\n      height: 60px;\n      border-radius: 50%;\n      background-color: rgba(128, 128, 128, 0.8);\n      border: 2px solid white;\n      box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      cursor: pointer;\n      z-index: 1001;\n      transform: translate(-50%, -50%);\n      transition: transform 0.2s ease, box-shadow 0.2s ease;\n    }\n    \n    .profile-bubble:hover {\n      transform: translate(-50%, -50%) scale(1.1);\n      box-shadow: 0 0 15px rgba(0, 0, 0, 0.7);\n    }\n    \n    /* Light-Box Modal */\n    .td-modal {\n      display: none;\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background-color: rgba(0, 0, 0, 0.7);\n      z-index: 2000;\n      justify-content: center;\n      align-items: center;\n      opacity: 0;\n      transition: opacity 0.3s ease;\n    }\n    \n    .td-modal.active {\n      display: flex;\n      opacity: 1;\n    }\n    \n    .td-modal-content {\n      background-color: white;\n      padding: 20px;\n      border-radius: 10px;\n      width: 80%;\n      max-width: 600px;\n      max-height: 80vh;\n      overflow-y: auto;\n      position: relative;\n      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);\n    }\n    \n    .td-modal-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 20px;\n      padding-bottom: 10px;\n      border-bottom: 1px solid #eee;\n    }\n    \n    .td-modal-header h4 {\n      margin: 0;\n      font-size: 1.5rem;\n      color: #333;\n    }\n    \n    .td-close-btn, .td-pause-play-btn {\n      background: none;\n      border: none;\n      font-size: 1.5rem;\n      cursor: pointer;\n      color: #999;\n      transition: color 0.2s ease;\n    }\n    \n    .td-close-btn {\n      margin-left: 10px;\n    }\n    \n    .td-pause-play-btn {\n      margin-left: auto;\n    }\n    \n    .td-close-btn:hover, .td-pause-play-btn:hover {\n      color: #333;\n    }\n    \n    /* Emoji Grid */\n    .emoji-grid {\n      display: grid;\n      grid-template-columns: 1fr 1fr;\n      grid-template-rows: 1fr 1fr;\n      gap: 10px;\n      width: 100%;\n    }\n    \n    .emoji-quadrant {\n      padding: 10px;\n      border-radius: 8px;\n    }\n    \n    .emoji-quadrant.top-left {\n      background-color: rgba(173, 216, 230, 0.3);\n    }\n    \n    .emoji-quadrant.top-right {\n      background-color: rgba(255, 255, 153, 0.3);\n    }\n    \n    .emoji-quadrant.bottom-left {\n      background-color: rgba(144, 238, 144, 0.3);\n    }\n    \n    .emoji-quadrant.bottom-right {\n      background-color: rgba(255, 182, 193, 0.3);\n    }\n    \n    .emoji-row {\n      display: flex;\n      justify-content: space-around;\n      margin-bottom: 10px;\n      background-color: transparent;\n    }\n    \n    .emoji-cell {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      background-color: transparent;\n    }\n    \n    .thought-emoji {\n      font-size: 2rem;\n      cursor: pointer;\n      padding: 5px;\n      border-radius: 5px;\n      transition: transform 0.2s ease, background-color 0.2s ease;\n    }\n    \n    .thought-emoji:hover {\n      transform: scale(1.2);\n      background-color: rgba(255, 255, 255, 0.5);\n    }\n    \n    .thought-emoji.selected {\n      background-color: rgba(255, 255, 255, 0.8);\n      box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);\n    }\n    \n    /* Tooltip */\n    .tooltip {\n      position: absolute;\n      background-color: rgba(0, 0, 0, 0.7);\n      color: white;\n      padding: 5px 10px;\n      border-radius: 5px;\n      font-size: 0.8rem;\n      pointer-events: none;\n      z-index: 1002;\n      transition: opacity 0.3s ease;\n    }\n    \n    /* Comment Box */\n    .comment-box {\n      margin-top: 20px;\n      width: 100%;\n    }\n    \n    .comment-box textarea {\n      width: 100%;\n      padding: 10px;\n      border: 1px solid #ddd;\n      border-radius: 5px;\n      resize: vertical;\n      min-height: 80px;\n      font-family: inherit;\n    }\n    \n    /* Media Buttons */\n    .media-buttons {\n      display: flex;\n      flex-wrap: wrap;\n      gap: 10px;\n      margin-top: 10px;\n      margin-bottom: 10px;\n    }\n    \n    .media-button {\n      padding: 8px 12px;\n      border: none;\n      border-radius: 5px;\n      cursor: pointer;\n      font-weight: bold;\n      transition: background-color 0.2s ease;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n    \n    .upload-button {\n      background-color: #3498db;\n      color: white;\n    }\n    \n    .upload-button:hover {\n      background-color: #2980b9;\n    }\n    \n    .capture-button {\n      background-color: #e74c3c;\n      color: white;\n    }\n    \n    .capture-button:hover {\n      background-color: #c0392b;\n    }\n    \n    .uploaded-file-name {\n      margin-top: 5px;\n      padding: 5px;\n      background-color: #f1f1f1;\n      border-radius: 3px;\n      font-size: 0.9rem;\n      width: 100%;\n    }\n    \n    .recording-message {\n      margin-top: 5px;\n      padding: 5px;\n      background-color: #f8d7da;\n      color: #721c24;\n      border-radius: 3px;\n      font-size: 0.9rem;\n      width: 100%;\n    }\n    \n    .recording-indicator {\n      animation: pulse 1.5s infinite;\n    }\n    \n    @keyframes pulse {\n      0% { opacity: 1; }\n      50% { opacity: 0.5; }\n      100% { opacity: 1; }\n    }\n    \n    /* Action Buttons */\n    .action-buttons {\n      display: flex;\n      justify-content: flex-end;\n      margin-top: 20px;\n      gap: 10px;\n    }\n    \n    .action-button {\n      padding: 8px 16px;\n      border: none;\n      border-radius: 5px;\n      cursor: pointer;\n      font-weight: bold;\n      transition: background-color 0.2s ease;\n    }\n    \n    .save-button {\n      background-color: #4CAF50;\n      color: white;\n    }\n    \n    .save-button:hover {\n      background-color: #45a049;\n    }\n    \n    .cancel-button {\n      background-color: #f44336;\n      color: white;\n    }\n    \n    .cancel-button:hover {\n      background-color: #d32f2f;\n    }\n  `;\n  \n  // Append style element to head\n  document.head.appendChild(styleElement);\n}\n\n/**\n * Remove all injected styles\n */\nexport function removeStyles() {\n  const styleElement = document.getElementById('quad-tap-styles');\n  if (styleElement) {\n    styleElement.parentNode.removeChild(styleElement);\n  }\n}\n"],"names":["factory","createButton","text","ariaLabel","onClick","button","document","createElement","className","textContent","setAttribute","addEventListener","copyToClipboard","navigator","clipboard","writeText","err","console","error","textarea","value","style","position","body","appendChild","select","execCommand","removeChild","showTooltip","element","message","tooltip","rect","getBoundingClientRect","top","concat","left","width","transform","setTimeout","opacity","module","exports","createControlStrip","options","overlay","onPlay","onPause","onRewind","onForward","onShare","onCopyUrl","_options$rewindTime","rewindTime","_options$forwardTime","forwardTime","_options$debug","debug","_options$showAllButto","showAllButtons","_options$isLightbox","isLightbox","getElementById","styleElement","id","head","injectControlStripStyles","controlStrip","overlayZIndex","parseInt","getComputedStyle","zIndex","toString","rewindButton","playPauseButton","evt","isPlaying","forwardButton","shareButton","stopPropagation","shareUrl","window","location","href","share","title","url","copyButton","log","fadeTimeout","fadeControls","clearTimeout","ResizeObserver","overlayRect","actualTopPercent","height","actualLeftPercent","topPercent","toFixed","leftPercent","observe","updatePlayPauseButton","querySelector","showControlStrip","display","classList","contains","hideControlStrip","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","tag","arguments","length","html","innerHTML","attributes","styles","events","event","children","forEach","child","positionElementWithCenterMaintained","x","y","parent","parentElement","parentRect","STORAGE_PREFIX","saveToStorage","prefixedKey","_typeof","localStorage","setItem","JSON","stringify","getFromStorage","defaultValue","getItem","parse","e","_regeneratorRuntime","r","t","n","Symbol","i","iterator","a","asyncIterator","u","toStringTag","c","configurable","writable","h","Generator","create","Error","done","method","arg","delegate","f","sent","_sent","dispatchException","abrupt","s","type","Context","wrap","GeneratorFunction","GeneratorFunctionPrototype","l","p","getPrototypeOf","v","g","_invoke","AsyncIterator","resolve","__await","then","TypeError","next","w","tryEntries","push","m","reset","isNaN","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","unshift","pop","values","prev","charAt","slice","stop","rval","complete","finish","delegateYield","asyncGeneratorStep","_asyncToGenerator","apply","_next","_throw","_pauseIfPlaying","_callee","quadTap","_quadTap$config$video","video","adapter","_context","elements","config","videoPlayerApi","enabled","state","wasPlayingBefore","pause","paused","_resumeIfNeeded","_callee2","_quadTap$config$video2","_context2","play","t0","DEFAULT_CONFIG","containerId","videoSelector","autoCancelTimeout","emojis","quadrants","topLeft","topRight","bottomLeft","bottomRight","directional","up","right","down","thoughts","videoControls","callbacks","onOverlayActivate","onThrowDownInitiate","onThrowDownConfirm","onThrowDownCancel","onVideoControl","QuadTap","func","inThrottle","customConfig","_classCallCheck","this","assign","active","profileBubblePosition","currentQuadrant","autoCancelTimer","containerDimensions","videoPlaying","recording","mediaStream","mediaRecorder","recordingStartTime","recordingIndicator","container","profileBubble","directionalEmojis","quadrantEmojis","lightBox","lightBoxContent","emojiGrid","commentBox","throttledResize","handleResize","bind","init","data","injectStyles","createOverlayElements","createLightBoxElements","bindEventHandlers","overlayContainer","topLeftQuadrant","topRightQuadrant","bottomLeftQuadrant","bottomRightQuadrant","upEmoji","rightEmoji","downEmoji","leftEmoji","topLeftEmoji","topRightEmoji","bottomLeftEmoji","bottomRightEmoji","createVideoControls","_this","currentTime","Math","max","min","duration","_this2","lightboxControlContainer","padding","marginTop","marginBottom","borderTop","borderBottom","flexDirection","videoSliderContainer","timeDisplay","justifyContent","fontSize","color","currentTimeElement","durationElement","sliderContainer","alignItems","slider","step","margin","cursor","input","seekTime","target","updateVideoTimeDisplay","alert","videoSlider","_this3","lightBoxModal","lightBoxHeader","lightBoxTitle","closeButton","click","closeLightBox","videoInfoDisplay","marginRight","lightboxControlStrip","createLightboxControlStrip","createEmojiGrid","commentTextarea","placeholder","comment","extractedUrl","extractUrlFromText","saveEventToHistory","mediaButtons","uploadButton","fileInput","change","file","files","fileNameDisplay","fileName","fileSize","size","fileType","captureButton","stopRecording","recordingMessage","parentNode","startRecording","actionButtons","cancelButton","saveButton","saveThrowDown","separator","clear","gridTemplateColumns","gridTemplateRows","gap","emojiTopLeftQuadrant","gridRow","gridColumn","emojiTopRightQuadrant","emojiBottomLeftQuadrant","emojiBottomRightQuadrant","createEmojiTable","quadrantElement","quadrantName","_this4","firstRow","cell1","emojiElement","selectEmoji","cell2","secondRow","cell3","cell4","matches","match","eventData","timestamp","Date","toISOString","context","storedEvents","emoji","quadrant","index","querySelectorAll","el","remove","add","getAttribute","videoInfo","videoId","now","videoMetadata","Array","from","filter","attr","startsWith","replace","muted","volume","playbackRate","videoWidth","videoHeight","src","currentSrc","selectedEmoji","selectedQuadrant","selectedIndex","positionX","positionY","videoTime","containerWidth","containerHeight","timezoneOffset","getTimezoneOffset","locale","language","userAgent","platform","referrer","saveThrowDownContext","self","preventDefault","closest","openLightBox","deactivateOverlay","clientX","clientY","activateOverlay","updateContainerDimensions","pixelX","pixelY","positionDirectionalEmojis","positionQuadrantEmojis","positionVideoControls","positionTooltip","_this5","percentX","percentY","centerX","centerY","getQuadrant","_this$state$container","distanceFromTop","distanceFromRight","distanceFromBottom","distanceFromLeft","upPosition","rightPosition","downPosition","leftPosition","distanceToUp","sqrt","pow","distanceToRight","distanceToDown","distanceToLeft","maxDistance","upScale","rightScale","downScale","leftScale","bottom","defaultFontSize","defaultOpacity","enlargedFontSize","enlargedOpacity","bubbleRect","bubbleTop","backgroundColor","borderRadius","textAlign","action","_this6","_this7","videoTimeUpdateInterval","setInterval","pauseOnLightboxOnly","_x","pauseIfPlaying","_this8","clearInterval","_x2","resumeIfNeeded","formatTime","seconds","isFinite","mins","floor","secs","percent","_this9","mediaDevices","MediaRecorder","getUserMedia","audio","stream","chunks","ondataavailable","onstop","blob","Blob","URL","createObjectURL","getTracks","track","start","_this0","pausePlayButton","removeEventListener","handleContainerClick","handleBubbleClick","handleLightBoxClick","handleVideoPlay","handleVideoPause","handleKeyDown","define","amd"],"sourceRoot":""}